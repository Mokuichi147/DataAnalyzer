(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function lu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ph={exports:{}},Lo={},mh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d0;function Aw(){if(d0)return Re;d0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=y&&O[y]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function N(O,K,Se){this.props=O,this.context=K,this.refs=w,this.updater=Se||b}N.prototype.isReactComponent={},N.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},N.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function I(){}I.prototype=N.prototype;function k(O,K,Se){this.props=O,this.context=K,this.refs=w,this.updater=Se||b}var D=k.prototype=new I;D.constructor=k,_(D,N.prototype),D.isPureReactComponent=!0;var L=Array.isArray,M=Object.prototype.hasOwnProperty,B={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function Q(O,K,Se){var Ne,De={},je=null,tt=null;if(K!=null)for(Ne in K.ref!==void 0&&(tt=K.ref),K.key!==void 0&&(je=""+K.key),K)M.call(K,Ne)&&!R.hasOwnProperty(Ne)&&(De[Ne]=K[Ne]);var Ye=arguments.length-2;if(Ye===1)De.children=Se;else if(1<Ye){for(var lt=Array(Ye),an=0;an<Ye;an++)lt[an]=arguments[an+2];De.children=lt}if(O&&O.defaultProps)for(Ne in Ye=O.defaultProps,Ye)De[Ne]===void 0&&(De[Ne]=Ye[Ne]);return{$$typeof:n,type:O,key:je,ref:tt,props:De,_owner:B.current}}function P(O,K){return{$$typeof:n,type:O.type,key:K,ref:O.ref,props:O.props,_owner:O._owner}}function G(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function H(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Se){return K[Se]})}var $=/\/+/g;function W(O,K){return typeof O=="object"&&O!==null&&O.key!=null?H(""+O.key):K.toString(36)}function de(O,K,Se,Ne,De){var je=typeof O;(je==="undefined"||je==="boolean")&&(O=null);var tt=!1;if(O===null)tt=!0;else switch(je){case"string":case"number":tt=!0;break;case"object":switch(O.$$typeof){case n:case e:tt=!0}}if(tt)return tt=O,De=De(tt),O=Ne===""?"."+W(tt,0):Ne,L(De)?(Se="",O!=null&&(Se=O.replace($,"$&/")+"/"),de(De,K,Se,"",function(an){return an})):De!=null&&(G(De)&&(De=P(De,Se+(!De.key||tt&&tt.key===De.key?"":(""+De.key).replace($,"$&/")+"/")+O)),K.push(De)),1;if(tt=0,Ne=Ne===""?".":Ne+":",L(O))for(var Ye=0;Ye<O.length;Ye++){je=O[Ye];var lt=Ne+W(je,Ye);tt+=de(je,K,Se,lt,De)}else if(lt=x(O),typeof lt=="function")for(O=lt.call(O),Ye=0;!(je=O.next()).done;)je=je.value,lt=Ne+W(je,Ye++),tt+=de(je,K,Se,lt,De);else if(je==="object")throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return tt}function U(O,K,Se){if(O==null)return O;var Ne=[],De=0;return de(O,Ne,"","",function(je){return K.call(Se,je,De++)}),Ne}function Y(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(Se){(O._status===0||O._status===-1)&&(O._status=1,O._result=Se)},function(Se){(O._status===0||O._status===-1)&&(O._status=2,O._result=Se)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var q={current:null},V={transition:null},X={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:V,ReactCurrentOwner:B};function ne(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:U,forEach:function(O,K,Se){U(O,function(){K.apply(this,arguments)},Se)},count:function(O){var K=0;return U(O,function(){K++}),K},toArray:function(O){return U(O,function(K){return K})||[]},only:function(O){if(!G(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Re.Component=N,Re.Fragment=t,Re.Profiler=i,Re.PureComponent=k,Re.StrictMode=s,Re.Suspense=d,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Re.act=ne,Re.cloneElement=function(O,K,Se){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Ne=_({},O.props),De=O.key,je=O.ref,tt=O._owner;if(K!=null){if(K.ref!==void 0&&(je=K.ref,tt=B.current),K.key!==void 0&&(De=""+K.key),O.type&&O.type.defaultProps)var Ye=O.type.defaultProps;for(lt in K)M.call(K,lt)&&!R.hasOwnProperty(lt)&&(Ne[lt]=K[lt]===void 0&&Ye!==void 0?Ye[lt]:K[lt])}var lt=arguments.length-2;if(lt===1)Ne.children=Se;else if(1<lt){Ye=Array(lt);for(var an=0;an<lt;an++)Ye[an]=arguments[an+2];Ne.children=Ye}return{$$typeof:n,type:O.type,key:De,ref:je,props:Ne,_owner:tt}},Re.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},Re.createElement=Q,Re.createFactory=function(O){var K=Q.bind(null,O);return K.type=O,K},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:c,render:O}},Re.isValidElement=G,Re.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:Y}},Re.memo=function(O,K){return{$$typeof:f,type:O,compare:K===void 0?null:K}},Re.startTransition=function(O){var K=V.transition;V.transition={};try{O()}finally{V.transition=K}},Re.unstable_act=ne,Re.useCallback=function(O,K){return q.current.useCallback(O,K)},Re.useContext=function(O){return q.current.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O){return q.current.useDeferredValue(O)},Re.useEffect=function(O,K){return q.current.useEffect(O,K)},Re.useId=function(){return q.current.useId()},Re.useImperativeHandle=function(O,K,Se){return q.current.useImperativeHandle(O,K,Se)},Re.useInsertionEffect=function(O,K){return q.current.useInsertionEffect(O,K)},Re.useLayoutEffect=function(O,K){return q.current.useLayoutEffect(O,K)},Re.useMemo=function(O,K){return q.current.useMemo(O,K)},Re.useReducer=function(O,K,Se){return q.current.useReducer(O,K,Se)},Re.useRef=function(O){return q.current.useRef(O)},Re.useState=function(O){return q.current.useState(O)},Re.useSyncExternalStore=function(O,K,Se){return q.current.useSyncExternalStore(O,K,Se)},Re.useTransition=function(){return q.current.useTransition()},Re.version="18.3.1",Re}var h0;function Ea(){return h0||(h0=1,mh.exports=Aw()),mh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function Lw(){if(f0)return Lo;f0=1;var n=Ea(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,f){var m,y={},x=null,b=null;f!==void 0&&(x=""+f),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(b=d.ref);for(m in d)s.call(d,m)&&!a.hasOwnProperty(m)&&(y[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)y[m]===void 0&&(y[m]=d[m]);return{$$typeof:e,type:c,key:x,ref:b,props:y,_owner:i.current}}return Lo.Fragment=t,Lo.jsx=l,Lo.jsxs=l,Lo}var p0;function Bw(){return p0||(p0=1,ph.exports=Lw()),ph.exports}var h=Bw(),ce=Ea();const cu=lu(ce);var Hl={},gh={exports:{}},Jt={},yh={exports:{}},xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function Fw(){return m0||(m0=1,function(n){function e(V,X){var ne=V.length;V.push(X);e:for(;0<ne;){var O=ne-1>>>1,K=V[O];if(0<i(K,X))V[O]=X,V[ne]=K,ne=O;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var X=V[0],ne=V.pop();if(ne!==X){V[0]=ne;e:for(var O=0,K=V.length,Se=K>>>1;O<Se;){var Ne=2*(O+1)-1,De=V[Ne],je=Ne+1,tt=V[je];if(0>i(De,ne))je<K&&0>i(tt,De)?(V[O]=tt,V[je]=ne,O=je):(V[O]=De,V[Ne]=ne,O=Ne);else if(je<K&&0>i(tt,ne))V[O]=tt,V[je]=ne,O=je;else break e}}return X}function i(V,X){var ne=V.sortIndex-X.sortIndex;return ne!==0?ne:V.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],f=[],m=1,y=null,x=3,b=!1,_=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(V){for(var X=t(f);X!==null;){if(X.callback===null)s(f);else if(X.startTime<=V)s(f),X.sortIndex=X.expirationTime,e(d,X);else break;X=t(f)}}function L(V){if(w=!1,D(V),!_)if(t(d)!==null)_=!0,Y(M);else{var X=t(f);X!==null&&q(L,X.startTime-V)}}function M(V,X){_=!1,w&&(w=!1,I(Q),Q=-1),b=!0;var ne=x;try{for(D(X),y=t(d);y!==null&&(!(y.expirationTime>X)||V&&!H());){var O=y.callback;if(typeof O=="function"){y.callback=null,x=y.priorityLevel;var K=O(y.expirationTime<=X);X=n.unstable_now(),typeof K=="function"?y.callback=K:y===t(d)&&s(d),D(X)}else s(d);y=t(d)}if(y!==null)var Se=!0;else{var Ne=t(f);Ne!==null&&q(L,Ne.startTime-X),Se=!1}return Se}finally{y=null,x=ne,b=!1}}var B=!1,R=null,Q=-1,P=5,G=-1;function H(){return!(n.unstable_now()-G<P)}function $(){if(R!==null){var V=n.unstable_now();G=V;var X=!0;try{X=R(!0,V)}finally{X?W():(B=!1,R=null)}}else B=!1}var W;if(typeof k=="function")W=function(){k($)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,U=de.port2;de.port1.onmessage=$,W=function(){U.postMessage(null)}}else W=function(){N($,0)};function Y(V){R=V,B||(B=!0,W())}function q(V,X){Q=N(function(){V(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){_||b||(_=!0,Y(M))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(V){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var ne=x;x=X;try{return V()}finally{x=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ne=x;x=V;try{return X()}finally{x=ne}},n.unstable_scheduleCallback=function(V,X,ne){var O=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?O+ne:O):ne=O,V){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,V={id:m++,callback:X,priorityLevel:V,startTime:ne,expirationTime:K,sortIndex:-1},ne>O?(V.sortIndex=ne,e(f,V),t(d)===null&&V===t(f)&&(w?(I(Q),Q=-1):w=!0,q(L,ne-O))):(V.sortIndex=K,e(d,V),_||b||(_=!0,Y(M))),V},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(V){var X=x;return function(){var ne=x;x=X;try{return V.apply(this,arguments)}finally{x=ne}}}}(xh)),xh}var g0;function Pw(){return g0||(g0=1,yh.exports=Fw()),yh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function Uw(){if(y0)return Jt;y0=1;var n=Ea(),e=Pw();function t(r){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function a(r,o){l(r,o),l(r+"Capture",o)}function l(r,o){for(i[r]=o,r=0;r<o.length;r++)s.add(o[r])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function x(r){return d.call(y,r)?!0:d.call(m,r)?!1:f.test(r)?y[r]=!0:(m[r]=!0,!1)}function b(r,o,u,p){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function _(r,o,u,p){if(o===null||typeof o>"u"||b(r,o,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(r,o,u,p,g,v,S){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=r,this.type=o,this.sanitizeURL=v,this.removeEmptyString=S}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){N[r]=new w(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var o=r[0];N[o]=new w(o,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){N[r]=new w(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){N[r]=new w(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){N[r]=new w(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){N[r]=new w(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){N[r]=new w(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){N[r]=new w(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){N[r]=new w(r,5,!1,r.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function k(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var o=r.replace(I,k);N[o]=new w(o,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var o=r.replace(I,k);N[o]=new w(o,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var o=r.replace(I,k);N[o]=new w(o,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){N[r]=new w(r,1,!1,r.toLowerCase(),null,!1,!1)}),N.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){N[r]=new w(r,1,!1,r.toLowerCase(),null,!0,!0)});function D(r,o,u,p){var g=N.hasOwnProperty(o)?N[o]:null;(g!==null?g.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(_(o,u,g,p)&&(u=null),p||g===null?x(o)&&(u===null?r.removeAttribute(o):r.setAttribute(o,""+u)):g.mustUseProperty?r[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,p=g.attributeNamespace,u===null?r.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?r.setAttributeNS(p,o,u):r.setAttribute(o,u))))}var L=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),B=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),H=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),V=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var ne=Object.assign,O;function K(r){if(O===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+r}var Se=!1;function Ne(r,o){if(!r||Se)return"";Se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(z){var p=z}Reflect.construct(r,[],o)}else{try{o.call()}catch(z){p=z}r.call(o.prototype)}else{try{throw Error()}catch(z){p=z}r()}}catch(z){if(z&&p&&typeof z.stack=="string"){for(var g=z.stack.split(`
`),v=p.stack.split(`
`),S=g.length-1,E=v.length-1;1<=S&&0<=E&&g[S]!==v[E];)E--;for(;1<=S&&0<=E;S--,E--)if(g[S]!==v[E]){if(S!==1||E!==1)do if(S--,E--,0>E||g[S]!==v[E]){var j=`
`+g[S].replace(" at new "," at ");return r.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",r.displayName)),j}while(1<=S&&0<=E);break}}}finally{Se=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?K(r):""}function De(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=Ne(r.type,!1),r;case 11:return r=Ne(r.type.render,!1),r;case 1:return r=Ne(r.type,!0),r;default:return""}}function je(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case R:return"Fragment";case B:return"Portal";case P:return"Profiler";case Q:return"StrictMode";case W:return"Suspense";case de:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case H:return(r.displayName||"Context")+".Consumer";case G:return(r._context.displayName||"Context")+".Provider";case $:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case U:return o=r.displayName||null,o!==null?o:je(r.type)||"Memo";case Y:o=r._payload,r=r._init;try{return je(r(o))}catch{}}return null}function tt(r){var o=r.type;switch(r.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=o.render,r=r.displayName||r.name||"",o.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(o);case 8:return o===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ye(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function lt(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function an(r){var o=lt(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),p=""+r[o];if(!r.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,v.call(this,S)}}),Object.defineProperty(r,o,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Da(r){r._valueTracker||(r._valueTracker=an(r))}function yp(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return r&&(p=lt(r)?r.checked?"true":"false":r.value),r=p,r!==u?(o.setValue(r),!0):!1}function Ra(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function _u(r,o){var u=o.checked;return ne({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function xp(r,o){var u=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;u=Ye(o.value!=null?o.value:u),r._wrapperState={initialChecked:p,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function vp(r,o){o=o.checked,o!=null&&D(r,"checked",o,!1)}function wu(r,o){vp(r,o);var u=Ye(o.value),p=o.type;if(u!=null)p==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(p==="submit"||p==="reset"){r.removeAttribute("value");return}o.hasOwnProperty("value")?Su(r,o.type,u):o.hasOwnProperty("defaultValue")&&Su(r,o.type,Ye(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(r.defaultChecked=!!o.defaultChecked)}function bp(r,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+r._wrapperState.initialValue,u||o===r.value||(r.value=o),r.defaultValue=o}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function Su(r,o,u){(o!=="number"||Ra(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var Gr=Array.isArray;function qi(r,o,u,p){if(r=r.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<r.length;u++)g=o.hasOwnProperty("$"+r[u].value),r[u].selected!==g&&(r[u].selected=g),g&&p&&(r[u].defaultSelected=!0)}else{for(u=""+Ye(u),o=null,g=0;g<r.length;g++){if(r[g].value===u){r[g].selected=!0,p&&(r[g].defaultSelected=!0);return}o!==null||r[g].disabled||(o=r[g])}o!==null&&(o.selected=!0)}}function Nu(r,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},o,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function _p(r,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Gr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}r._wrapperState={initialValue:Ye(u)}}function wp(r,o){var u=Ye(o.value),p=Ye(o.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),o.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),p!=null&&(r.defaultValue=""+p)}function Sp(r){var o=r.textContent;o===r._wrapperState.initialValue&&o!==""&&o!==null&&(r.value=o)}function Np(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Iu(r,o){return r==null||r==="http://www.w3.org/1999/xhtml"?Np(o):r==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Aa,Ip=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,p,g){MSApp.execUnsafeLocalFunction(function(){return r(o,u,p,g)})}:r}(function(r,o){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=o;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Aa.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;o.firstChild;)r.appendChild(o.firstChild)}});function Xr(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P1=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(r){P1.forEach(function(o){o=o+r.charAt(0).toUpperCase()+r.substring(1),Jr[o]=Jr[r]})});function Ep(r,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Jr.hasOwnProperty(r)&&Jr[r]?(""+o).trim():o+"px"}function kp(r,o){r=r.style;for(var u in o)if(o.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Ep(u,o[u],p);u==="float"&&(u="cssFloat"),p?r.setProperty(u,g):r[u]=g}}var U1=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eu(r,o){if(o){if(U1[r]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ku(r,o){if(r.indexOf("-")===-1)return typeof o.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=null;function ju(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Mu=null,Yi=null,Qi=null;function Tp(r){if(r=_o(r)){if(typeof Mu!="function")throw Error(t(280));var o=r.stateNode;o&&(o=il(o),Mu(r.stateNode,r.type,o))}}function jp(r){Yi?Qi?Qi.push(r):Qi=[r]:Yi=r}function Mp(){if(Yi){var r=Yi,o=Qi;if(Qi=Yi=null,Tp(r),o)for(r=0;r<o.length;r++)Tp(o[r])}}function Cp(r,o){return r(o)}function Op(){}var Cu=!1;function Dp(r,o,u){if(Cu)return r(o,u);Cu=!0;try{return Cp(r,o,u)}finally{Cu=!1,(Yi!==null||Qi!==null)&&(Op(),Mp())}}function Zr(r,o){var u=r.stateNode;if(u===null)return null;var p=il(u);if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ou=!1;if(c)try{var eo={};Object.defineProperty(eo,"passive",{get:function(){Ou=!0}}),window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch{Ou=!1}function z1(r,o,u,p,g,v,S,E,j){var z=Array.prototype.slice.call(arguments,3);try{o.apply(u,z)}catch(Z){this.onError(Z)}}var to=!1,La=null,Ba=!1,Du=null,$1={onError:function(r){to=!0,La=r}};function H1(r,o,u,p,g,v,S,E,j){to=!1,La=null,z1.apply($1,arguments)}function V1(r,o,u,p,g,v,S,E,j){if(H1.apply(this,arguments),to){if(to){var z=La;to=!1,La=null}else throw Error(t(198));Ba||(Ba=!0,Du=z)}}function yi(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function Rp(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function Ap(r){if(yi(r)!==r)throw Error(t(188))}function W1(r){var o=r.alternate;if(!o){if(o=yi(r),o===null)throw Error(t(188));return o!==r?null:r}for(var u=r,p=o;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Ap(g),r;if(v===p)return Ap(g),o;v=v.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=v;else{for(var S=!1,E=g.child;E;){if(E===u){S=!0,u=g,p=v;break}if(E===p){S=!0,p=g,u=v;break}E=E.sibling}if(!S){for(E=v.child;E;){if(E===u){S=!0,u=v,p=g;break}if(E===p){S=!0,p=v,u=g;break}E=E.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?r:o}function Lp(r){return r=W1(r),r!==null?Bp(r):null}function Bp(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var o=Bp(r);if(o!==null)return o;r=r.sibling}return null}var Fp=e.unstable_scheduleCallback,Pp=e.unstable_cancelCallback,q1=e.unstable_shouldYield,Y1=e.unstable_requestPaint,gt=e.unstable_now,Q1=e.unstable_getCurrentPriorityLevel,Ru=e.unstable_ImmediatePriority,Up=e.unstable_UserBlockingPriority,Fa=e.unstable_NormalPriority,K1=e.unstable_LowPriority,zp=e.unstable_IdlePriority,Pa=null,Vn=null;function G1(r){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(Pa,r,void 0,(r.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:Z1,X1=Math.log,J1=Math.LN2;function Z1(r){return r>>>=0,r===0?32:31-(X1(r)/J1|0)|0}var Ua=64,za=4194304;function no(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function $a(r,o){var u=r.pendingLanes;if(u===0)return 0;var p=0,g=r.suspendedLanes,v=r.pingedLanes,S=u&268435455;if(S!==0){var E=S&~g;E!==0?p=no(E):(v&=S,v!==0&&(p=no(v)))}else S=u&~g,S!==0?p=no(S):v!==0&&(p=no(v));if(p===0)return 0;if(o!==0&&o!==p&&(o&g)===0&&(g=p&-p,v=o&-o,g>=v||g===16&&(v&4194240)!==0))return o;if((p&4)!==0&&(p|=u&16),o=r.entangledLanes,o!==0)for(r=r.entanglements,o&=p;0<o;)u=31-On(o),g=1<<u,p|=r[u],o&=~g;return p}function e_(r,o){switch(r){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t_(r,o){for(var u=r.suspendedLanes,p=r.pingedLanes,g=r.expirationTimes,v=r.pendingLanes;0<v;){var S=31-On(v),E=1<<S,j=g[S];j===-1?((E&u)===0||(E&p)!==0)&&(g[S]=e_(E,o)):j<=o&&(r.expiredLanes|=E),v&=~E}}function Au(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $p(){var r=Ua;return Ua<<=1,(Ua&4194240)===0&&(Ua=64),r}function Lu(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function so(r,o,u){r.pendingLanes|=o,o!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,o=31-On(o),r[o]=u}function n_(r,o){var u=r.pendingLanes&~o;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=o,r.mutableReadLanes&=o,r.entangledLanes&=o,o=r.entanglements;var p=r.eventTimes;for(r=r.expirationTimes;0<u;){var g=31-On(u),v=1<<g;o[g]=0,p[g]=-1,r[g]=-1,u&=~v}}function Bu(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var p=31-On(u),g=1<<p;g&o|r[p]&o&&(r[p]|=o),u&=~g}}var Qe=0;function Hp(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Vp,Fu,Wp,qp,Yp,Pu=!1,Ha=[],As=null,Ls=null,Bs=null,io=new Map,ro=new Map,Fs=[],s_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qp(r,o){switch(r){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":io.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(o.pointerId)}}function oo(r,o,u,p,g,v){return r===null||r.nativeEvent!==v?(r={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},o!==null&&(o=_o(o),o!==null&&Fu(o)),r):(r.eventSystemFlags|=p,o=r.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),r)}function i_(r,o,u,p,g){switch(o){case"focusin":return As=oo(As,r,o,u,p,g),!0;case"dragenter":return Ls=oo(Ls,r,o,u,p,g),!0;case"mouseover":return Bs=oo(Bs,r,o,u,p,g),!0;case"pointerover":var v=g.pointerId;return io.set(v,oo(io.get(v)||null,r,o,u,p,g)),!0;case"gotpointercapture":return v=g.pointerId,ro.set(v,oo(ro.get(v)||null,r,o,u,p,g)),!0}return!1}function Kp(r){var o=xi(r.target);if(o!==null){var u=yi(o);if(u!==null){if(o=u.tag,o===13){if(o=Rp(u),o!==null){r.blockedOn=o,Yp(r.priority,function(){Wp(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Va(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=zu(r.domEventName,r.eventSystemFlags,o[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var p=new u.constructor(u.type,u);Tu=p,u.target.dispatchEvent(p),Tu=null}else return o=_o(u),o!==null&&Fu(o),r.blockedOn=u,!1;o.shift()}return!0}function Gp(r,o,u){Va(r)&&u.delete(o)}function r_(){Pu=!1,As!==null&&Va(As)&&(As=null),Ls!==null&&Va(Ls)&&(Ls=null),Bs!==null&&Va(Bs)&&(Bs=null),io.forEach(Gp),ro.forEach(Gp)}function ao(r,o){r.blockedOn===o&&(r.blockedOn=null,Pu||(Pu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,r_)))}function lo(r){function o(g){return ao(g,r)}if(0<Ha.length){ao(Ha[0],r);for(var u=1;u<Ha.length;u++){var p=Ha[u];p.blockedOn===r&&(p.blockedOn=null)}}for(As!==null&&ao(As,r),Ls!==null&&ao(Ls,r),Bs!==null&&ao(Bs,r),io.forEach(o),ro.forEach(o),u=0;u<Fs.length;u++)p=Fs[u],p.blockedOn===r&&(p.blockedOn=null);for(;0<Fs.length&&(u=Fs[0],u.blockedOn===null);)Kp(u),u.blockedOn===null&&Fs.shift()}var Ki=L.ReactCurrentBatchConfig,Wa=!0;function o_(r,o,u,p){var g=Qe,v=Ki.transition;Ki.transition=null;try{Qe=1,Uu(r,o,u,p)}finally{Qe=g,Ki.transition=v}}function a_(r,o,u,p){var g=Qe,v=Ki.transition;Ki.transition=null;try{Qe=4,Uu(r,o,u,p)}finally{Qe=g,Ki.transition=v}}function Uu(r,o,u,p){if(Wa){var g=zu(r,o,u,p);if(g===null)id(r,o,p,qa,u),Qp(r,p);else if(i_(g,r,o,u,p))p.stopPropagation();else if(Qp(r,p),o&4&&-1<s_.indexOf(r)){for(;g!==null;){var v=_o(g);if(v!==null&&Vp(v),v=zu(r,o,u,p),v===null&&id(r,o,p,qa,u),v===g)break;g=v}g!==null&&p.stopPropagation()}else id(r,o,p,null,u)}}var qa=null;function zu(r,o,u,p){if(qa=null,r=ju(p),r=xi(r),r!==null)if(o=yi(r),o===null)r=null;else if(u=o.tag,u===13){if(r=Rp(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null);return qa=r,null}function Xp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q1()){case Ru:return 1;case Up:return 4;case Fa:case K1:return 16;case zp:return 536870912;default:return 16}default:return 16}}var Ps=null,$u=null,Ya=null;function Jp(){if(Ya)return Ya;var r,o=$u,u=o.length,p,g="value"in Ps?Ps.value:Ps.textContent,v=g.length;for(r=0;r<u&&o[r]===g[r];r++);var S=u-r;for(p=1;p<=S&&o[u-p]===g[v-p];p++);return Ya=g.slice(r,1<p?1-p:void 0)}function Qa(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Ka(){return!0}function Zp(){return!1}function ln(r){function o(u,p,g,v,S){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(u=r[E],this[E]=u?u(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ka:Zp,this.isPropagationStopped=Zp,this}return ne(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),o}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=ln(Gi),co=ne({},Gi,{view:0,detail:0}),l_=ln(co),Vu,Wu,uo,Ga=ne({},co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==uo&&(uo&&r.type==="mousemove"?(Vu=r.screenX-uo.screenX,Wu=r.screenY-uo.screenY):Wu=Vu=0,uo=r),Vu)},movementY:function(r){return"movementY"in r?r.movementY:Wu}}),em=ln(Ga),c_=ne({},Ga,{dataTransfer:0}),u_=ln(c_),d_=ne({},co,{relatedTarget:0}),qu=ln(d_),h_=ne({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),f_=ln(h_),p_=ne({},Gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),m_=ln(p_),g_=ne({},Gi,{data:0}),tm=ln(g_),y_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b_(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=v_[r])?!!o[r]:!1}function Yu(){return b_}var __=ne({},co,{key:function(r){if(r.key){var o=y_[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Qa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?x_[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(r){return r.type==="keypress"?Qa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Qa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),w_=ln(__),S_=ne({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nm=ln(S_),N_=ne({},co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),I_=ln(N_),E_=ne({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),k_=ln(E_),T_=ne({},Ga,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),j_=ln(T_),M_=[9,13,27,32],Qu=c&&"CompositionEvent"in window,ho=null;c&&"documentMode"in document&&(ho=document.documentMode);var C_=c&&"TextEvent"in window&&!ho,sm=c&&(!Qu||ho&&8<ho&&11>=ho),im=" ",rm=!1;function om(r,o){switch(r){case"keyup":return M_.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xi=!1;function O_(r,o){switch(r){case"compositionend":return am(o);case"keypress":return o.which!==32?null:(rm=!0,im);case"textInput":return r=o.data,r===im&&rm?null:r;default:return null}}function D_(r,o){if(Xi)return r==="compositionend"||!Qu&&om(r,o)?(r=Jp(),Ya=$u=Ps=null,Xi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return sm&&o.locale!=="ko"?null:o.data;default:return null}}var R_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!R_[r.type]:o==="textarea"}function cm(r,o,u,p){jp(p),o=tl(o,"onChange"),0<o.length&&(u=new Hu("onChange","change",null,u,p),r.push({event:u,listeners:o}))}var fo=null,po=null;function A_(r){km(r,0)}function Xa(r){var o=nr(r);if(yp(o))return r}function L_(r,o){if(r==="change")return o}var um=!1;if(c){var Ku;if(c){var Gu="oninput"in document;if(!Gu){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),Gu=typeof dm.oninput=="function"}Ku=Gu}else Ku=!1;um=Ku&&(!document.documentMode||9<document.documentMode)}function hm(){fo&&(fo.detachEvent("onpropertychange",fm),po=fo=null)}function fm(r){if(r.propertyName==="value"&&Xa(po)){var o=[];cm(o,po,r,ju(r)),Dp(A_,o)}}function B_(r,o,u){r==="focusin"?(hm(),fo=o,po=u,fo.attachEvent("onpropertychange",fm)):r==="focusout"&&hm()}function F_(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xa(po)}function P_(r,o){if(r==="click")return Xa(o)}function U_(r,o){if(r==="input"||r==="change")return Xa(o)}function z_(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Dn=typeof Object.is=="function"?Object.is:z_;function mo(r,o){if(Dn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!d.call(o,g)||!Dn(r[g],o[g]))return!1}return!0}function pm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function mm(r,o){var u=pm(r);r=0;for(var p;u;){if(u.nodeType===3){if(p=r+u.textContent.length,r<=o&&p>=o)return{node:u,offset:o-r};r=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=pm(u)}}function gm(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?gm(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function ym(){for(var r=window,o=Ra();o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ra(r.document)}return o}function Xu(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}function $_(r){var o=ym(),u=r.focusedElem,p=r.selectionRange;if(o!==u&&u&&u.ownerDocument&&gm(u.ownerDocument.documentElement,u)){if(p!==null&&Xu(u)){if(o=p.start,r=p.end,r===void 0&&(r=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(r,u.value.length);else if(r=(o=u.ownerDocument||document)&&o.defaultView||window,r.getSelection){r=r.getSelection();var g=u.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!r.extend&&v>p&&(g=p,p=v,v=g),g=mm(u,v);var S=mm(u,p);g&&S&&(r.rangeCount!==1||r.anchorNode!==g.node||r.anchorOffset!==g.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),r.removeAllRanges(),v>p?(r.addRange(o),r.extend(S.node,S.offset)):(o.setEnd(S.node,S.offset),r.addRange(o)))}}for(o=[],r=u;r=r.parentNode;)r.nodeType===1&&o.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)r=o[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var H_=c&&"documentMode"in document&&11>=document.documentMode,Ji=null,Ju=null,go=null,Zu=!1;function xm(r,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Zu||Ji==null||Ji!==Ra(p)||(p=Ji,"selectionStart"in p&&Xu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),go&&mo(go,p)||(go=p,p=tl(Ju,"onSelect"),0<p.length&&(o=new Hu("onSelect","select",null,o,u),r.push({event:o,listeners:p}),o.target=Ji)))}function Ja(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Zi={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionend:Ja("Transition","TransitionEnd")},ed={},vm={};c&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Za(r){if(ed[r])return ed[r];if(!Zi[r])return r;var o=Zi[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in vm)return ed[r]=o[u];return r}var bm=Za("animationend"),_m=Za("animationiteration"),wm=Za("animationstart"),Sm=Za("transitionend"),Nm=new Map,Im="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Us(r,o){Nm.set(r,o),a(o,[r])}for(var td=0;td<Im.length;td++){var nd=Im[td],V_=nd.toLowerCase(),W_=nd[0].toUpperCase()+nd.slice(1);Us(V_,"on"+W_)}Us(bm,"onAnimationEnd"),Us(_m,"onAnimationIteration"),Us(wm,"onAnimationStart"),Us("dblclick","onDoubleClick"),Us("focusin","onFocus"),Us("focusout","onBlur"),Us(Sm,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q_=new Set("cancel close invalid load scroll toggle".split(" ").concat(yo));function Em(r,o,u){var p=r.type||"unknown-event";r.currentTarget=u,V1(p,o,void 0,r),r.currentTarget=null}function km(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var p=r[u],g=p.event;p=p.listeners;e:{var v=void 0;if(o)for(var S=p.length-1;0<=S;S--){var E=p[S],j=E.instance,z=E.currentTarget;if(E=E.listener,j!==v&&g.isPropagationStopped())break e;Em(g,E,z),v=j}else for(S=0;S<p.length;S++){if(E=p[S],j=E.instance,z=E.currentTarget,E=E.listener,j!==v&&g.isPropagationStopped())break e;Em(g,E,z),v=j}}}if(Ba)throw r=Du,Ba=!1,Du=null,r}function it(r,o){var u=o[ud];u===void 0&&(u=o[ud]=new Set);var p=r+"__bubble";u.has(p)||(Tm(o,r,2,!1),u.add(p))}function sd(r,o,u){var p=0;o&&(p|=4),Tm(u,r,p,o)}var el="_reactListening"+Math.random().toString(36).slice(2);function xo(r){if(!r[el]){r[el]=!0,s.forEach(function(u){u!=="selectionchange"&&(q_.has(u)||sd(u,!1,r),sd(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[el]||(o[el]=!0,sd("selectionchange",!1,o))}}function Tm(r,o,u,p){switch(Xp(o)){case 1:var g=o_;break;case 4:g=a_;break;default:g=Uu}u=g.bind(null,o,u,r),g=void 0,!Ou||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),p?g!==void 0?r.addEventListener(o,u,{capture:!0,passive:g}):r.addEventListener(o,u,!0):g!==void 0?r.addEventListener(o,u,{passive:g}):r.addEventListener(o,u,!1)}function id(r,o,u,p,g){var v=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var E=p.stateNode.containerInfo;if(E===g||E.nodeType===8&&E.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;S=S.return}for(;E!==null;){if(S=xi(E),S===null)return;if(j=S.tag,j===5||j===6){p=v=S;continue e}E=E.parentNode}}p=p.return}Dp(function(){var z=v,Z=ju(u),ee=[];e:{var J=Nm.get(r);if(J!==void 0){var ie=Hu,oe=r;switch(r){case"keypress":if(Qa(u)===0)break e;case"keydown":case"keyup":ie=w_;break;case"focusin":oe="focus",ie=qu;break;case"focusout":oe="blur",ie=qu;break;case"beforeblur":case"afterblur":ie=qu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=u_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=I_;break;case bm:case _m:case wm:ie=f_;break;case Sm:ie=k_;break;case"scroll":ie=l_;break;case"wheel":ie=j_;break;case"copy":case"cut":case"paste":ie=m_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=nm}var ae=(o&4)!==0,yt=!ae&&r==="scroll",A=ae?J!==null?J+"Capture":null:J;ae=[];for(var C=z,F;C!==null;){F=C;var te=F.stateNode;if(F.tag===5&&te!==null&&(F=te,A!==null&&(te=Zr(C,A),te!=null&&ae.push(vo(C,te,F)))),yt)break;C=C.return}0<ae.length&&(J=new ie(J,oe,null,u,Z),ee.push({event:J,listeners:ae}))}}if((o&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",J&&u!==Tu&&(oe=u.relatedTarget||u.fromElement)&&(xi(oe)||oe[us]))break e;if((ie||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,ie?(oe=u.relatedTarget||u.toElement,ie=z,oe=oe?xi(oe):null,oe!==null&&(yt=yi(oe),oe!==yt||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(ie=null,oe=z),ie!==oe)){if(ae=em,te="onMouseLeave",A="onMouseEnter",C="mouse",(r==="pointerout"||r==="pointerover")&&(ae=nm,te="onPointerLeave",A="onPointerEnter",C="pointer"),yt=ie==null?J:nr(ie),F=oe==null?J:nr(oe),J=new ae(te,C+"leave",ie,u,Z),J.target=yt,J.relatedTarget=F,te=null,xi(Z)===z&&(ae=new ae(A,C+"enter",oe,u,Z),ae.target=F,ae.relatedTarget=yt,te=ae),yt=te,ie&&oe)t:{for(ae=ie,A=oe,C=0,F=ae;F;F=er(F))C++;for(F=0,te=A;te;te=er(te))F++;for(;0<C-F;)ae=er(ae),C--;for(;0<F-C;)A=er(A),F--;for(;C--;){if(ae===A||A!==null&&ae===A.alternate)break t;ae=er(ae),A=er(A)}ae=null}else ae=null;ie!==null&&jm(ee,J,ie,ae,!1),oe!==null&&yt!==null&&jm(ee,yt,oe,ae,!0)}}e:{if(J=z?nr(z):window,ie=J.nodeName&&J.nodeName.toLowerCase(),ie==="select"||ie==="input"&&J.type==="file")var le=L_;else if(lm(J))if(um)le=U_;else{le=F_;var he=B_}else(ie=J.nodeName)&&ie.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(le=P_);if(le&&(le=le(r,z))){cm(ee,le,u,Z);break e}he&&he(r,J,z),r==="focusout"&&(he=J._wrapperState)&&he.controlled&&J.type==="number"&&Su(J,"number",J.value)}switch(he=z?nr(z):window,r){case"focusin":(lm(he)||he.contentEditable==="true")&&(Ji=he,Ju=z,go=null);break;case"focusout":go=Ju=Ji=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,xm(ee,u,Z);break;case"selectionchange":if(H_)break;case"keydown":case"keyup":xm(ee,u,Z)}var fe;if(Qu)e:{switch(r){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Xi?om(r,u)&&(Ie="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(sm&&u.locale!=="ko"&&(Xi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Xi&&(fe=Jp()):(Ps=Z,$u="value"in Ps?Ps.value:Ps.textContent,Xi=!0)),he=tl(z,Ie),0<he.length&&(Ie=new tm(Ie,r,null,u,Z),ee.push({event:Ie,listeners:he}),fe?Ie.data=fe:(fe=am(u),fe!==null&&(Ie.data=fe)))),(fe=C_?O_(r,u):D_(r,u))&&(z=tl(z,"onBeforeInput"),0<z.length&&(Z=new tm("onBeforeInput","beforeinput",null,u,Z),ee.push({event:Z,listeners:z}),Z.data=fe))}km(ee,o)})}function vo(r,o,u){return{instance:r,listener:o,currentTarget:u}}function tl(r,o){for(var u=o+"Capture",p=[];r!==null;){var g=r,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Zr(r,u),v!=null&&p.unshift(vo(r,v,g)),v=Zr(r,o),v!=null&&p.push(vo(r,v,g))),r=r.return}return p}function er(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function jm(r,o,u,p,g){for(var v=o._reactName,S=[];u!==null&&u!==p;){var E=u,j=E.alternate,z=E.stateNode;if(j!==null&&j===p)break;E.tag===5&&z!==null&&(E=z,g?(j=Zr(u,v),j!=null&&S.unshift(vo(u,j,E))):g||(j=Zr(u,v),j!=null&&S.push(vo(u,j,E)))),u=u.return}S.length!==0&&r.push({event:o,listeners:S})}var Y_=/\r\n?/g,Q_=/\u0000|\uFFFD/g;function Mm(r){return(typeof r=="string"?r:""+r).replace(Y_,`
`).replace(Q_,"")}function nl(r,o,u){if(o=Mm(o),Mm(r)!==o&&u)throw Error(t(425))}function sl(){}var rd=null,od=null;function ad(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ld=typeof setTimeout=="function"?setTimeout:void 0,K_=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,G_=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(r){return Cm.resolve(null).then(r).catch(X_)}:ld;function X_(r){setTimeout(function(){throw r})}function cd(r,o){var u=o,p=0;do{var g=u.nextSibling;if(r.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){r.removeChild(g),lo(o);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);lo(o)}function zs(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return r}function Om(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return r;o--}else u==="/$"&&o++}r=r.previousSibling}return null}var tr=Math.random().toString(36).slice(2),Wn="__reactFiber$"+tr,bo="__reactProps$"+tr,us="__reactContainer$"+tr,ud="__reactEvents$"+tr,J_="__reactListeners$"+tr,Z_="__reactHandles$"+tr;function xi(r){var o=r[Wn];if(o)return o;for(var u=r.parentNode;u;){if(o=u[us]||u[Wn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Om(r);r!==null;){if(u=r[Wn])return u;r=Om(r)}return o}r=u,u=r.parentNode}return null}function _o(r){return r=r[Wn]||r[us],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function nr(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function il(r){return r[bo]||null}var dd=[],sr=-1;function $s(r){return{current:r}}function rt(r){0>sr||(r.current=dd[sr],dd[sr]=null,sr--)}function nt(r,o){sr++,dd[sr]=r.current,r.current=o}var Hs={},Ot=$s(Hs),Yt=$s(!1),vi=Hs;function ir(r,o){var u=r.type.contextTypes;if(!u)return Hs;var p=r.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=o[v];return p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=o,r.__reactInternalMemoizedMaskedChildContext=g),g}function Qt(r){return r=r.childContextTypes,r!=null}function rl(){rt(Yt),rt(Ot)}function Dm(r,o,u){if(Ot.current!==Hs)throw Error(t(168));nt(Ot,o),nt(Yt,u)}function Rm(r,o,u){var p=r.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in o))throw Error(t(108,tt(r)||"Unknown",g));return ne({},u,p)}function ol(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Hs,vi=Ot.current,nt(Ot,r),nt(Yt,Yt.current),!0}function Am(r,o,u){var p=r.stateNode;if(!p)throw Error(t(169));u?(r=Rm(r,o,vi),p.__reactInternalMemoizedMergedChildContext=r,rt(Yt),rt(Ot),nt(Ot,r)):rt(Yt),nt(Yt,u)}var ds=null,al=!1,hd=!1;function Lm(r){ds===null?ds=[r]:ds.push(r)}function ew(r){al=!0,Lm(r)}function Vs(){if(!hd&&ds!==null){hd=!0;var r=0,o=Qe;try{var u=ds;for(Qe=1;r<u.length;r++){var p=u[r];do p=p(!0);while(p!==null)}ds=null,al=!1}catch(g){throw ds!==null&&(ds=ds.slice(r+1)),Fp(Ru,Vs),g}finally{Qe=o,hd=!1}}return null}var rr=[],or=0,ll=null,cl=0,mn=[],gn=0,bi=null,hs=1,fs="";function _i(r,o){rr[or++]=cl,rr[or++]=ll,ll=r,cl=o}function Bm(r,o,u){mn[gn++]=hs,mn[gn++]=fs,mn[gn++]=bi,bi=r;var p=hs;r=fs;var g=32-On(p)-1;p&=~(1<<g),u+=1;var v=32-On(o)+g;if(30<v){var S=g-g%5;v=(p&(1<<S)-1).toString(32),p>>=S,g-=S,hs=1<<32-On(o)+g|u<<g|p,fs=v+r}else hs=1<<v|u<<g|p,fs=r}function fd(r){r.return!==null&&(_i(r,1),Bm(r,1,0))}function pd(r){for(;r===ll;)ll=rr[--or],rr[or]=null,cl=rr[--or],rr[or]=null;for(;r===bi;)bi=mn[--gn],mn[gn]=null,fs=mn[--gn],mn[gn]=null,hs=mn[--gn],mn[gn]=null}var cn=null,un=null,ct=!1,Rn=null;function Fm(r,o){var u=bn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=r,o=r.deletions,o===null?(r.deletions=[u],r.flags|=16):o.push(u)}function Pm(r,o){switch(r.tag){case 5:var u=r.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(r.stateNode=o,cn=r,un=zs(o.firstChild),!0):!1;case 6:return o=r.pendingProps===""||o.nodeType!==3?null:o,o!==null?(r.stateNode=o,cn=r,un=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=bi!==null?{id:hs,overflow:fs}:null,r.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=bn(18,null,null,0),u.stateNode=o,u.return=r,r.child=u,cn=r,un=null,!0):!1;default:return!1}}function md(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gd(r){if(ct){var o=un;if(o){var u=o;if(!Pm(r,o)){if(md(r))throw Error(t(418));o=zs(u.nextSibling);var p=cn;o&&Pm(r,o)?Fm(p,u):(r.flags=r.flags&-4097|2,ct=!1,cn=r)}}else{if(md(r))throw Error(t(418));r.flags=r.flags&-4097|2,ct=!1,cn=r}}}function Um(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;cn=r}function ul(r){if(r!==cn)return!1;if(!ct)return Um(r),ct=!0,!1;var o;if((o=r.tag!==3)&&!(o=r.tag!==5)&&(o=r.type,o=o!=="head"&&o!=="body"&&!ad(r.type,r.memoizedProps)),o&&(o=un)){if(md(r))throw zm(),Error(t(418));for(;o;)Fm(r,o),o=zs(o.nextSibling)}if(Um(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(o===0){un=zs(r.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}r=r.nextSibling}un=null}}else un=cn?zs(r.stateNode.nextSibling):null;return!0}function zm(){for(var r=un;r;)r=zs(r.nextSibling)}function ar(){un=cn=null,ct=!1}function yd(r){Rn===null?Rn=[r]:Rn.push(r)}var tw=L.ReactCurrentBatchConfig;function wo(r,o,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,r));var g=p,v=""+r;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(S){var E=g.refs;S===null?delete E[v]:E[v]=S},o._stringRef=v,o)}if(typeof r!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,r))}return r}function dl(r,o){throw r=Object.prototype.toString.call(o),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r))}function $m(r){var o=r._init;return o(r._payload)}function Hm(r){function o(A,C){if(r){var F=A.deletions;F===null?(A.deletions=[C],A.flags|=16):F.push(C)}}function u(A,C){if(!r)return null;for(;C!==null;)o(A,C),C=C.sibling;return null}function p(A,C){for(A=new Map;C!==null;)C.key!==null?A.set(C.key,C):A.set(C.index,C),C=C.sibling;return A}function g(A,C){return A=Js(A,C),A.index=0,A.sibling=null,A}function v(A,C,F){return A.index=F,r?(F=A.alternate,F!==null?(F=F.index,F<C?(A.flags|=2,C):F):(A.flags|=2,C)):(A.flags|=1048576,C)}function S(A){return r&&A.alternate===null&&(A.flags|=2),A}function E(A,C,F,te){return C===null||C.tag!==6?(C=lh(F,A.mode,te),C.return=A,C):(C=g(C,F),C.return=A,C)}function j(A,C,F,te){var le=F.type;return le===R?Z(A,C,F.props.children,te,F.key):C!==null&&(C.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Y&&$m(le)===C.type)?(te=g(C,F.props),te.ref=wo(A,C,F),te.return=A,te):(te=Al(F.type,F.key,F.props,null,A.mode,te),te.ref=wo(A,C,F),te.return=A,te)}function z(A,C,F,te){return C===null||C.tag!==4||C.stateNode.containerInfo!==F.containerInfo||C.stateNode.implementation!==F.implementation?(C=ch(F,A.mode,te),C.return=A,C):(C=g(C,F.children||[]),C.return=A,C)}function Z(A,C,F,te,le){return C===null||C.tag!==7?(C=ji(F,A.mode,te,le),C.return=A,C):(C=g(C,F),C.return=A,C)}function ee(A,C,F){if(typeof C=="string"&&C!==""||typeof C=="number")return C=lh(""+C,A.mode,F),C.return=A,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case M:return F=Al(C.type,C.key,C.props,null,A.mode,F),F.ref=wo(A,null,C),F.return=A,F;case B:return C=ch(C,A.mode,F),C.return=A,C;case Y:var te=C._init;return ee(A,te(C._payload),F)}if(Gr(C)||X(C))return C=ji(C,A.mode,F,null),C.return=A,C;dl(A,C)}return null}function J(A,C,F,te){var le=C!==null?C.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return le!==null?null:E(A,C,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return F.key===le?j(A,C,F,te):null;case B:return F.key===le?z(A,C,F,te):null;case Y:return le=F._init,J(A,C,le(F._payload),te)}if(Gr(F)||X(F))return le!==null?null:Z(A,C,F,te,null);dl(A,F)}return null}function ie(A,C,F,te,le){if(typeof te=="string"&&te!==""||typeof te=="number")return A=A.get(F)||null,E(C,A,""+te,le);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case M:return A=A.get(te.key===null?F:te.key)||null,j(C,A,te,le);case B:return A=A.get(te.key===null?F:te.key)||null,z(C,A,te,le);case Y:var he=te._init;return ie(A,C,F,he(te._payload),le)}if(Gr(te)||X(te))return A=A.get(F)||null,Z(C,A,te,le,null);dl(C,te)}return null}function oe(A,C,F,te){for(var le=null,he=null,fe=C,Ie=C=0,jt=null;fe!==null&&Ie<F.length;Ie++){fe.index>Ie?(jt=fe,fe=null):jt=fe.sibling;var Ue=J(A,fe,F[Ie],te);if(Ue===null){fe===null&&(fe=jt);break}r&&fe&&Ue.alternate===null&&o(A,fe),C=v(Ue,C,Ie),he===null?le=Ue:he.sibling=Ue,he=Ue,fe=jt}if(Ie===F.length)return u(A,fe),ct&&_i(A,Ie),le;if(fe===null){for(;Ie<F.length;Ie++)fe=ee(A,F[Ie],te),fe!==null&&(C=v(fe,C,Ie),he===null?le=fe:he.sibling=fe,he=fe);return ct&&_i(A,Ie),le}for(fe=p(A,fe);Ie<F.length;Ie++)jt=ie(fe,A,Ie,F[Ie],te),jt!==null&&(r&&jt.alternate!==null&&fe.delete(jt.key===null?Ie:jt.key),C=v(jt,C,Ie),he===null?le=jt:he.sibling=jt,he=jt);return r&&fe.forEach(function(Zs){return o(A,Zs)}),ct&&_i(A,Ie),le}function ae(A,C,F,te){var le=X(F);if(typeof le!="function")throw Error(t(150));if(F=le.call(F),F==null)throw Error(t(151));for(var he=le=null,fe=C,Ie=C=0,jt=null,Ue=F.next();fe!==null&&!Ue.done;Ie++,Ue=F.next()){fe.index>Ie?(jt=fe,fe=null):jt=fe.sibling;var Zs=J(A,fe,Ue.value,te);if(Zs===null){fe===null&&(fe=jt);break}r&&fe&&Zs.alternate===null&&o(A,fe),C=v(Zs,C,Ie),he===null?le=Zs:he.sibling=Zs,he=Zs,fe=jt}if(Ue.done)return u(A,fe),ct&&_i(A,Ie),le;if(fe===null){for(;!Ue.done;Ie++,Ue=F.next())Ue=ee(A,Ue.value,te),Ue!==null&&(C=v(Ue,C,Ie),he===null?le=Ue:he.sibling=Ue,he=Ue);return ct&&_i(A,Ie),le}for(fe=p(A,fe);!Ue.done;Ie++,Ue=F.next())Ue=ie(fe,A,Ie,Ue.value,te),Ue!==null&&(r&&Ue.alternate!==null&&fe.delete(Ue.key===null?Ie:Ue.key),C=v(Ue,C,Ie),he===null?le=Ue:he.sibling=Ue,he=Ue);return r&&fe.forEach(function(Rw){return o(A,Rw)}),ct&&_i(A,Ie),le}function yt(A,C,F,te){if(typeof F=="object"&&F!==null&&F.type===R&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case M:e:{for(var le=F.key,he=C;he!==null;){if(he.key===le){if(le=F.type,le===R){if(he.tag===7){u(A,he.sibling),C=g(he,F.props.children),C.return=A,A=C;break e}}else if(he.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Y&&$m(le)===he.type){u(A,he.sibling),C=g(he,F.props),C.ref=wo(A,he,F),C.return=A,A=C;break e}u(A,he);break}else o(A,he);he=he.sibling}F.type===R?(C=ji(F.props.children,A.mode,te,F.key),C.return=A,A=C):(te=Al(F.type,F.key,F.props,null,A.mode,te),te.ref=wo(A,C,F),te.return=A,A=te)}return S(A);case B:e:{for(he=F.key;C!==null;){if(C.key===he)if(C.tag===4&&C.stateNode.containerInfo===F.containerInfo&&C.stateNode.implementation===F.implementation){u(A,C.sibling),C=g(C,F.children||[]),C.return=A,A=C;break e}else{u(A,C);break}else o(A,C);C=C.sibling}C=ch(F,A.mode,te),C.return=A,A=C}return S(A);case Y:return he=F._init,yt(A,C,he(F._payload),te)}if(Gr(F))return oe(A,C,F,te);if(X(F))return ae(A,C,F,te);dl(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,C!==null&&C.tag===6?(u(A,C.sibling),C=g(C,F),C.return=A,A=C):(u(A,C),C=lh(F,A.mode,te),C.return=A,A=C),S(A)):u(A,C)}return yt}var lr=Hm(!0),Vm=Hm(!1),hl=$s(null),fl=null,cr=null,xd=null;function vd(){xd=cr=fl=null}function bd(r){var o=hl.current;rt(hl),r._currentValue=o}function _d(r,o,u){for(;r!==null;){var p=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),r===u)break;r=r.return}}function ur(r,o){fl=r,xd=cr=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&o)!==0&&(Kt=!0),r.firstContext=null)}function yn(r){var o=r._currentValue;if(xd!==r)if(r={context:r,memoizedValue:o,next:null},cr===null){if(fl===null)throw Error(t(308));cr=r,fl.dependencies={lanes:0,firstContext:r}}else cr=cr.next=r;return o}var wi=null;function wd(r){wi===null?wi=[r]:wi.push(r)}function Wm(r,o,u,p){var g=o.interleaved;return g===null?(u.next=u,wd(o)):(u.next=g.next,g.next=u),o.interleaved=u,ps(r,p)}function ps(r,o){r.lanes|=o;var u=r.alternate;for(u!==null&&(u.lanes|=o),u=r,r=r.return;r!==null;)r.childLanes|=o,u=r.alternate,u!==null&&(u.childLanes|=o),u=r,r=r.return;return u.tag===3?u.stateNode:null}var Ws=!1;function Sd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ms(r,o){return{eventTime:r,lane:o,tag:0,payload:null,callback:null,next:null}}function qs(r,o,u){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(Be&2)!==0){var g=p.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),p.pending=o,ps(r,u)}return g=p.interleaved,g===null?(o.next=o,wd(p)):(o.next=g.next,g.next=o),p.interleaved=o,ps(r,u)}function pl(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,Bu(r,u)}}function Ym(r,o){var u=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=o:v=v.next=o}else g=v=o;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}function ml(r,o,u,p){var g=r.updateQueue;Ws=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var j=E,z=j.next;j.next=null,S===null?v=z:S.next=z,S=j;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,E=Z.lastBaseUpdate,E!==S&&(E===null?Z.firstBaseUpdate=z:E.next=z,Z.lastBaseUpdate=j))}if(v!==null){var ee=g.baseState;S=0,Z=z=j=null,E=v;do{var J=E.lane,ie=E.eventTime;if((p&J)===J){Z!==null&&(Z=Z.next={eventTime:ie,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var oe=r,ae=E;switch(J=o,ie=u,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){ee=oe.call(ie,ee,J);break e}ee=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,J=typeof oe=="function"?oe.call(ie,ee,J):oe,J==null)break e;ee=ne({},ee,J);break e;case 2:Ws=!0}}E.callback!==null&&E.lane!==0&&(r.flags|=64,J=g.effects,J===null?g.effects=[E]:J.push(E))}else ie={eventTime:ie,lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Z===null?(z=Z=ie,j=ee):Z=Z.next=ie,S|=J;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;J=E,E=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);if(Z===null&&(j=ee),g.baseState=j,g.firstBaseUpdate=z,g.lastBaseUpdate=Z,o=g.shared.interleaved,o!==null){g=o;do S|=g.lane,g=g.next;while(g!==o)}else v===null&&(g.shared.lanes=0);Ii|=S,r.lanes=S,r.memoizedState=ee}}function Qm(r,o,u){if(r=o.effects,o.effects=null,r!==null)for(o=0;o<r.length;o++){var p=r[o],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var So={},qn=$s(So),No=$s(So),Io=$s(So);function Si(r){if(r===So)throw Error(t(174));return r}function Nd(r,o){switch(nt(Io,o),nt(No,r),nt(qn,So),r=o.nodeType,r){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Iu(null,"");break;default:r=r===8?o.parentNode:o,o=r.namespaceURI||null,r=r.tagName,o=Iu(o,r)}rt(qn),nt(qn,o)}function dr(){rt(qn),rt(No),rt(Io)}function Km(r){Si(Io.current);var o=Si(qn.current),u=Iu(o,r.type);o!==u&&(nt(No,r),nt(qn,u))}function Id(r){No.current===r&&(rt(qn),rt(No))}var ut=$s(0);function gl(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ed=[];function kd(){for(var r=0;r<Ed.length;r++)Ed[r]._workInProgressVersionPrimary=null;Ed.length=0}var yl=L.ReactCurrentDispatcher,Td=L.ReactCurrentBatchConfig,Ni=0,dt=null,_t=null,kt=null,xl=!1,Eo=!1,ko=0,nw=0;function Dt(){throw Error(t(321))}function jd(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Dn(r[u],o[u]))return!1;return!0}function Md(r,o,u,p,g,v){if(Ni=v,dt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,yl.current=r===null||r.memoizedState===null?ow:aw,r=u(p,g),Eo){v=0;do{if(Eo=!1,ko=0,25<=v)throw Error(t(301));v+=1,kt=_t=null,o.updateQueue=null,yl.current=lw,r=u(p,g)}while(Eo)}if(yl.current=_l,o=_t!==null&&_t.next!==null,Ni=0,kt=_t=dt=null,xl=!1,o)throw Error(t(300));return r}function Cd(){var r=ko!==0;return ko=0,r}function Yn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?dt.memoizedState=kt=r:kt=kt.next=r,kt}function xn(){if(_t===null){var r=dt.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var o=kt===null?dt.memoizedState:kt.next;if(o!==null)kt=o,_t=r;else{if(r===null)throw Error(t(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},kt===null?dt.memoizedState=kt=r:kt=kt.next=r}return kt}function To(r,o){return typeof o=="function"?o(r):o}function Od(r){var o=xn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var p=_t,g=p.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}p.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,p=p.baseState;var E=S=null,j=null,z=v;do{var Z=z.lane;if((Ni&Z)===Z)j!==null&&(j=j.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),p=z.hasEagerState?z.eagerState:r(p,z.action);else{var ee={lane:Z,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};j===null?(E=j=ee,S=p):j=j.next=ee,dt.lanes|=Z,Ii|=Z}z=z.next}while(z!==null&&z!==v);j===null?S=p:j.next=E,Dn(p,o.memoizedState)||(Kt=!0),o.memoizedState=p,o.baseState=S,o.baseQueue=j,u.lastRenderedState=p}if(r=u.interleaved,r!==null){g=r;do v=g.lane,dt.lanes|=v,Ii|=v,g=g.next;while(g!==r)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Dd(r){var o=xn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var p=u.dispatch,g=u.pending,v=o.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=r(v,S.action),S=S.next;while(S!==g);Dn(v,o.memoizedState)||(Kt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,p]}function Gm(){}function Xm(r,o){var u=dt,p=xn(),g=o(),v=!Dn(p.memoizedState,g);if(v&&(p.memoizedState=g,Kt=!0),p=p.queue,Rd(eg.bind(null,u,p,r),[r]),p.getSnapshot!==o||v||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,jo(9,Zm.bind(null,u,p,g,o),void 0,null),Tt===null)throw Error(t(349));(Ni&30)!==0||Jm(u,o,g)}return g}function Jm(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=dt.updateQueue,o===null?(o={lastEffect:null,stores:null},dt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Zm(r,o,u,p){o.value=u,o.getSnapshot=p,tg(o)&&ng(r)}function eg(r,o,u){return u(function(){tg(o)&&ng(r)})}function tg(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Dn(r,u)}catch{return!0}}function ng(r){var o=ps(r,1);o!==null&&Fn(o,r,1,-1)}function sg(r){var o=Yn();return typeof r=="function"&&(r=r()),o.memoizedState=o.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:r},o.queue=r,r=r.dispatch=rw.bind(null,dt,r),[o.memoizedState,r]}function jo(r,o,u,p){return r={tag:r,create:o,destroy:u,deps:p,next:null},o=dt.updateQueue,o===null?(o={lastEffect:null,stores:null},dt.updateQueue=o,o.lastEffect=r.next=r):(u=o.lastEffect,u===null?o.lastEffect=r.next=r:(p=u.next,u.next=r,r.next=p,o.lastEffect=r)),r}function ig(){return xn().memoizedState}function vl(r,o,u,p){var g=Yn();dt.flags|=r,g.memoizedState=jo(1|o,u,void 0,p===void 0?null:p)}function bl(r,o,u,p){var g=xn();p=p===void 0?null:p;var v=void 0;if(_t!==null){var S=_t.memoizedState;if(v=S.destroy,p!==null&&jd(p,S.deps)){g.memoizedState=jo(o,u,v,p);return}}dt.flags|=r,g.memoizedState=jo(1|o,u,v,p)}function rg(r,o){return vl(8390656,8,r,o)}function Rd(r,o){return bl(2048,8,r,o)}function og(r,o){return bl(4,2,r,o)}function ag(r,o){return bl(4,4,r,o)}function lg(r,o){if(typeof o=="function")return r=r(),o(r),function(){o(null)};if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function cg(r,o,u){return u=u!=null?u.concat([r]):null,bl(4,4,lg.bind(null,o,r),u)}function Ad(){}function ug(r,o){var u=xn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&jd(o,p[1])?p[0]:(u.memoizedState=[r,o],r)}function dg(r,o){var u=xn();o=o===void 0?null:o;var p=u.memoizedState;return p!==null&&o!==null&&jd(o,p[1])?p[0]:(r=r(),u.memoizedState=[r,o],r)}function hg(r,o,u){return(Ni&21)===0?(r.baseState&&(r.baseState=!1,Kt=!0),r.memoizedState=u):(Dn(u,o)||(u=$p(),dt.lanes|=u,Ii|=u,r.baseState=!0),o)}function sw(r,o){var u=Qe;Qe=u!==0&&4>u?u:4,r(!0);var p=Td.transition;Td.transition={};try{r(!1),o()}finally{Qe=u,Td.transition=p}}function fg(){return xn().memoizedState}function iw(r,o,u){var p=Gs(r);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},pg(r))mg(o,u);else if(u=Wm(r,o,u,p),u!==null){var g=$t();Fn(u,r,p,g),gg(u,o,p)}}function rw(r,o,u){var p=Gs(r),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(pg(r))mg(o,g);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,E=v(S,u);if(g.hasEagerState=!0,g.eagerState=E,Dn(E,S)){var j=o.interleaved;j===null?(g.next=g,wd(o)):(g.next=j.next,j.next=g),o.interleaved=g;return}}catch{}finally{}u=Wm(r,o,g,p),u!==null&&(g=$t(),Fn(u,r,p,g),gg(u,o,p))}}function pg(r){var o=r.alternate;return r===dt||o!==null&&o===dt}function mg(r,o){Eo=xl=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function gg(r,o,u){if((u&4194240)!==0){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,Bu(r,u)}}var _l={readContext:yn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},ow={readContext:yn,useCallback:function(r,o){return Yn().memoizedState=[r,o===void 0?null:o],r},useContext:yn,useEffect:rg,useImperativeHandle:function(r,o,u){return u=u!=null?u.concat([r]):null,vl(4194308,4,lg.bind(null,o,r),u)},useLayoutEffect:function(r,o){return vl(4194308,4,r,o)},useInsertionEffect:function(r,o){return vl(4,2,r,o)},useMemo:function(r,o){var u=Yn();return o=o===void 0?null:o,r=r(),u.memoizedState=[r,o],r},useReducer:function(r,o,u){var p=Yn();return o=u!==void 0?u(o):o,p.memoizedState=p.baseState=o,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:o},p.queue=r,r=r.dispatch=iw.bind(null,dt,r),[p.memoizedState,r]},useRef:function(r){var o=Yn();return r={current:r},o.memoizedState=r},useState:sg,useDebugValue:Ad,useDeferredValue:function(r){return Yn().memoizedState=r},useTransition:function(){var r=sg(!1),o=r[0];return r=sw.bind(null,r[1]),Yn().memoizedState=r,[o,r]},useMutableSource:function(){},useSyncExternalStore:function(r,o,u){var p=dt,g=Yn();if(ct){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),Tt===null)throw Error(t(349));(Ni&30)!==0||Jm(p,o,u)}g.memoizedState=u;var v={value:u,getSnapshot:o};return g.queue=v,rg(eg.bind(null,p,v,r),[r]),p.flags|=2048,jo(9,Zm.bind(null,p,v,u,o),void 0,null),u},useId:function(){var r=Yn(),o=Tt.identifierPrefix;if(ct){var u=fs,p=hs;u=(p&~(1<<32-On(p)-1)).toString(32)+u,o=":"+o+"R"+u,u=ko++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=nw++,o=":"+o+"r"+u.toString(32)+":";return r.memoizedState=o},unstable_isNewReconciler:!1},aw={readContext:yn,useCallback:ug,useContext:yn,useEffect:Rd,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Od,useRef:ig,useState:function(){return Od(To)},useDebugValue:Ad,useDeferredValue:function(r){var o=xn();return hg(o,_t.memoizedState,r)},useTransition:function(){var r=Od(To)[0],o=xn().memoizedState;return[r,o]},useMutableSource:Gm,useSyncExternalStore:Xm,useId:fg,unstable_isNewReconciler:!1},lw={readContext:yn,useCallback:ug,useContext:yn,useEffect:Rd,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Dd,useRef:ig,useState:function(){return Dd(To)},useDebugValue:Ad,useDeferredValue:function(r){var o=xn();return _t===null?o.memoizedState=r:hg(o,_t.memoizedState,r)},useTransition:function(){var r=Dd(To)[0],o=xn().memoizedState;return[r,o]},useMutableSource:Gm,useSyncExternalStore:Xm,useId:fg,unstable_isNewReconciler:!1};function An(r,o){if(r&&r.defaultProps){o=ne({},o),r=r.defaultProps;for(var u in r)o[u]===void 0&&(o[u]=r[u]);return o}return o}function Ld(r,o,u,p){o=r.memoizedState,u=u(p,o),u=u==null?o:ne({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var wl={isMounted:function(r){return(r=r._reactInternals)?yi(r)===r:!1},enqueueSetState:function(r,o,u){r=r._reactInternals;var p=$t(),g=Gs(r),v=ms(p,g);v.payload=o,u!=null&&(v.callback=u),o=qs(r,v,g),o!==null&&(Fn(o,r,g,p),pl(o,r,g))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var p=$t(),g=Gs(r),v=ms(p,g);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=qs(r,v,g),o!==null&&(Fn(o,r,g,p),pl(o,r,g))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=$t(),p=Gs(r),g=ms(u,p);g.tag=2,o!=null&&(g.callback=o),o=qs(r,g,p),o!==null&&(Fn(o,r,p,u),pl(o,r,p))}};function yg(r,o,u,p,g,v,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,v,S):o.prototype&&o.prototype.isPureReactComponent?!mo(u,p)||!mo(g,v):!0}function xg(r,o,u){var p=!1,g=Hs,v=o.contextType;return typeof v=="object"&&v!==null?v=yn(v):(g=Qt(o)?vi:Ot.current,p=o.contextTypes,v=(p=p!=null)?ir(r,g):Hs),o=new o(u,v),r.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wl,r.stateNode=o,o._reactInternals=r,p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=g,r.__reactInternalMemoizedMaskedChildContext=v),o}function vg(r,o,u,p){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==r&&wl.enqueueReplaceState(o,o.state,null)}function Bd(r,o,u,p){var g=r.stateNode;g.props=u,g.state=r.memoizedState,g.refs={},Sd(r);var v=o.contextType;typeof v=="object"&&v!==null?g.context=yn(v):(v=Qt(o)?vi:Ot.current,g.context=ir(r,v)),g.state=r.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Ld(r,o,v,u),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&wl.enqueueReplaceState(g,g.state,null),ml(r,u,g,p),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308)}function hr(r,o){try{var u="",p=o;do u+=De(p),p=p.return;while(p);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:r,source:o,stack:g,digest:null}}function Fd(r,o,u){return{value:r,source:null,stack:u??null,digest:o??null}}function Pd(r,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var cw=typeof WeakMap=="function"?WeakMap:Map;function bg(r,o,u){u=ms(-1,u),u.tag=3,u.payload={element:null};var p=o.value;return u.callback=function(){jl||(jl=!0,eh=p),Pd(r,o)},u}function _g(r,o,u){u=ms(-1,u),u.tag=3;var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var g=o.value;u.payload=function(){return p(g)},u.callback=function(){Pd(r,o)}}var v=r.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Pd(r,o),typeof p!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})}),u}function wg(r,o,u){var p=r.pingCache;if(p===null){p=r.pingCache=new cw;var g=new Set;p.set(o,g)}else g=p.get(o),g===void 0&&(g=new Set,p.set(o,g));g.has(u)||(g.add(u),r=Sw.bind(null,r,o,u),o.then(r,r))}function Sg(r){do{var o;if((o=r.tag===13)&&(o=r.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return r;r=r.return}while(r!==null);return null}function Ng(r,o,u,p,g){return(r.mode&1)===0?(r===o?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ms(-1,1),o.tag=2,qs(u,o,1))),u.lanes|=1),r):(r.flags|=65536,r.lanes=g,r)}var uw=L.ReactCurrentOwner,Kt=!1;function zt(r,o,u,p){o.child=r===null?Vm(o,null,u,p):lr(o,r.child,u,p)}function Ig(r,o,u,p,g){u=u.render;var v=o.ref;return ur(o,g),p=Md(r,o,u,p,v,g),u=Cd(),r!==null&&!Kt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,gs(r,o,g)):(ct&&u&&fd(o),o.flags|=1,zt(r,o,p,g),o.child)}function Eg(r,o,u,p,g){if(r===null){var v=u.type;return typeof v=="function"&&!ah(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,kg(r,o,v,p,g)):(r=Al(u.type,null,p,o,o.mode,g),r.ref=o.ref,r.return=o,o.child=r)}if(v=r.child,(r.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:mo,u(S,p)&&r.ref===o.ref)return gs(r,o,g)}return o.flags|=1,r=Js(v,p),r.ref=o.ref,r.return=o,o.child=r}function kg(r,o,u,p,g){if(r!==null){var v=r.memoizedProps;if(mo(v,p)&&r.ref===o.ref)if(Kt=!1,o.pendingProps=p=v,(r.lanes&g)!==0)(r.flags&131072)!==0&&(Kt=!0);else return o.lanes=r.lanes,gs(r,o,g)}return Ud(r,o,u,p,g)}function Tg(r,o,u){var p=o.pendingProps,g=p.children,v=r!==null?r.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(pr,dn),dn|=u;else{if((u&1073741824)===0)return r=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:r,cachePool:null,transitions:null},o.updateQueue=null,nt(pr,dn),dn|=r,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,nt(pr,dn),dn|=p}else v!==null?(p=v.baseLanes|u,o.memoizedState=null):p=u,nt(pr,dn),dn|=p;return zt(r,o,g,u),o.child}function jg(r,o){var u=o.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Ud(r,o,u,p,g){var v=Qt(u)?vi:Ot.current;return v=ir(o,v),ur(o,g),u=Md(r,o,u,p,v,g),p=Cd(),r!==null&&!Kt?(o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~g,gs(r,o,g)):(ct&&p&&fd(o),o.flags|=1,zt(r,o,u,g),o.child)}function Mg(r,o,u,p,g){if(Qt(u)){var v=!0;ol(o)}else v=!1;if(ur(o,g),o.stateNode===null)Nl(r,o),xg(o,u,p),Bd(o,u,p,g),p=!0;else if(r===null){var S=o.stateNode,E=o.memoizedProps;S.props=E;var j=S.context,z=u.contextType;typeof z=="object"&&z!==null?z=yn(z):(z=Qt(u)?vi:Ot.current,z=ir(o,z));var Z=u.getDerivedStateFromProps,ee=typeof Z=="function"||typeof S.getSnapshotBeforeUpdate=="function";ee||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==p||j!==z)&&vg(o,S,p,z),Ws=!1;var J=o.memoizedState;S.state=J,ml(o,p,S,g),j=o.memoizedState,E!==p||J!==j||Yt.current||Ws?(typeof Z=="function"&&(Ld(o,u,Z,p),j=o.memoizedState),(E=Ws||yg(o,u,E,p,J,j,z))?(ee||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=j),S.props=p,S.state=j,S.context=z,p=E):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{S=o.stateNode,qm(r,o),E=o.memoizedProps,z=o.type===o.elementType?E:An(o.type,E),S.props=z,ee=o.pendingProps,J=S.context,j=u.contextType,typeof j=="object"&&j!==null?j=yn(j):(j=Qt(u)?vi:Ot.current,j=ir(o,j));var ie=u.getDerivedStateFromProps;(Z=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(E!==ee||J!==j)&&vg(o,S,p,j),Ws=!1,J=o.memoizedState,S.state=J,ml(o,p,S,g);var oe=o.memoizedState;E!==ee||J!==oe||Yt.current||Ws?(typeof ie=="function"&&(Ld(o,u,ie,p),oe=o.memoizedState),(z=Ws||yg(o,u,z,p,J,oe,j)||!1)?(Z||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,oe,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,oe,j)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=oe),S.props=p,S.state=oe,S.context=j,p=z):(typeof S.componentDidUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&J===r.memoizedState||(o.flags|=1024),p=!1)}return zd(r,o,u,p,v,g)}function zd(r,o,u,p,g,v){jg(r,o);var S=(o.flags&128)!==0;if(!p&&!S)return g&&Am(o,u,!1),gs(r,o,v);p=o.stateNode,uw.current=o;var E=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,r!==null&&S?(o.child=lr(o,r.child,null,v),o.child=lr(o,null,E,v)):zt(r,o,E,v),o.memoizedState=p.state,g&&Am(o,u,!0),o.child}function Cg(r){var o=r.stateNode;o.pendingContext?Dm(r,o.pendingContext,o.pendingContext!==o.context):o.context&&Dm(r,o.context,!1),Nd(r,o.containerInfo)}function Og(r,o,u,p,g){return ar(),yd(g),o.flags|=256,zt(r,o,u,p),o.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Hd(r){return{baseLanes:r,cachePool:null,transitions:null}}function Dg(r,o,u){var p=o.pendingProps,g=ut.current,v=!1,S=(o.flags&128)!==0,E;if((E=S)||(E=r!==null&&r.memoizedState===null?!1:(g&2)!==0),E?(v=!0,o.flags&=-129):(r===null||r.memoizedState!==null)&&(g|=1),nt(ut,g&1),r===null)return gd(o),r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((o.mode&1)===0?o.lanes=1:r.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(S=p.children,r=p.fallback,v?(p=o.mode,v=o.child,S={mode:"hidden",children:S},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ll(S,p,0,null),r=ji(r,p,u,null),v.return=o,r.return=o,v.sibling=r,o.child=v,o.child.memoizedState=Hd(u),o.memoizedState=$d,r):Vd(o,S));if(g=r.memoizedState,g!==null&&(E=g.dehydrated,E!==null))return dw(r,o,S,p,E,g,u);if(v){v=p.fallback,S=o.mode,g=r.child,E=g.sibling;var j={mode:"hidden",children:p.children};return(S&1)===0&&o.child!==g?(p=o.child,p.childLanes=0,p.pendingProps=j,o.deletions=null):(p=Js(g,j),p.subtreeFlags=g.subtreeFlags&14680064),E!==null?v=Js(E,v):(v=ji(v,S,u,null),v.flags|=2),v.return=o,p.return=o,p.sibling=v,o.child=p,p=v,v=o.child,S=r.child.memoizedState,S=S===null?Hd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=r.childLanes&~u,o.memoizedState=$d,p}return v=r.child,r=v.sibling,p=Js(v,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=u),p.return=o,p.sibling=null,r!==null&&(u=o.deletions,u===null?(o.deletions=[r],o.flags|=16):u.push(r)),o.child=p,o.memoizedState=null,p}function Vd(r,o){return o=Ll({mode:"visible",children:o},r.mode,0,null),o.return=r,r.child=o}function Sl(r,o,u,p){return p!==null&&yd(p),lr(o,r.child,null,u),r=Vd(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function dw(r,o,u,p,g,v,S){if(u)return o.flags&256?(o.flags&=-257,p=Fd(Error(t(422))),Sl(r,o,S,p)):o.memoizedState!==null?(o.child=r.child,o.flags|=128,null):(v=p.fallback,g=o.mode,p=Ll({mode:"visible",children:p.children},g,0,null),v=ji(v,g,S,null),v.flags|=2,p.return=o,v.return=o,p.sibling=v,o.child=p,(o.mode&1)!==0&&lr(o,r.child,null,S),o.child.memoizedState=Hd(S),o.memoizedState=$d,v);if((o.mode&1)===0)return Sl(r,o,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var E=p.dgst;return p=E,v=Error(t(419)),p=Fd(v,p,void 0),Sl(r,o,S,p)}if(E=(S&r.childLanes)!==0,Kt||E){if(p=Tt,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,ps(r,g),Fn(p,r,g,-1))}return oh(),p=Fd(Error(t(421))),Sl(r,o,S,p)}return g.data==="$?"?(o.flags|=128,o.child=r.child,o=Nw.bind(null,r),g._reactRetry=o,null):(r=v.treeContext,un=zs(g.nextSibling),cn=o,ct=!0,Rn=null,r!==null&&(mn[gn++]=hs,mn[gn++]=fs,mn[gn++]=bi,hs=r.id,fs=r.overflow,bi=o),o=Vd(o,p.children),o.flags|=4096,o)}function Rg(r,o,u){r.lanes|=o;var p=r.alternate;p!==null&&(p.lanes|=o),_d(r.return,o,u)}function Wd(r,o,u,p,g){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=g)}function Ag(r,o,u){var p=o.pendingProps,g=p.revealOrder,v=p.tail;if(zt(r,o,p.children,u),p=ut.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Rg(r,u,o);else if(r.tag===19)Rg(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}if(nt(ut,p),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)r=u.alternate,r!==null&&gl(r)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Wd(o,!1,g,u,v);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(r=g.alternate,r!==null&&gl(r)===null){o.child=g;break}r=g.sibling,g.sibling=u,u=g,g=r}Wd(o,!0,u,null,v);break;case"together":Wd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Nl(r,o){(o.mode&1)===0&&r!==null&&(r.alternate=null,o.alternate=null,o.flags|=2)}function gs(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ii|=o.lanes,(u&o.childLanes)===0)return null;if(r!==null&&o.child!==r.child)throw Error(t(153));if(o.child!==null){for(r=o.child,u=Js(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Js(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function hw(r,o,u){switch(o.tag){case 3:Cg(o),ar();break;case 5:Km(o);break;case 1:Qt(o.type)&&ol(o);break;case 4:Nd(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,g=o.memoizedProps.value;nt(hl,p._currentValue),p._currentValue=g;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(nt(ut,ut.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Dg(r,o,u):(nt(ut,ut.current&1),r=gs(r,o,u),r!==null?r.sibling:null);nt(ut,ut.current&1);break;case 19:if(p=(u&o.childLanes)!==0,(r.flags&128)!==0){if(p)return Ag(r,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(ut,ut.current),p)break;return null;case 22:case 23:return o.lanes=0,Tg(r,o,u)}return gs(r,o,u)}var Lg,qd,Bg,Fg;Lg=function(r,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},qd=function(){},Bg=function(r,o,u,p){var g=r.memoizedProps;if(g!==p){r=o.stateNode,Si(qn.current);var v=null;switch(u){case"input":g=_u(r,g),p=_u(r,p),v=[];break;case"select":g=ne({},g,{value:void 0}),p=ne({},p,{value:void 0}),v=[];break;case"textarea":g=Nu(r,g),p=Nu(r,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(r.onclick=sl)}Eu(u,p);var S;u=null;for(z in g)if(!p.hasOwnProperty(z)&&g.hasOwnProperty(z)&&g[z]!=null)if(z==="style"){var E=g[z];for(S in E)E.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?v||(v=[]):(v=v||[]).push(z,null));for(z in p){var j=p[z];if(E=g?.[z],p.hasOwnProperty(z)&&j!==E&&(j!=null||E!=null))if(z==="style")if(E){for(S in E)!E.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in j)j.hasOwnProperty(S)&&E[S]!==j[S]&&(u||(u={}),u[S]=j[S])}else u||(v||(v=[]),v.push(z,u)),u=j;else z==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,E=E?E.__html:void 0,j!=null&&E!==j&&(v=v||[]).push(z,j)):z==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(z,""+j):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(i.hasOwnProperty(z)?(j!=null&&z==="onScroll"&&it("scroll",r),v||E===j||(v=[])):(v=v||[]).push(z,j))}u&&(v=v||[]).push("style",u);var z=v;(o.updateQueue=z)&&(o.flags|=4)}},Fg=function(r,o,u,p){u!==p&&(o.flags|=4)};function Mo(r,o){if(!ct)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function Rt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,p=0;if(o)for(var g=r.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=p,r.childLanes=u,o}function fw(r,o,u){var p=o.pendingProps;switch(pd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Qt(o.type)&&rl(),Rt(o),null;case 3:return p=o.stateNode,dr(),rt(Yt),rt(Ot),kd(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(ul(o)?o.flags|=4:r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Rn!==null&&(sh(Rn),Rn=null))),qd(r,o),Rt(o),null;case 5:Id(o);var g=Si(Io.current);if(u=o.type,r!==null&&o.stateNode!=null)Bg(r,o,u,p,g),r.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return Rt(o),null}if(r=Si(qn.current),ul(o)){p=o.stateNode,u=o.type;var v=o.memoizedProps;switch(p[Wn]=o,p[bo]=v,r=(o.mode&1)!==0,u){case"dialog":it("cancel",p),it("close",p);break;case"iframe":case"object":case"embed":it("load",p);break;case"video":case"audio":for(g=0;g<yo.length;g++)it(yo[g],p);break;case"source":it("error",p);break;case"img":case"image":case"link":it("error",p),it("load",p);break;case"details":it("toggle",p);break;case"input":xp(p,v),it("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},it("invalid",p);break;case"textarea":_p(p,v),it("invalid",p)}Eu(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var E=v[S];S==="children"?typeof E=="string"?p.textContent!==E&&(v.suppressHydrationWarning!==!0&&nl(p.textContent,E,r),g=["children",E]):typeof E=="number"&&p.textContent!==""+E&&(v.suppressHydrationWarning!==!0&&nl(p.textContent,E,r),g=["children",""+E]):i.hasOwnProperty(S)&&E!=null&&S==="onScroll"&&it("scroll",p)}switch(u){case"input":Da(p),bp(p,v,!0);break;case"textarea":Da(p),Sp(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=sl)}p=g,o.updateQueue=p,p!==null&&(o.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Np(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof p.is=="string"?r=S.createElement(u,{is:p.is}):(r=S.createElement(u),u==="select"&&(S=r,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):r=S.createElementNS(r,u),r[Wn]=o,r[bo]=p,Lg(r,o,!1,!1),o.stateNode=r;e:{switch(S=ku(u,p),u){case"dialog":it("cancel",r),it("close",r),g=p;break;case"iframe":case"object":case"embed":it("load",r),g=p;break;case"video":case"audio":for(g=0;g<yo.length;g++)it(yo[g],r);g=p;break;case"source":it("error",r),g=p;break;case"img":case"image":case"link":it("error",r),it("load",r),g=p;break;case"details":it("toggle",r),g=p;break;case"input":xp(r,p),g=_u(r,p),it("invalid",r);break;case"option":g=p;break;case"select":r._wrapperState={wasMultiple:!!p.multiple},g=ne({},p,{value:void 0}),it("invalid",r);break;case"textarea":_p(r,p),g=Nu(r,p),it("invalid",r);break;default:g=p}Eu(u,g),E=g;for(v in E)if(E.hasOwnProperty(v)){var j=E[v];v==="style"?kp(r,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Ip(r,j)):v==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&Xr(r,j):typeof j=="number"&&Xr(r,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?j!=null&&v==="onScroll"&&it("scroll",r):j!=null&&D(r,v,j,S))}switch(u){case"input":Da(r),bp(r,p,!1);break;case"textarea":Da(r),Sp(r);break;case"option":p.value!=null&&r.setAttribute("value",""+Ye(p.value));break;case"select":r.multiple=!!p.multiple,v=p.value,v!=null?qi(r,!!p.multiple,v,!1):p.defaultValue!=null&&qi(r,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(r.onclick=sl)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Rt(o),null;case 6:if(r&&o.stateNode!=null)Fg(r,o,r.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(u=Si(Io.current),Si(qn.current),ul(o)){if(p=o.stateNode,u=o.memoizedProps,p[Wn]=o,(v=p.nodeValue!==u)&&(r=cn,r!==null))switch(r.tag){case 3:nl(p.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&nl(p.nodeValue,u,(r.mode&1)!==0)}v&&(o.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Wn]=o,o.stateNode=p}return Rt(o),null;case 13:if(rt(ut),p=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ct&&un!==null&&(o.mode&1)!==0&&(o.flags&128)===0)zm(),ar(),o.flags|=98560,v=!1;else if(v=ul(o),p!==null&&p.dehydrated!==null){if(r===null){if(!v)throw Error(t(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Wn]=o}else ar(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),v=!1}else Rn!==null&&(sh(Rn),Rn=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(p=p!==null,p!==(r!==null&&r.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(r===null||(ut.current&1)!==0?wt===0&&(wt=3):oh())),o.updateQueue!==null&&(o.flags|=4),Rt(o),null);case 4:return dr(),qd(r,o),r===null&&xo(o.stateNode.containerInfo),Rt(o),null;case 10:return bd(o.type._context),Rt(o),null;case 17:return Qt(o.type)&&rl(),Rt(o),null;case 19:if(rt(ut),v=o.memoizedState,v===null)return Rt(o),null;if(p=(o.flags&128)!==0,S=v.rendering,S===null)if(p)Mo(v,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(S=gl(r),S!==null){for(o.flags|=128,Mo(v,!1),p=S.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=u,u=o.child;u!==null;)v=u,r=p,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=r,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,r=S.dependencies,v.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return nt(ut,ut.current&1|2),o.child}r=r.sibling}v.tail!==null&&gt()>mr&&(o.flags|=128,p=!0,Mo(v,!1),o.lanes=4194304)}else{if(!p)if(r=gl(S),r!==null){if(o.flags|=128,p=!0,u=r.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Mo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ct)return Rt(o),null}else 2*gt()-v.renderingStartTime>mr&&u!==1073741824&&(o.flags|=128,p=!0,Mo(v,!1),o.lanes=4194304);v.isBackwards?(S.sibling=o.child,o.child=S):(u=v.last,u!==null?u.sibling=S:o.child=S,v.last=S)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=gt(),o.sibling=null,u=ut.current,nt(ut,p?u&1|2:u&1),o):(Rt(o),null);case 22:case 23:return rh(),p=o.memoizedState!==null,r!==null&&r.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(dn&1073741824)!==0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function pw(r,o){switch(pd(o),o.tag){case 1:return Qt(o.type)&&rl(),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return dr(),rt(Yt),rt(Ot),kd(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 5:return Id(o),null;case 13:if(rt(ut),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ar()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return rt(ut),null;case 4:return dr(),null;case 10:return bd(o.type._context),null;case 22:case 23:return rh(),null;case 24:return null;default:return null}}var Il=!1,At=!1,mw=typeof WeakSet=="function"?WeakSet:Set,re=null;function fr(r,o){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){pt(r,o,p)}else u.current=null}function Yd(r,o,u){try{u()}catch(p){pt(r,o,p)}}var Pg=!1;function gw(r,o){if(rd=Wa,r=ym(),Xu(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,E=-1,j=-1,z=0,Z=0,ee=r,J=null;t:for(;;){for(var ie;ee!==u||g!==0&&ee.nodeType!==3||(E=S+g),ee!==v||p!==0&&ee.nodeType!==3||(j=S+p),ee.nodeType===3&&(S+=ee.nodeValue.length),(ie=ee.firstChild)!==null;)J=ee,ee=ie;for(;;){if(ee===r)break t;if(J===u&&++z===g&&(E=S),J===v&&++Z===p&&(j=S),(ie=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=ie}u=E===-1||j===-1?null:{start:E,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(od={focusedElem:r,selectionRange:u},Wa=!1,re=o;re!==null;)if(o=re,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,re=r;else for(;re!==null;){o=re;try{var oe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,yt=oe.memoizedState,A=o.stateNode,C=A.getSnapshotBeforeUpdate(o.elementType===o.type?ae:An(o.type,ae),yt);A.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){pt(o,o.return,te)}if(r=o.sibling,r!==null){r.return=o.return,re=r;break}re=o.return}return oe=Pg,Pg=!1,oe}function Co(r,o,u){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&r)===r){var v=g.destroy;g.destroy=void 0,v!==void 0&&Yd(o,u,v)}g=g.next}while(g!==p)}}function El(r,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&r)===r){var p=u.create;u.destroy=p()}u=u.next}while(u!==o)}}function Qd(r){var o=r.ref;if(o!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof o=="function"?o(r):o.current=r}}function Ug(r){var o=r.alternate;o!==null&&(r.alternate=null,Ug(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&(delete o[Wn],delete o[bo],delete o[ud],delete o[J_],delete o[Z_])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function zg(r){return r.tag===5||r.tag===3||r.tag===4}function $g(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Kd(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(r,o):u.insertBefore(r,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(r,u)):(o=u,o.appendChild(r)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=sl));else if(p!==4&&(r=r.child,r!==null))for(Kd(r,o,u),r=r.sibling;r!==null;)Kd(r,o,u),r=r.sibling}function Gd(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(p!==4&&(r=r.child,r!==null))for(Gd(r,o,u),r=r.sibling;r!==null;)Gd(r,o,u),r=r.sibling}var Mt=null,Ln=!1;function Ys(r,o,u){for(u=u.child;u!==null;)Hg(r,o,u),u=u.sibling}function Hg(r,o,u){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(Pa,u)}catch{}switch(u.tag){case 5:At||fr(u,o);case 6:var p=Mt,g=Ln;Mt=null,Ys(r,o,u),Mt=p,Ln=g,Mt!==null&&(Ln?(r=Mt,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):Mt.removeChild(u.stateNode));break;case 18:Mt!==null&&(Ln?(r=Mt,u=u.stateNode,r.nodeType===8?cd(r.parentNode,u):r.nodeType===1&&cd(r,u),lo(r)):cd(Mt,u.stateNode));break;case 4:p=Mt,g=Ln,Mt=u.stateNode.containerInfo,Ln=!0,Ys(r,o,u),Mt=p,Ln=g;break;case 0:case 11:case 14:case 15:if(!At&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Yd(u,o,S),g=g.next}while(g!==p)}Ys(r,o,u);break;case 1:if(!At&&(fr(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(E){pt(u,o,E)}Ys(r,o,u);break;case 21:Ys(r,o,u);break;case 22:u.mode&1?(At=(p=At)||u.memoizedState!==null,Ys(r,o,u),At=p):Ys(r,o,u);break;default:Ys(r,o,u)}}function Vg(r){var o=r.updateQueue;if(o!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new mw),o.forEach(function(p){var g=Iw.bind(null,r,p);u.has(p)||(u.add(p),p.then(g,g))})}}function Bn(r,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var v=r,S=o,E=S;e:for(;E!==null;){switch(E.tag){case 5:Mt=E.stateNode,Ln=!1;break e;case 3:Mt=E.stateNode.containerInfo,Ln=!0;break e;case 4:Mt=E.stateNode.containerInfo,Ln=!0;break e}E=E.return}if(Mt===null)throw Error(t(160));Hg(v,S,g),Mt=null,Ln=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(z){pt(g,o,z)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Wg(o,r),o=o.sibling}function Wg(r,o){var u=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Bn(o,r),Qn(r),p&4){try{Co(3,r,r.return),El(3,r)}catch(ae){pt(r,r.return,ae)}try{Co(5,r,r.return)}catch(ae){pt(r,r.return,ae)}}break;case 1:Bn(o,r),Qn(r),p&512&&u!==null&&fr(u,u.return);break;case 5:if(Bn(o,r),Qn(r),p&512&&u!==null&&fr(u,u.return),r.flags&32){var g=r.stateNode;try{Xr(g,"")}catch(ae){pt(r,r.return,ae)}}if(p&4&&(g=r.stateNode,g!=null)){var v=r.memoizedProps,S=u!==null?u.memoizedProps:v,E=r.type,j=r.updateQueue;if(r.updateQueue=null,j!==null)try{E==="input"&&v.type==="radio"&&v.name!=null&&vp(g,v),ku(E,S);var z=ku(E,v);for(S=0;S<j.length;S+=2){var Z=j[S],ee=j[S+1];Z==="style"?kp(g,ee):Z==="dangerouslySetInnerHTML"?Ip(g,ee):Z==="children"?Xr(g,ee):D(g,Z,ee,z)}switch(E){case"input":wu(g,v);break;case"textarea":wp(g,v);break;case"select":var J=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var ie=v.value;ie!=null?qi(g,!!v.multiple,ie,!1):J!==!!v.multiple&&(v.defaultValue!=null?qi(g,!!v.multiple,v.defaultValue,!0):qi(g,!!v.multiple,v.multiple?[]:"",!1))}g[bo]=v}catch(ae){pt(r,r.return,ae)}}break;case 6:if(Bn(o,r),Qn(r),p&4){if(r.stateNode===null)throw Error(t(162));g=r.stateNode,v=r.memoizedProps;try{g.nodeValue=v}catch(ae){pt(r,r.return,ae)}}break;case 3:if(Bn(o,r),Qn(r),p&4&&u!==null&&u.memoizedState.isDehydrated)try{lo(o.containerInfo)}catch(ae){pt(r,r.return,ae)}break;case 4:Bn(o,r),Qn(r);break;case 13:Bn(o,r),Qn(r),g=r.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Zd=gt())),p&4&&Vg(r);break;case 22:if(Z=u!==null&&u.memoizedState!==null,r.mode&1?(At=(z=At)||Z,Bn(o,r),At=z):Bn(o,r),Qn(r),p&8192){if(z=r.memoizedState!==null,(r.stateNode.isHidden=z)&&!Z&&(r.mode&1)!==0)for(re=r,Z=r.child;Z!==null;){for(ee=re=Z;re!==null;){switch(J=re,ie=J.child,J.tag){case 0:case 11:case 14:case 15:Co(4,J,J.return);break;case 1:fr(J,J.return);var oe=J.stateNode;if(typeof oe.componentWillUnmount=="function"){p=J,u=J.return;try{o=p,oe.props=o.memoizedProps,oe.state=o.memoizedState,oe.componentWillUnmount()}catch(ae){pt(p,u,ae)}}break;case 5:fr(J,J.return);break;case 22:if(J.memoizedState!==null){Qg(ee);continue}}ie!==null?(ie.return=J,re=ie):Qg(ee)}Z=Z.sibling}e:for(Z=null,ee=r;;){if(ee.tag===5){if(Z===null){Z=ee;try{g=ee.stateNode,z?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(E=ee.stateNode,j=ee.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,E.style.display=Ep("display",S))}catch(ae){pt(r,r.return,ae)}}}else if(ee.tag===6){if(Z===null)try{ee.stateNode.nodeValue=z?"":ee.memoizedProps}catch(ae){pt(r,r.return,ae)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;Z===ee&&(Z=null),ee=ee.return}Z===ee&&(Z=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Bn(o,r),Qn(r),p&4&&Vg(r);break;case 21:break;default:Bn(o,r),Qn(r)}}function Qn(r){var o=r.flags;if(o&2){try{e:{for(var u=r.return;u!==null;){if(zg(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Xr(g,""),p.flags&=-33);var v=$g(r);Gd(r,v,g);break;case 3:case 4:var S=p.stateNode.containerInfo,E=$g(r);Kd(r,E,S);break;default:throw Error(t(161))}}catch(j){pt(r,r.return,j)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function yw(r,o,u){re=r,qg(r)}function qg(r,o,u){for(var p=(r.mode&1)!==0;re!==null;){var g=re,v=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||Il;if(!S){var E=g.alternate,j=E!==null&&E.memoizedState!==null||At;E=Il;var z=At;if(Il=S,(At=j)&&!z)for(re=g;re!==null;)S=re,j=S.child,S.tag===22&&S.memoizedState!==null?Kg(g):j!==null?(j.return=S,re=j):Kg(g);for(;v!==null;)re=v,qg(v),v=v.sibling;re=g,Il=E,At=z}Yg(r)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,re=v):Yg(r)}}function Yg(r){for(;re!==null;){var o=re;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:At||El(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!At)if(u===null)p.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:An(o.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&Qm(o,v,p);break;case 3:var S=o.updateQueue;if(S!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Qm(o,S,u)}break;case 5:var E=o.stateNode;if(u===null&&o.flags&4){u=E;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var z=o.alternate;if(z!==null){var Z=z.memoizedState;if(Z!==null){var ee=Z.dehydrated;ee!==null&&lo(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}At||o.flags&512&&Qd(o)}catch(J){pt(o,o.return,J)}}if(o===r){re=null;break}if(u=o.sibling,u!==null){u.return=o.return,re=u;break}re=o.return}}function Qg(r){for(;re!==null;){var o=re;if(o===r){re=null;break}var u=o.sibling;if(u!==null){u.return=o.return,re=u;break}re=o.return}}function Kg(r){for(;re!==null;){var o=re;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{El(4,o)}catch(j){pt(o,u,j)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var g=o.return;try{p.componentDidMount()}catch(j){pt(o,g,j)}}var v=o.return;try{Qd(o)}catch(j){pt(o,v,j)}break;case 5:var S=o.return;try{Qd(o)}catch(j){pt(o,S,j)}}}catch(j){pt(o,o.return,j)}if(o===r){re=null;break}var E=o.sibling;if(E!==null){E.return=o.return,re=E;break}re=o.return}}var xw=Math.ceil,kl=L.ReactCurrentDispatcher,Xd=L.ReactCurrentOwner,vn=L.ReactCurrentBatchConfig,Be=0,Tt=null,bt=null,Ct=0,dn=0,pr=$s(0),wt=0,Oo=null,Ii=0,Tl=0,Jd=0,Do=null,Gt=null,Zd=0,mr=1/0,ys=null,jl=!1,eh=null,Qs=null,Ml=!1,Ks=null,Cl=0,Ro=0,th=null,Ol=-1,Dl=0;function $t(){return(Be&6)!==0?gt():Ol!==-1?Ol:Ol=gt()}function Gs(r){return(r.mode&1)===0?1:(Be&2)!==0&&Ct!==0?Ct&-Ct:tw.transition!==null?(Dl===0&&(Dl=$p()),Dl):(r=Qe,r!==0||(r=window.event,r=r===void 0?16:Xp(r.type)),r)}function Fn(r,o,u,p){if(50<Ro)throw Ro=0,th=null,Error(t(185));so(r,u,p),((Be&2)===0||r!==Tt)&&(r===Tt&&((Be&2)===0&&(Tl|=u),wt===4&&Xs(r,Ct)),Xt(r,p),u===1&&Be===0&&(o.mode&1)===0&&(mr=gt()+500,al&&Vs()))}function Xt(r,o){var u=r.callbackNode;t_(r,o);var p=$a(r,r===Tt?Ct:0);if(p===0)u!==null&&Pp(u),r.callbackNode=null,r.callbackPriority=0;else if(o=p&-p,r.callbackPriority!==o){if(u!=null&&Pp(u),o===1)r.tag===0?ew(Xg.bind(null,r)):Lm(Xg.bind(null,r)),G_(function(){(Be&6)===0&&Vs()}),u=null;else{switch(Hp(p)){case 1:u=Ru;break;case 4:u=Up;break;case 16:u=Fa;break;case 536870912:u=zp;break;default:u=Fa}u=r0(u,Gg.bind(null,r))}r.callbackPriority=o,r.callbackNode=u}}function Gg(r,o){if(Ol=-1,Dl=0,(Be&6)!==0)throw Error(t(327));var u=r.callbackNode;if(gr()&&r.callbackNode!==u)return null;var p=$a(r,r===Tt?Ct:0);if(p===0)return null;if((p&30)!==0||(p&r.expiredLanes)!==0||o)o=Rl(r,p);else{o=p;var g=Be;Be|=2;var v=Zg();(Tt!==r||Ct!==o)&&(ys=null,mr=gt()+500,ki(r,o));do try{_w();break}catch(E){Jg(r,E)}while(!0);vd(),kl.current=v,Be=g,bt!==null?o=0:(Tt=null,Ct=0,o=wt)}if(o!==0){if(o===2&&(g=Au(r),g!==0&&(p=g,o=nh(r,g))),o===1)throw u=Oo,ki(r,0),Xs(r,p),Xt(r,gt()),u;if(o===6)Xs(r,p);else{if(g=r.current.alternate,(p&30)===0&&!vw(g)&&(o=Rl(r,p),o===2&&(v=Au(r),v!==0&&(p=v,o=nh(r,v))),o===1))throw u=Oo,ki(r,0),Xs(r,p),Xt(r,gt()),u;switch(r.finishedWork=g,r.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:Ti(r,Gt,ys);break;case 3:if(Xs(r,p),(p&130023424)===p&&(o=Zd+500-gt(),10<o)){if($a(r,0)!==0)break;if(g=r.suspendedLanes,(g&p)!==p){$t(),r.pingedLanes|=r.suspendedLanes&g;break}r.timeoutHandle=ld(Ti.bind(null,r,Gt,ys),o);break}Ti(r,Gt,ys);break;case 4:if(Xs(r,p),(p&4194240)===p)break;for(o=r.eventTimes,g=-1;0<p;){var S=31-On(p);v=1<<S,S=o[S],S>g&&(g=S),p&=~v}if(p=g,p=gt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*xw(p/1960))-p,10<p){r.timeoutHandle=ld(Ti.bind(null,r,Gt,ys),p);break}Ti(r,Gt,ys);break;case 5:Ti(r,Gt,ys);break;default:throw Error(t(329))}}}return Xt(r,gt()),r.callbackNode===u?Gg.bind(null,r):null}function nh(r,o){var u=Do;return r.current.memoizedState.isDehydrated&&(ki(r,o).flags|=256),r=Rl(r,o),r!==2&&(o=Gt,Gt=u,o!==null&&sh(o)),r}function sh(r){Gt===null?Gt=r:Gt.push.apply(Gt,r)}function vw(r){for(var o=r;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],v=g.getSnapshot;g=g.value;try{if(!Dn(v(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xs(r,o){for(o&=~Jd,o&=~Tl,r.suspendedLanes|=o,r.pingedLanes&=~o,r=r.expirationTimes;0<o;){var u=31-On(o),p=1<<u;r[u]=-1,o&=~p}}function Xg(r){if((Be&6)!==0)throw Error(t(327));gr();var o=$a(r,0);if((o&1)===0)return Xt(r,gt()),null;var u=Rl(r,o);if(r.tag!==0&&u===2){var p=Au(r);p!==0&&(o=p,u=nh(r,p))}if(u===1)throw u=Oo,ki(r,0),Xs(r,o),Xt(r,gt()),u;if(u===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=o,Ti(r,Gt,ys),Xt(r,gt()),null}function ih(r,o){var u=Be;Be|=1;try{return r(o)}finally{Be=u,Be===0&&(mr=gt()+500,al&&Vs())}}function Ei(r){Ks!==null&&Ks.tag===0&&(Be&6)===0&&gr();var o=Be;Be|=1;var u=vn.transition,p=Qe;try{if(vn.transition=null,Qe=1,r)return r()}finally{Qe=p,vn.transition=u,Be=o,(Be&6)===0&&Vs()}}function rh(){dn=pr.current,rt(pr)}function ki(r,o){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,K_(u)),bt!==null)for(u=bt.return;u!==null;){var p=u;switch(pd(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&rl();break;case 3:dr(),rt(Yt),rt(Ot),kd();break;case 5:Id(p);break;case 4:dr();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:bd(p.type._context);break;case 22:case 23:rh()}u=u.return}if(Tt=r,bt=r=Js(r.current,null),Ct=dn=o,wt=0,Oo=null,Jd=Tl=Ii=0,Gt=Do=null,wi!==null){for(o=0;o<wi.length;o++)if(u=wi[o],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,p.next=S}u.pending=p}wi=null}return r}function Jg(r,o){do{var u=bt;try{if(vd(),yl.current=_l,xl){for(var p=dt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}xl=!1}if(Ni=0,kt=_t=dt=null,Eo=!1,ko=0,Xd.current=null,u===null||u.return===null){wt=1,Oo=o,bt=null;break}e:{var v=r,S=u.return,E=u,j=o;if(o=Ct,E.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var z=j,Z=E,ee=Z.tag;if((Z.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ie=Sg(S);if(ie!==null){ie.flags&=-257,Ng(ie,S,E,v,o),ie.mode&1&&wg(v,z,o),o=ie,j=z;var oe=o.updateQueue;if(oe===null){var ae=new Set;ae.add(j),o.updateQueue=ae}else oe.add(j);break e}else{if((o&1)===0){wg(v,z,o),oh();break e}j=Error(t(426))}}else if(ct&&E.mode&1){var yt=Sg(S);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),Ng(yt,S,E,v,o),yd(hr(j,E));break e}}v=j=hr(j,E),wt!==4&&(wt=2),Do===null?Do=[v]:Do.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var A=bg(v,j,o);Ym(v,A);break e;case 1:E=j;var C=v.type,F=v.stateNode;if((v.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Qs===null||!Qs.has(F)))){v.flags|=65536,o&=-o,v.lanes|=o;var te=_g(v,E,o);Ym(v,te);break e}}v=v.return}while(v!==null)}t0(u)}catch(le){o=le,bt===u&&u!==null&&(bt=u=u.return);continue}break}while(!0)}function Zg(){var r=kl.current;return kl.current=_l,r===null?_l:r}function oh(){(wt===0||wt===3||wt===2)&&(wt=4),Tt===null||(Ii&268435455)===0&&(Tl&268435455)===0||Xs(Tt,Ct)}function Rl(r,o){var u=Be;Be|=2;var p=Zg();(Tt!==r||Ct!==o)&&(ys=null,ki(r,o));do try{bw();break}catch(g){Jg(r,g)}while(!0);if(vd(),Be=u,kl.current=p,bt!==null)throw Error(t(261));return Tt=null,Ct=0,wt}function bw(){for(;bt!==null;)e0(bt)}function _w(){for(;bt!==null&&!q1();)e0(bt)}function e0(r){var o=i0(r.alternate,r,dn);r.memoizedProps=r.pendingProps,o===null?t0(r):bt=o,Xd.current=null}function t0(r){var o=r;do{var u=o.alternate;if(r=o.return,(o.flags&32768)===0){if(u=fw(u,o,dn),u!==null){bt=u;return}}else{if(u=pw(u,o),u!==null){u.flags&=32767,bt=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,bt=null;return}}if(o=o.sibling,o!==null){bt=o;return}bt=o=r}while(o!==null);wt===0&&(wt=5)}function Ti(r,o,u){var p=Qe,g=vn.transition;try{vn.transition=null,Qe=1,ww(r,o,u,p)}finally{vn.transition=g,Qe=p}return null}function ww(r,o,u,p){do gr();while(Ks!==null);if((Be&6)!==0)throw Error(t(327));u=r.finishedWork;var g=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var v=u.lanes|u.childLanes;if(n_(r,v),r===Tt&&(bt=Tt=null,Ct=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ml||(Ml=!0,r0(Fa,function(){return gr(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=vn.transition,vn.transition=null;var S=Qe;Qe=1;var E=Be;Be|=4,Xd.current=null,gw(r,u),Wg(u,r),$_(od),Wa=!!rd,od=rd=null,r.current=u,yw(u),Y1(),Be=E,Qe=S,vn.transition=v}else r.current=u;if(Ml&&(Ml=!1,Ks=r,Cl=g),v=r.pendingLanes,v===0&&(Qs=null),G1(u.stateNode),Xt(r,gt()),o!==null)for(p=r.onRecoverableError,u=0;u<o.length;u++)g=o[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(jl)throw jl=!1,r=eh,eh=null,r;return(Cl&1)!==0&&r.tag!==0&&gr(),v=r.pendingLanes,(v&1)!==0?r===th?Ro++:(Ro=0,th=r):Ro=0,Vs(),null}function gr(){if(Ks!==null){var r=Hp(Cl),o=vn.transition,u=Qe;try{if(vn.transition=null,Qe=16>r?16:r,Ks===null)var p=!1;else{if(r=Ks,Ks=null,Cl=0,(Be&6)!==0)throw Error(t(331));var g=Be;for(Be|=4,re=r.current;re!==null;){var v=re,S=v.child;if((re.flags&16)!==0){var E=v.deletions;if(E!==null){for(var j=0;j<E.length;j++){var z=E[j];for(re=z;re!==null;){var Z=re;switch(Z.tag){case 0:case 11:case 15:Co(8,Z,v)}var ee=Z.child;if(ee!==null)ee.return=Z,re=ee;else for(;re!==null;){Z=re;var J=Z.sibling,ie=Z.return;if(Ug(Z),Z===z){re=null;break}if(J!==null){J.return=ie,re=J;break}re=ie}}}var oe=v.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var yt=ae.sibling;ae.sibling=null,ae=yt}while(ae!==null)}}re=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,re=S;else e:for(;re!==null;){if(v=re,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Co(9,v,v.return)}var A=v.sibling;if(A!==null){A.return=v.return,re=A;break e}re=v.return}}var C=r.current;for(re=C;re!==null;){S=re;var F=S.child;if((S.subtreeFlags&2064)!==0&&F!==null)F.return=S,re=F;else e:for(S=C;re!==null;){if(E=re,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:El(9,E)}}catch(le){pt(E,E.return,le)}if(E===S){re=null;break e}var te=E.sibling;if(te!==null){te.return=E.return,re=te;break e}re=E.return}}if(Be=g,Vs(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(Pa,r)}catch{}p=!0}return p}finally{Qe=u,vn.transition=o}}return!1}function n0(r,o,u){o=hr(u,o),o=bg(r,o,1),r=qs(r,o,1),o=$t(),r!==null&&(so(r,1,o),Xt(r,o))}function pt(r,o,u){if(r.tag===3)n0(r,r,u);else for(;o!==null;){if(o.tag===3){n0(o,r,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Qs===null||!Qs.has(p))){r=hr(u,r),r=_g(o,r,1),o=qs(o,r,1),r=$t(),o!==null&&(so(o,1,r),Xt(o,r));break}}o=o.return}}function Sw(r,o,u){var p=r.pingCache;p!==null&&p.delete(o),o=$t(),r.pingedLanes|=r.suspendedLanes&u,Tt===r&&(Ct&u)===u&&(wt===4||wt===3&&(Ct&130023424)===Ct&&500>gt()-Zd?ki(r,0):Jd|=u),Xt(r,o)}function s0(r,o){o===0&&((r.mode&1)===0?o=1:(o=za,za<<=1,(za&130023424)===0&&(za=4194304)));var u=$t();r=ps(r,o),r!==null&&(so(r,o,u),Xt(r,u))}function Nw(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),s0(r,u)}function Iw(r,o){var u=0;switch(r.tag){case 13:var p=r.stateNode,g=r.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=r.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),s0(r,u)}var i0;i0=function(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps||Yt.current)Kt=!0;else{if((r.lanes&u)===0&&(o.flags&128)===0)return Kt=!1,hw(r,o,u);Kt=(r.flags&131072)!==0}else Kt=!1,ct&&(o.flags&1048576)!==0&&Bm(o,cl,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;Nl(r,o),r=o.pendingProps;var g=ir(o,Ot.current);ur(o,u),g=Md(null,o,p,r,g,u);var v=Cd();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Qt(p)?(v=!0,ol(o)):v=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Sd(o),g.updater=wl,o.stateNode=g,g._reactInternals=o,Bd(o,p,r,u),o=zd(null,o,p,!0,v,u)):(o.tag=0,ct&&v&&fd(o),zt(null,o,g,u),o=o.child),o;case 16:p=o.elementType;e:{switch(Nl(r,o),r=o.pendingProps,g=p._init,p=g(p._payload),o.type=p,g=o.tag=kw(p),r=An(p,r),g){case 0:o=Ud(null,o,p,r,u);break e;case 1:o=Mg(null,o,p,r,u);break e;case 11:o=Ig(null,o,p,r,u);break e;case 14:o=Eg(null,o,p,An(p.type,r),u);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:An(p,g),Ud(r,o,p,g,u);case 1:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:An(p,g),Mg(r,o,p,g,u);case 3:e:{if(Cg(o),r===null)throw Error(t(387));p=o.pendingProps,v=o.memoizedState,g=v.element,qm(r,o),ml(o,p,null,u);var S=o.memoizedState;if(p=S.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){g=hr(Error(t(423)),o),o=Og(r,o,p,u,g);break e}else if(p!==g){g=hr(Error(t(424)),o),o=Og(r,o,p,u,g);break e}else for(un=zs(o.stateNode.containerInfo.firstChild),cn=o,ct=!0,Rn=null,u=Vm(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ar(),p===g){o=gs(r,o,u);break e}zt(r,o,p,u)}o=o.child}return o;case 5:return Km(o),r===null&&gd(o),p=o.type,g=o.pendingProps,v=r!==null?r.memoizedProps:null,S=g.children,ad(p,g)?S=null:v!==null&&ad(p,v)&&(o.flags|=32),jg(r,o),zt(r,o,S,u),o.child;case 6:return r===null&&gd(o),null;case 13:return Dg(r,o,u);case 4:return Nd(o,o.stateNode.containerInfo),p=o.pendingProps,r===null?o.child=lr(o,null,p,u):zt(r,o,p,u),o.child;case 11:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:An(p,g),Ig(r,o,p,g,u);case 7:return zt(r,o,o.pendingProps,u),o.child;case 8:return zt(r,o,o.pendingProps.children,u),o.child;case 12:return zt(r,o,o.pendingProps.children,u),o.child;case 10:e:{if(p=o.type._context,g=o.pendingProps,v=o.memoizedProps,S=g.value,nt(hl,p._currentValue),p._currentValue=S,v!==null)if(Dn(v.value,S)){if(v.children===g.children&&!Yt.current){o=gs(r,o,u);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var E=v.dependencies;if(E!==null){S=v.child;for(var j=E.firstContext;j!==null;){if(j.context===p){if(v.tag===1){j=ms(-1,u&-u),j.tag=2;var z=v.updateQueue;if(z!==null){z=z.shared;var Z=z.pending;Z===null?j.next=j:(j.next=Z.next,Z.next=j),z.pending=j}}v.lanes|=u,j=v.alternate,j!==null&&(j.lanes|=u),_d(v.return,u,o),E.lanes|=u;break}j=j.next}}else if(v.tag===10)S=v.type===o.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,E=S.alternate,E!==null&&(E.lanes|=u),_d(S,u,o),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===o){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}zt(r,o,g.children,u),o=o.child}return o;case 9:return g=o.type,p=o.pendingProps.children,ur(o,u),g=yn(g),p=p(g),o.flags|=1,zt(r,o,p,u),o.child;case 14:return p=o.type,g=An(p,o.pendingProps),g=An(p.type,g),Eg(r,o,p,g,u);case 15:return kg(r,o,o.type,o.pendingProps,u);case 17:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:An(p,g),Nl(r,o),o.tag=1,Qt(p)?(r=!0,ol(o)):r=!1,ur(o,u),xg(o,p,g),Bd(o,p,g,u),zd(null,o,p,!0,r,u);case 19:return Ag(r,o,u);case 22:return Tg(r,o,u)}throw Error(t(156,o.tag))};function r0(r,o){return Fp(r,o)}function Ew(r,o,u,p){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(r,o,u,p){return new Ew(r,o,u,p)}function ah(r){return r=r.prototype,!(!r||!r.isReactComponent)}function kw(r){if(typeof r=="function")return ah(r)?1:0;if(r!=null){if(r=r.$$typeof,r===$)return 11;if(r===U)return 14}return 2}function Js(r,o){var u=r.alternate;return u===null?(u=bn(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function Al(r,o,u,p,g,v){var S=2;if(p=r,typeof r=="function")ah(r)&&(S=1);else if(typeof r=="string")S=5;else e:switch(r){case R:return ji(u.children,g,v,o);case Q:S=8,g|=8;break;case P:return r=bn(12,u,o,g|2),r.elementType=P,r.lanes=v,r;case W:return r=bn(13,u,o,g),r.elementType=W,r.lanes=v,r;case de:return r=bn(19,u,o,g),r.elementType=de,r.lanes=v,r;case q:return Ll(u,g,v,o);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:S=10;break e;case H:S=9;break e;case $:S=11;break e;case U:S=14;break e;case Y:S=16,p=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return o=bn(S,u,o,g),o.elementType=r,o.type=p,o.lanes=v,o}function ji(r,o,u,p){return r=bn(7,r,p,o),r.lanes=u,r}function Ll(r,o,u,p){return r=bn(22,r,p,o),r.elementType=q,r.lanes=u,r.stateNode={isHidden:!1},r}function lh(r,o,u){return r=bn(6,r,null,o),r.lanes=u,r}function ch(r,o,u){return o=bn(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}function Tw(r,o,u,p,g){this.tag=o,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lu(0),this.expirationTimes=Lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lu(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function uh(r,o,u,p,g,v,S,E,j){return r=new Tw(r,o,u,E,j),o===1?(o=1,v===!0&&(o|=8)):o=0,v=bn(3,null,null,o),r.current=v,v.stateNode=r,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(v),r}function jw(r,o,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:p==null?null:""+p,children:r,containerInfo:o,implementation:u}}function o0(r){if(!r)return Hs;r=r._reactInternals;e:{if(yi(r)!==r||r.tag!==1)throw Error(t(170));var o=r;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Qt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(r.tag===1){var u=r.type;if(Qt(u))return Rm(r,u,o)}return o}function a0(r,o,u,p,g,v,S,E,j){return r=uh(u,p,!0,r,g,v,S,E,j),r.context=o0(null),u=r.current,p=$t(),g=Gs(u),v=ms(p,g),v.callback=o??null,qs(u,v,g),r.current.lanes=g,so(r,g,p),Xt(r,p),r}function Bl(r,o,u,p){var g=o.current,v=$t(),S=Gs(g);return u=o0(u),o.context===null?o.context=u:o.pendingContext=u,o=ms(v,S),o.payload={element:r},p=p===void 0?null:p,p!==null&&(o.callback=p),r=qs(g,o,S),r!==null&&(Fn(r,g,S,v),pl(r,g,S)),S}function Fl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function l0(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function dh(r,o){l0(r,o),(r=r.alternate)&&l0(r,o)}function Mw(){return null}var c0=typeof reportError=="function"?reportError:function(r){console.error(r)};function hh(r){this._internalRoot=r}Pl.prototype.render=hh.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(t(409));Bl(r,o,null,null)},Pl.prototype.unmount=hh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Ei(function(){Bl(null,r,null,null)}),o[us]=null}};function Pl(r){this._internalRoot=r}Pl.prototype.unstable_scheduleHydration=function(r){if(r){var o=qp();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Fs.length&&o!==0&&o<Fs[u].priority;u++);Fs.splice(u,0,r),u===0&&Kp(r)}};function fh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ul(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function u0(){}function Cw(r,o,u,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var z=Fl(S);v.call(z)}}var S=a0(o,p,r,0,null,!1,!1,"",u0);return r._reactRootContainer=S,r[us]=S.current,xo(r.nodeType===8?r.parentNode:r),Ei(),S}for(;g=r.lastChild;)r.removeChild(g);if(typeof p=="function"){var E=p;p=function(){var z=Fl(j);E.call(z)}}var j=uh(r,0,!1,null,null,!1,!1,"",u0);return r._reactRootContainer=j,r[us]=j.current,xo(r.nodeType===8?r.parentNode:r),Ei(function(){Bl(o,j,u,p)}),j}function zl(r,o,u,p,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var E=g;g=function(){var j=Fl(S);E.call(j)}}Bl(o,S,r,g)}else S=Cw(u,o,r,g,p);return Fl(S)}Vp=function(r){switch(r.tag){case 3:var o=r.stateNode;if(o.current.memoizedState.isDehydrated){var u=no(o.pendingLanes);u!==0&&(Bu(o,u|1),Xt(o,gt()),(Be&6)===0&&(mr=gt()+500,Vs()))}break;case 13:Ei(function(){var p=ps(r,1);if(p!==null){var g=$t();Fn(p,r,1,g)}}),dh(r,1)}},Fu=function(r){if(r.tag===13){var o=ps(r,134217728);if(o!==null){var u=$t();Fn(o,r,134217728,u)}dh(r,134217728)}},Wp=function(r){if(r.tag===13){var o=Gs(r),u=ps(r,o);if(u!==null){var p=$t();Fn(u,r,o,p)}dh(r,o)}},qp=function(){return Qe},Yp=function(r,o){var u=Qe;try{return Qe=r,o()}finally{Qe=u}},Mu=function(r,o,u){switch(o){case"input":if(wu(r,u),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==r&&p.form===r.form){var g=il(p);if(!g)throw Error(t(90));yp(p),wu(p,g)}}}break;case"textarea":wp(r,u);break;case"select":o=u.value,o!=null&&qi(r,!!u.multiple,o,!1)}},Cp=ih,Op=Ei;var Ow={usingClientEntryPoint:!1,Events:[_o,nr,il,jp,Mp,ih]},Ao={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dw={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Lp(r),r===null?null:r.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||Mw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Pa=$l.inject(Dw),Vn=$l}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ow,Jt.createPortal=function(r,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fh(o))throw Error(t(200));return jw(r,o,null,u)},Jt.createRoot=function(r,o){if(!fh(r))throw Error(t(299));var u=!1,p="",g=c0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=uh(r,1,!1,null,null,u,!1,p,g),r[us]=o.current,xo(r.nodeType===8?r.parentNode:r),new hh(o)},Jt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Lp(o),r=r===null?null:r.stateNode,r},Jt.flushSync=function(r){return Ei(r)},Jt.hydrate=function(r,o,u){if(!Ul(o))throw Error(t(200));return zl(null,r,o,!0,u)},Jt.hydrateRoot=function(r,o,u){if(!fh(r))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,v="",S=c0;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),o=a0(o,null,r,1,u??null,g,!1,v,S),r[us]=o.current,xo(r),p)for(r=0;r<p.length;r++)u=p[r],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new Pl(o)},Jt.render=function(r,o,u){if(!Ul(o))throw Error(t(200));return zl(null,r,o,!1,u)},Jt.unmountComponentAtNode=function(r){if(!Ul(r))throw Error(t(40));return r._reactRootContainer?(Ei(function(){zl(null,null,r,!1,function(){r._reactRootContainer=null,r[us]=null})}),!0):!1},Jt.unstable_batchedUpdates=ih,Jt.unstable_renderSubtreeIntoContainer=function(r,o,u,p){if(!Ul(u))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return zl(r,o,u,!1,p)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var x0;function zw(){if(x0)return gh.exports;x0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gh.exports=Uw(),gh.exports}var v0;function $w(){if(v0)return Hl;v0=1;var n=zw();return Hl.createRoot=n.createRoot,Hl.hydrateRoot=n.hydrateRoot,Hl}var Hw=$w();const Vw=lu(Hw);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ww={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$e=(n,e)=>{const t=ce.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:d,...f},m)=>ce.createElement("svg",{ref:m,...Ww,width:i,height:i,stroke:s,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${qw(n)}`,c].join(" "),...f},[...e.map(([y,x])=>ce.createElement(y,x)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=$e("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=$e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=$e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=$e("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=$e("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=$e("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=$e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=$e("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=$e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=$e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=$e("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=$e("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=$e("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=$e("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=$e("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=$e("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=$e("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),aS={},N0=n=>{let e;const t=new Set,s=(m,y)=>{const x=typeof m=="function"?m(e):m;if(!Object.is(x,e)){const b=e;e=y??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(_=>_(e,b))}},i=()=>e,d={setState:s,getState:i,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(aS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},f=e=n(s,i,d);return d},lS=n=>n?N0(n):N0;var vh={exports:{}},bh={},_h={exports:{}},wh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function cS(){if(I0)return wh;I0=1;var n=Ea();function e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function c(y,x){var b=x(),_=s({inst:{value:b,getSnapshot:x}}),w=_[0].inst,N=_[1];return a(function(){w.value=b,w.getSnapshot=x,d(w)&&N({inst:w})},[y,b,x]),i(function(){return d(w)&&N({inst:w}),y(function(){d(w)&&N({inst:w})})},[y]),l(b),b}function d(y){var x=y.getSnapshot;y=y.value;try{var b=x();return!t(y,b)}catch{return!0}}function f(y,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return wh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,wh}var E0;function uS(){return E0||(E0=1,_h.exports=cS()),_h.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function dS(){if(k0)return bh;k0=1;var n=Ea(),e=uS();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var s=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return bh.useSyncExternalStoreWithSelector=function(f,m,y,x,b){var _=a(null);if(_.current===null){var w={hasValue:!1,value:null};_.current=w}else w=_.current;_=c(function(){function I(B){if(!k){if(k=!0,D=B,B=x(B),b!==void 0&&w.hasValue){var R=w.value;if(b(R,B))return L=R}return L=B}if(R=L,s(D,B))return R;var Q=x(B);return b!==void 0&&b(R,Q)?(D=B,R):(D=B,L=Q)}var k=!1,D,L,M=y===void 0?null:y;return[function(){return I(m())},M===null?void 0:function(){return I(M())}]},[m,y,x,b]);var N=i(f,_[0],_[1]);return l(function(){w.hasValue=!0,w.value=N},[N]),d(N),N},bh}var T0;function hS(){return T0||(T0=1,vh.exports=dS()),vh.exports}var fS=hS();const pS=lu(fS),Rx={},{useDebugValue:mS}=cu,{useSyncExternalStoreWithSelector:gS}=pS;let j0=!1;const yS=n=>n;function xS(n,e=yS,t){(Rx?"production":void 0)!=="production"&&t&&!j0&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),j0=!0);const s=gS(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return mS(s),s}const M0=n=>{(Rx?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?lS(n):n,t=(s,i)=>xS(e,s,i);return Object.assign(t,e),t},Ax=n=>n?M0(n):M0,vS={};function Lx(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const l=d=>d===null?null:JSON.parse(d,void 0),c=(a=t.getItem(i))!=null?a:null;return c instanceof Promise?c.then(l):l(c)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const la=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return la(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return la(s)(t)}}}},bS=(n,e)=>(t,s,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:N=>N,version:0,merge:(N,I)=>({...I,...N}),...e},l=!1;const c=new Set,d=new Set;let f;try{f=a.getStorage()}catch{}if(!f)return n((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...N)},s,i);const m=la(a.serialize),y=()=>{const N=a.partialize({...s()});let I;const k=m({state:N,version:a.version}).then(D=>f.setItem(a.name,D)).catch(D=>{I=D});if(I)throw I;return k},x=i.setState;i.setState=(N,I)=>{x(N,I),y()};const b=n((...N)=>{t(...N),y()},s,i);let _;const w=()=>{var N;if(!f)return;l=!1,c.forEach(k=>k(s()));const I=((N=a.onRehydrateStorage)==null?void 0:N.call(a,s()))||void 0;return la(f.getItem.bind(f))(a.name).then(k=>{if(k)return a.deserialize(k)}).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==a.version){if(a.migrate)return a.migrate(k.state,k.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return k.state}).then(k=>{var D;return _=a.merge(k,(D=s())!=null?D:b),t(_,!0),y()}).then(()=>{I?.(_,void 0),l=!0,d.forEach(k=>k(_))}).catch(k=>{I?.(void 0,k)})};return i.persist={setOptions:N=>{a={...a,...N},N.getStorage&&(f=N.getStorage())},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>l,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(d.add(N),()=>{d.delete(N)})},w(),_||b},_S=(n,e)=>(t,s,i)=>{let a={storage:Lx(()=>localStorage),partialize:w=>w,version:0,merge:(w,N)=>({...N,...w}),...e},l=!1;const c=new Set,d=new Set;let f=a.storage;if(!f)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...w)},s,i);const m=()=>{const w=a.partialize({...s()});return f.setItem(a.name,{state:w,version:a.version})},y=i.setState;i.setState=(w,N)=>{y(w,N),m()};const x=n((...w)=>{t(...w),m()},s,i);i.getInitialState=()=>x;let b;const _=()=>{var w,N;if(!f)return;l=!1,c.forEach(k=>{var D;return k((D=s())!=null?D:x)});const I=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(w=s())!=null?w:x))||void 0;return la(f.getItem.bind(f))(a.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==a.version){if(a.migrate)return[!0,a.migrate(k.state,k.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var D;const[L,M]=k;if(b=a.merge(M,(D=s())!=null?D:x),t(b,!0),L)return m()}).then(()=>{I?.(b,void 0),b=s(),l=!0,d.forEach(k=>k(b))}).catch(k=>{I?.(void 0,k)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>_(),hasHydrated:()=>l,onHydrate:w=>(c.add(w),()=>{c.delete(w)}),onFinishHydration:w=>(d.add(w),()=>{d.delete(w)})},a.skipHydration||_(),b||x},wS=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((vS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),bS(n,e)):_S(n,e),SS=wS,C0=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),js=Ax()(SS(n=>({connections:[],tables:[],currentTable:null,filters:[],isLoading:!1,error:null,addConnection:e=>{const t={...e,id:C0(),isConnected:!1};n(s=>({connections:[...s.connections,t]}))},removeConnection:e=>{n(t=>({connections:t.connections.filter(s=>s.id!==e),tables:t.tables.filter(s=>s.connectionId!==e)}))},updateConnection:(e,t)=>{n(s=>({connections:s.connections.map(i=>i.id===e?{...i,...t}:i)}))},setConnectionStatus:(e,t)=>{n(s=>({connections:s.connections.map(i=>i.id===e?{...i,isConnected:t,lastConnected:t?new Date:i.lastConnected}:i)}))},addTable:e=>{const t={...e,id:C0()};n(s=>({tables:[...s.tables,t]}))},removeTable:e=>{n(t=>({tables:t.tables.filter(s=>s.id!==e),currentTable:t.currentTable?.id===e?null:t.currentTable}))},setCurrentTable:e=>{n({currentTable:e})},addFilter:e=>{n(t=>({filters:[...t.filters,{...e,isActive:!0}]}))},removeFilter:e=>{n(t=>({filters:t.filters.filter((s,i)=>i!==e)}))},toggleFilter:e=>{n(t=>({filters:t.filters.map((s,i)=>i===e?{...s,isActive:!s.isActive}:s)}))},clearFilters:()=>{n({filters:[]})},setLoading:e=>{n({isLoading:e})},setError:e=>{n({error:e})}}),{name:"data-analyzer-store",storage:Lx(()=>localStorage),partialize:n=>({connections:n.connections,tables:n.tables,filters:n.filters})}));function NS(){const{connections:n,addConnection:e,removeConnection:t,updateConnection:s,setConnectionStatus:i}=js(),[a,l]=ce.useState(!1),[c,d]=ce.useState(null),f=_=>{e(_),l(!1)},m=_=>{d(_)},y=(_,w)=>{s(_,w),d(null)},x=_=>{confirm("この接続を削除しますか？")&&t(_)},b=async _=>{try{i(_.id,!1),await new Promise(w=>setTimeout(w,1e3)),i(_.id,!0)}catch{i(_.id,!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"データソース管理"}),h.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center gap-2",children:[h.jsx(Cx,{className:"h-4 w-4"}),"新しい接続"]})]}),n.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(Fr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{children:"まだ接続が設定されていません"}),h.jsx("p",{className:"text-sm",children:"「新しい接続」ボタンから接続を追加してください"})]}):h.jsx("div",{className:"grid gap-4",children:n.map(_=>h.jsx("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:_.name}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${_.isConnected?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.type}),_.isConnected?h.jsx(wf,{className:"h-4 w-4 text-green-600"}):h.jsx(oS,{className:"h-4 w-4 text-red-600"})]}),h.jsxs("div",{className:"text-sm text-gray-600",children:[_.type!=="file"&&h.jsxs("p",{children:[_.config.host,":",_.config.port,"/",_.config.database]}),_.lastConnected&&h.jsxs("p",{children:["最終接続: ",_.lastConnected.toLocaleDateString()]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>b(_),className:"text-blue-600 hover:text-blue-800 text-sm",children:"接続テスト"}),h.jsx("button",{onClick:()=>m(_),className:"text-gray-600 hover:text-gray-800",children:h.jsx(sS,{className:"h-4 w-4"})}),h.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:h.jsx(Ox,{className:"h-4 w-4"})})]})]})},_.id))}),(a||c)&&h.jsx(IS,{connection:c,onSave:c?_=>y(c.id,_):f,onCancel:()=>{l(!1),d(null)}})]})}function IS({connection:n,onSave:e,onCancel:t}){const[s,i]=ce.useState({name:n?.name||"",type:n?.type||"postgresql",host:n?.config.host||"",port:n?.config.port||5432,database:n?.config.database||"",username:n?.config.username||"",password:n?.config.password||"",ssl:n?.config.ssl||!1}),a=l=>{l.preventDefault(),e({name:s.name,type:s.type,config:{host:s.host,port:s.port,database:s.database,username:s.username,password:s.password,ssl:s.ssl}})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[h.jsx("h3",{className:"text-lg font-medium mb-4",children:n?"接続を編集":"新しい接続を追加"}),h.jsxs("form",{onSubmit:a,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"接続名"}),h.jsx("input",{type:"text",value:s.name,onChange:l=>i({...s,name:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"データベースタイプ"}),h.jsxs("select",{value:s.type,onChange:l=>i({...s,type:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"postgresql",children:"PostgreSQL"}),h.jsx("option",{value:"mysql",children:"MySQL"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ホスト"}),h.jsx("input",{type:"text",value:s.host,onChange:l=>i({...s,host:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ポート"}),h.jsx("input",{type:"number",value:s.port,onChange:l=>i({...s,port:parseInt(l.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"データベース名"}),h.jsx("input",{type:"text",value:s.database,onChange:l=>i({...s,database:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ユーザー名"}),h.jsx("input",{type:"text",value:s.username,onChange:l=>i({...s,username:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"パスワード"}),h.jsx("input",{type:"password",value:s.password,onChange:l=>i({...s,password:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"ssl",checked:s.ssl,onChange:l=>i({...s,ssl:l.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),h.jsx("label",{htmlFor:"ssl",className:"ml-2 block text-sm text-gray-700",children:"SSL接続を使用"})]}),h.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[h.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"キャンセル"}),h.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:n?"更新":"追加"})]})]})]})})}const ES="modulepreload",kS=function(n){return"/"+n},O0={},ea=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let f=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var l=f;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");i=f(t.map(m=>{if(m=kS(m),m in O0)return;O0[m]=!0;const y=m.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":ES,y||(b.as="script"),b.crossOrigin="",b.href=m,d&&b.setAttribute("nonce",d),document.head.appendChild(b),y)return new Promise((_,w)=>{b.addEventListener("load",_),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function TS(n,e=2){if(n==null||isNaN(n)||n<0)return"サイズ不明";if(n===0)return"0 Bytes";const t=1024,s=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(n)/Math.log(t));return!isFinite(a)||a<0?n+" Bytes":parseFloat((n/Math.pow(t,a)).toFixed(s))+" "+i[a]}function jS(n){const e=["text/csv","text/tab-separated-values","application/json","text/plain","application/x-sqlite3","application/vnd.sqlite3","application/octet-stream"],t=["csv","tsv","txt","json","sqlite","sqlite3","db"],s=n.name.split(".").pop()?.toLowerCase();return e.includes(n.type)||!!s&&t.includes(s)}function ke(n,e,t,s){function i(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function c(m){try{f(s.next(m))}catch(y){l(y)}}function d(m){try{f(s.throw(m))}catch(y){l(y)}}function f(m){m.done?a(m.value):i(m.value).then(c,d)}f((s=s.apply(n,e||[])).next())})}function D0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(n){return this instanceof Te?(this.v=n,this):new Te(n)}function is(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(b){return function(_){return Promise.resolve(_).then(b,y)}}function c(b,_){s[b]&&(i[b]=function(w){return new Promise(function(N,I){a.push([b,w,N,I])>1||d(b,w)})},_&&(i[b]=_(i[b])))}function d(b,_){try{f(s[b](_))}catch(w){x(a[0][3],w)}}function f(b){b.value instanceof Te?Promise.resolve(b.value.v).then(m,y):x(a[0][2],b)}function m(b){d("next",b)}function y(b){d("throw",b)}function x(b,_){b(_),a.shift(),a.length&&d(a[0][0],a[0][1])}}function cc(n){var e,t;return e={},s("next"),s("throw",function(i){throw i}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(i,a){e[i]=n[i]?function(l){return(t=!t)?{value:Te(n[i](l)),done:!1}:a?a(l):l}:a}}function Fi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof D0=="function"?D0(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(a){t[a]=n[a]&&function(l){return new Promise(function(c,d){l=n[a](l),i(c,d,l.done,l.value)})}}function i(a,l,c,d){Promise.resolve(d).then(function(f){a({value:f,done:c})},l)}}const MS=new TextDecoder("utf-8"),Xh=n=>MS.decode(n),CS=new TextEncoder,Sf=n=>CS.encode(n),OS=n=>typeof n=="number",Bx=n=>typeof n=="boolean",St=n=>typeof n=="function",rn=n=>n!=null&&Object(n)===n,Ui=n=>rn(n)&&St(n.then),ka=n=>rn(n)&&St(n[Symbol.iterator]),Yr=n=>rn(n)&&St(n[Symbol.asyncIterator]),Jh=n=>rn(n)&&rn(n.schema),Fx=n=>rn(n)&&"done"in n&&"value"in n,Px=n=>rn(n)&&St(n.stat)&&OS(n.fd),Ux=n=>rn(n)&&Nf(n.body),uu=n=>"_getDOMStream"in n&&"_getNodeStream"in n,DS=n=>rn(n)&&St(n.abort)&&St(n.getWriter)&&!uu(n),Nf=n=>rn(n)&&St(n.cancel)&&St(n.getReader)&&!uu(n),RS=n=>rn(n)&&St(n.end)&&St(n.write)&&Bx(n.writable)&&!uu(n),zx=n=>rn(n)&&St(n.read)&&St(n.pipe)&&Bx(n.readable)&&!uu(n),AS=n=>rn(n)&&St(n.clear)&&St(n.bytes)&&St(n.position)&&St(n.setPosition)&&St(n.capacity)&&St(n.getBufferIdentifier)&&St(n.createLong),If=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function LS(n){const e=n[0]?[n[0]]:[];let t,s,i,a;for(let l,c,d=0,f=0,m=n.length;++d<m;){if(l=e[f],c=n[d],!l||!c||l.buffer!==c.buffer||c.byteOffset<l.byteOffset){c&&(e[++f]=c);continue}if({byteOffset:t,byteLength:i}=l,{byteOffset:s,byteLength:a}=c,t+i<s||s+a<t){c&&(e[++f]=c);continue}e[f]=new Uint8Array(l.buffer,t,s-t+a)}return e}function R0(n,e,t=0,s=e.byteLength){const i=n.byteLength,a=new Uint8Array(n.buffer,n.byteOffset,i),l=new Uint8Array(e.buffer,e.byteOffset,Math.min(s,i));return a.set(l,t),n}function as(n,e){const t=LS(n),s=t.reduce((m,y)=>m+y.byteLength,0);let i,a,l,c=0,d=-1;const f=Math.min(e||Number.POSITIVE_INFINITY,s);for(const m=t.length;++d<m;){if(i=t[d],a=i.subarray(0,Math.min(i.length,f-c)),f<=c+a.length){a.length<i.length?t[d]=i.subarray(a.length):a.length===i.length&&d++,l?R0(l,a,c):l=a;break}R0(l||(l=new Uint8Array(f)),a,c),c+=a.length}return[l||new Uint8Array(0),t.slice(d),s-(l?l.byteLength:0)]}function Xe(n,e){let t=Fx(e)?e.value:e;return t instanceof n?n===Uint8Array?new n(t.buffer,t.byteOffset,t.byteLength):t:t?(typeof t=="string"&&(t=Sf(t)),t instanceof ArrayBuffer?new n(t):t instanceof If?new n(t):AS(t)?Xe(n,t.bytes()):ArrayBuffer.isView(t)?t.byteLength<=0?new n(0):new n(t.buffer,t.byteOffset,t.byteLength/n.BYTES_PER_ELEMENT):n.from(t)):new n(0)}const Bo=n=>Xe(Int32Array,n),A0=n=>Xe(BigInt64Array,n),Le=n=>Xe(Uint8Array,n),Zh=n=>(n.next(),n);function*BS(n,e){const t=function*(i){yield i},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof If?t(e):ka(e)?e:t(e);return yield*Zh(function*(i){let a=null;do a=i.next(yield Xe(n,a));while(!a.done)}(s[Symbol.iterator]())),new n}const FS=n=>BS(Uint8Array,n);function $x(n,e){return is(this,arguments,function*(){if(Ui(e))return yield Te(yield Te(yield*cc(Fi($x(n,yield Te(e))))));const s=function(l){return is(this,arguments,function*(){yield yield Te(yield Te(l))})},i=function(l){return is(this,arguments,function*(){yield Te(yield*cc(Fi(Zh(function*(c){let d=null;do d=c.next(yield d?.value);while(!d.done)}(l[Symbol.iterator]())))))})},a=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof If?s(e):ka(e)?i(e):Yr(e)?e:s(e);return yield Te(yield*cc(Fi(Zh(function(l){return is(this,arguments,function*(){let c=null;do c=yield Te(l.next(yield yield Te(Xe(n,c))));while(!c.done)})}(a[Symbol.asyncIterator]()))))),yield Te(new n)})}const PS=n=>$x(Uint8Array,n);function Hx(n,e,t){if(n!==0){t=t.slice(0,e);for(let s=-1,i=t.length;++s<i;)t[s]+=n}return t.subarray(0,e)}function US(n,e){let t=0;const s=n.length;if(s!==e.length)return!1;if(s>0)do if(n[t]!==e[t])return!1;while(++t<s);return!0}const Sn={fromIterable(n){return Wl(zS(n))},fromAsyncIterable(n){return Wl($S(n))},fromDOMStream(n){return Wl(HS(n))},fromNodeStream(n){return Wl(WS(n))},toDOMStream(n,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(n,e){throw new Error('"toNodeStream" not available in this environment')}},Wl=n=>(n.next(),n);function*zS(n){let e,t=!1,s=[],i,a,l,c=0;function d(){return a==="peek"?as(s,l)[0]:([i,s,c]=as(s,l),i)}({cmd:a,size:l}=(yield null)||{cmd:"read",size:0});const f=FS(n)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(l-c)?f.next():f.next(l-c),!e&&i.byteLength>0&&(s.push(i),c+=i.byteLength),e||l<=c)do({cmd:a,size:l}=yield d());while(l<c);while(!e)}catch(m){(t=!0)&&typeof f.throw=="function"&&f.throw(m)}finally{t===!1&&typeof f.return=="function"&&f.return(null)}return null}function $S(n){return is(this,arguments,function*(){let t,s=!1,i=[],a,l,c,d=0;function f(){return l==="peek"?as(i,c)[0]:([a,i,d]=as(i,c),a)}({cmd:l,size:c}=(yield yield Te(null))||{cmd:"read",size:0});const m=PS(n)[Symbol.asyncIterator]();try{do if({done:t,value:a}=Number.isNaN(c-d)?yield Te(m.next()):yield Te(m.next(c-d)),!t&&a.byteLength>0&&(i.push(a),d+=a.byteLength),t||c<=d)do({cmd:l,size:c}=yield yield Te(f()));while(c<d);while(!t)}catch(y){(s=!0)&&typeof m.throw=="function"&&(yield Te(m.throw(y)))}finally{s===!1&&typeof m.return=="function"&&(yield Te(m.return(new Uint8Array(0))))}return yield Te(null)})}function HS(n){return is(this,arguments,function*(){let t=!1,s=!1,i=[],a,l,c,d=0;function f(){return l==="peek"?as(i,c)[0]:([a,i,d]=as(i,c),a)}({cmd:l,size:c}=(yield yield Te(null))||{cmd:"read",size:0});const m=new VS(n);try{do if({done:t,value:a}=Number.isNaN(c-d)?yield Te(m.read()):yield Te(m.read(c-d)),!t&&a.byteLength>0&&(i.push(Le(a)),d+=a.byteLength),t||c<=d)do({cmd:l,size:c}=yield yield Te(f()));while(c<d);while(!t)}catch(y){(s=!0)&&(yield Te(m.cancel(y)))}finally{s===!1?yield Te(m.cancel()):n.locked&&m.releaseLock()}return yield Te(null)})}class VS{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ke(this,void 0,void 0,function*(){const{reader:t,source:s}=this;t&&(yield t.cancel(e).catch(()=>{})),s&&s.locked&&this.releaseLock()})}read(e){return ke(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=Le(t)),t})}}const Sh=(n,e)=>{const t=i=>s([e,i]);let s;return[e,t,new Promise(i=>(s=i)&&n.once(e,t))]};function WS(n){return is(this,arguments,function*(){const t=[];let s="error",i=!1,a=null,l,c,d=0,f=[],m;function y(){return l==="peek"?as(f,c)[0]:([m,f,d]=as(f,c),m)}if({cmd:l,size:c}=(yield yield Te(null))||{cmd:"read",size:0},n.isTTY)return yield yield Te(new Uint8Array(0)),yield Te(null);try{t[0]=Sh(n,"end"),t[1]=Sh(n,"error");do{if(t[2]=Sh(n,"readable"),[s,a]=yield Te(Promise.race(t.map(b=>b[2]))),s==="error")break;if((i=s==="end")||(Number.isFinite(c-d)?(m=Le(n.read(c-d)),m.byteLength<c-d&&(m=Le(n.read()))):m=Le(n.read()),m.byteLength>0&&(f.push(m),d+=m.byteLength)),i||c<=d)do({cmd:l,size:c}=yield yield Te(y()));while(c<d)}while(!i)}finally{yield Te(x(t,s==="error"?a:null))}return yield Te(null);function x(b,_){return m=f=null,new Promise((w,N)=>{for(const[I,k]of b)n.off(I,k);try{const I=n.destroy;I&&I.call(n,_),_=void 0}catch(I){_=I||_}finally{_!=null?N(_):w()}})}})}var xt;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(xt||(xt={}));var Ut;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(Ut||(Ut={}));var Pt;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Pt||(Pt={}));var Tn;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(Tn||(Tn={}));var xe;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(xe||(xe={}));var ls;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ls||(ls={}));const Nh=2,ts=4,Es=4,qe=4,ni=new Int32Array(2),L0=new Float32Array(ni.buffer),B0=new Float64Array(ni.buffer),ql=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var ef;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(ef||(ef={}));let Pr=class Vx{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Vx(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return ni[0]=this.readInt32(e),L0[0]}readFloat64(e){return ni[ql?0:1]=this.readInt32(e),ni[ql?1:0]=this.readInt32(e+4),B0[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){L0[0]=t,this.writeInt32(e,ni[0])}writeFloat64(e,t){B0[0]=t,this.writeInt32(e,ni[ql?0:1]),this.writeInt32(e+4,ni[ql?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ts+Es)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<Es;t++)e+=String.fromCharCode(this.readInt8(this.position_+ts+t));return e}__offset(e,t){const s=e-this.readInt32(e);return t<this.readInt16(s)?this.readInt16(s+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const s=this.readInt32(e);e+=ts;const i=this.bytes_.subarray(e,e+s);return t===ef.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+ts}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Es)throw new Error("FlatBuffers: file identifier must be length "+Es);for(let t=0;t<Es;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+ts+t))return!1;return!0}createScalarList(e,t){const s=[];for(let i=0;i<t;++i){const a=e(i);a!==null&&s.push(a)}return s}createObjList(e,t){const s=[];for(let i=0;i<t;++i){const a=e(i);a!==null&&s.push(a.unpack())}return s}},Wx=class qx{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=Pr.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const s=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<s+e+t;){const i=this.bb.capacity();this.bb=qx.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(s)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,s){(this.force_defaults||t!=s)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,s){(this.force_defaults||t!=s)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,s){(this.force_defaults||t!=s)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,s){(this.force_defaults||t!==s)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,s){(this.force_defaults||t!=s)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,s){(this.force_defaults||t!=s)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,s){(this.force_defaults||t!=s)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,s){t!=s&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const s=t<<1,i=Pr.allocate(s);return i.setPosition(s-t),i.bytes().set(e.bytes(),s-t),i}addOffset(e){this.prep(ts,0),this.writeInt32(this.offset()-e+ts)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const s=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const i=2;this.addInt16(e-this.object_start);const a=(s+i)*Nh;this.addInt16(a);let l=0;const c=this.space;e:for(t=0;t<this.vtables.length;t++){const d=this.bb.capacity()-this.vtables[t];if(a==this.bb.readInt16(d)){for(let f=Nh;f<a;f+=Nh)if(this.bb.readInt16(c+f)!=this.bb.readInt16(d+f))continue e;l=this.vtables[t];break}}return l?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,l-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,s){const i=s?qe:0;if(t){const a=t;if(this.prep(this.minalign,ts+Es+i),a.length!=Es)throw new TypeError("FlatBuffers: file identifier must be length "+Es);for(let l=Es-1;l>=0;l--)this.writeInt8(a.charCodeAt(l))}this.prep(this.minalign,ts+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const s=this.bb.capacity()-e,i=s-this.bb.readInt32(s);if(!(t<this.bb.readInt16(i)&&this.bb.readInt16(i+t)!=0))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,s){this.notNested(),this.vector_num_elems=t,this.prep(ts,e*t),this.prep(s,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;return e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let s=0;s<e.length;++s){const i=e[s];if(i!==null)t.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var Sc;(function(n){n[n.BUFFER=0]="BUFFER"})(Sc||(Sc={}));var Nc;(function(n){n[n.LZ4_FRAME=0]="LZ4_FRAME",n[n.ZSTD=1]="ZSTD"})(Nc||(Nc={}));class si{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new si).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+qe),(t||new si).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Nc.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Sc.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,Nc.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,Sc.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,s){return si.startBodyCompression(e),si.addCodec(e,t),si.addMethod(e,s),si.endBodyCompression(e)}}class Yx{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,s){return e.prep(8,16),e.writeInt64(BigInt(s??0)),e.writeInt64(BigInt(t??0)),e.offset()}}let Qx=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,s){return e.prep(8,16),e.writeInt64(BigInt(s??0)),e.writeInt64(BigInt(t??0)),e.offset()}},ws=class tf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new tf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+qe),(t||new tf).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new Qx).__init(this.bb.__vector(this.bb_pos+s)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const s=this.bb.__offset(this.bb_pos,8);return s?(t||new Yx).__init(this.bb.__vector(this.bb_pos+s)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new si).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},_r=class nf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new nf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+qe),(t||new nf).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new ws).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var Ur;(function(n){n[n.Little=0]="Little",n[n.Big=1]="Big"})(Ur||(Ur={}));var Ic;(function(n){n[n.DenseArray=0]="DenseArray"})(Ic||(Ic={}));class fn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+qe),(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,s){return fn.startInt(e),fn.addBitWidth(e,t),fn.addIsSigned(e,s),fn.endInt(e)}}class ks{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new ks).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+qe),(t||new ks).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Ic.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,Ic.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Nt{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new Nt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+qe),(t||new Nt).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,s){return Nt.startKeyValue(e),Nt.addKey(e,t),Nt.addValue(e,s),Nt.endKeyValue(e)}}let F0=class Ho{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new Ho).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+qe),(t||new Ho).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Ho.startBinary(e),Ho.endBinary(e)}},P0=class Vo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new Vo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+qe),(t||new Vo).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Vo.startBool(e),Vo.endBool(e)}},uc=class wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+qe),(t||new wr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Tn.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,Tn.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return wr.startDate(e),wr.addUnit(e,t),wr.endDate(e)}},Sr=class ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+qe),(t||new ti).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,s,i){return ti.startDecimal(e),ti.addPrecision(e,t),ti.addScale(e,s),ti.addBitWidth(e,i),ti.endDecimal(e)}},dc=class Nr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(e,t){return(t||new Nr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,t){return e.setPosition(e.position()+qe),(t||new Nr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xe.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,xe.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,t){return Nr.startDuration(e),Nr.addUnit(e,t),Nr.endDuration(e)}},hc=class Ir{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new Ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+qe),(t||new Ir).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return Ir.startFixedSizeBinary(e),Ir.addByteWidth(e,t),Ir.endFixedSizeBinary(e)}},fc=class Er{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new Er).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+qe),(t||new Er).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return Er.startFixedSizeList(e),Er.addListSize(e,t),Er.endFixedSizeList(e)}};class ns{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new ns).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+qe),(t||new ns).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Pt.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Pt.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return ns.startFloatingPoint(e),ns.addPrecision(e,t),ns.endFloatingPoint(e)}}class ss{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new ss).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+qe),(t||new ss).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ls.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,ls.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return ss.startInterval(e),ss.addUnit(e,t),ss.endInterval(e)}}let U0=class Wo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(e,t){return(t||new Wo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,t){return e.setPosition(e.position()+qe),(t||new Wo).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return Wo.startLargeBinary(e),Wo.endLargeBinary(e)}},z0=class qo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(e,t){return(t||new qo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,t){return e.setPosition(e.position()+qe),(t||new qo).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return qo.startLargeUtf8(e),qo.endLargeUtf8(e)}},$0=class Yo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new Yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+qe),(t||new Yo).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Yo.startList(e),Yo.endList(e)}},pc=class kr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new kr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+qe),(t||new kr).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return kr.startMap(e),kr.addKeysSorted(e,t),kr.endMap(e)}},H0=class Qo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new Qo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+qe),(t||new Qo).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Qo.startNull(e),Qo.endNull(e)}};class Li{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new Li).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+qe),(t||new Li).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Li.startStruct_(e),Li.endStruct_(e)}}class Nn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new Nn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+qe),(t||new Nn).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xe.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,xe.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,s){return Nn.startTime(e),Nn.addUnit(e,t),Nn.addBitWidth(e,s),Nn.endTime(e)}}class In{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new In).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+qe),(t||new In).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xe.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,xe.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,s){return In.startTimestamp(e),In.addUnit(e,t),In.addTimezone(e,s),In.endTimestamp(e)}}class tn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new tn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+qe),(t||new tn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ut.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,Ut.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addInt32(t[s]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,s){return tn.startUnion(e),tn.addMode(e,t),tn.addTypeIds(e,s),tn.endUnion(e)}}let V0=class Ko{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new Ko).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+qe),(t||new Ko).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Ko.startUtf8(e),Ko.endUtf8(e)}};var st;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.FloatingPoint=3]="FloatingPoint",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct_=13]="Struct_",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.LargeBinary=19]="LargeBinary",n[n.LargeUtf8=20]="LargeUtf8",n[n.LargeList=21]="LargeList",n[n.RunEndEncoded=22]="RunEndEncoded"})(st||(st={}));let wn=class mc{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new mc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+qe),(t||new mc).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):st.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new ks).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const s=this.bb.__offset(this.bb_pos,14);return s?(t||new mc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const s=this.bb.__offset(this.bb_pos,16);return s?(t||new Nt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,st.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},Jn=class vs{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new vs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+qe),(t||new vs).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ur.Little}fields(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new wn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const s=this.bb.__offset(this.bb_pos,8);return s?(t||new Nt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,Ur.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let s=t.length-1;s>=0;s--)e.addInt64(t[s]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,s,i,a){return vs.startSchema(e),vs.addEndianness(e,t),vs.addFields(e,s),vs.addCustomMetadata(e,i),vs.addFeatures(e,a),vs.endSchema(e)}};var ze;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(ze||(ze={}));var T;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.LargeBinary=19]="LargeBinary",n[n.LargeUtf8=20]="LargeUtf8",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth",n[n.DurationSecond=-27]="DurationSecond",n[n.DurationMillisecond=-28]="DurationMillisecond",n[n.DurationMicrosecond=-29]="DurationMicrosecond",n[n.DurationNanosecond=-30]="DurationNanosecond"})(T||(T={}));var Ss;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(Ss||(Ss={}));const qS=void 0;function ca(n){if(n===null)return"null";if(n===qS)return"undefined";switch(typeof n){case"number":return`${n}`;case"bigint":return`${n}`;case"string":return`"${n}"`}return typeof n[Symbol.toPrimitive]=="function"?n[Symbol.toPrimitive]("string"):ArrayBuffer.isView(n)?n instanceof BigInt64Array||n instanceof BigUint64Array?`[${[...n].map(e=>ca(e))}]`:`[${n}]`:ArrayBuffer.isView(n)?`[${n}]`:JSON.stringify(n,(e,t)=>typeof t=="bigint"?`${t}`:t)}function et(n){if(typeof n=="bigint"&&(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER))throw new TypeError(`${n} is not safe to convert to a number.`);return Number(n)}function Kx(n,e){return et(n/e)+et(n%e)/et(e)}const YS=Symbol.for("isArrowBigNum");function Hn(n,...e){return e.length===0?Object.setPrototypeOf(Xe(this.TypedArray,n),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(n,...e),this.constructor.prototype)}Hn.prototype[YS]=!0;Hn.prototype.toJSON=function(){return`"${da(this)}"`};Hn.prototype.valueOf=function(n){return Gx(this,n)};Hn.prototype.toString=function(){return da(this)};Hn.prototype[Symbol.toPrimitive]=function(n="default"){switch(n){case"number":return Gx(this);case"string":return da(this);case"default":return GS(this)}return da(this)};function Or(...n){return Hn.apply(this,n)}function Dr(...n){return Hn.apply(this,n)}function ua(...n){return Hn.apply(this,n)}Object.setPrototypeOf(Or.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Dr.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ua.prototype,Object.create(Uint32Array.prototype));Object.assign(Or.prototype,Hn.prototype,{constructor:Or,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Dr.prototype,Hn.prototype,{constructor:Dr,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(ua.prototype,Hn.prototype,{constructor:ua,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const QS=BigInt(4294967296)*BigInt(4294967296),KS=QS-BigInt(1);function Gx(n,e){const{buffer:t,byteOffset:s,byteLength:i,signed:a}=n,l=new BigUint64Array(t,s,i/8),c=a&&l.at(-1)&BigInt(1)<<BigInt(63);let d=BigInt(0),f=0;if(c){for(const m of l)d|=(m^KS)*(BigInt(1)<<BigInt(64*f++));d*=BigInt(-1),d-=BigInt(1)}else for(const m of l)d|=m*(BigInt(1)<<BigInt(64*f++));if(typeof e=="number"){const m=BigInt(Math.pow(10,e)),y=d/m,x=d%m;return et(y)+et(x)/et(m)}return et(d)}function da(n){if(n.byteLength===8)return`${new n.BigIntArray(n.buffer,n.byteOffset,1)[0]}`;if(!n.signed)return Ih(n);let e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return Ih(n);e=e.slice();let s=1;for(let a=0;a<e.length;a++){const l=e[a],c=~l+s;e[a]=c,s&=l===0?1:0}return`-${Ih(e)}`}function GS(n){return n.byteLength===8?new n.BigIntArray(n.buffer,n.byteOffset,1)[0]:da(n)}function Ih(n){let e="";const t=new Uint32Array(2);let s=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);const i=new Uint32Array((s=new Uint16Array(s).reverse()).buffer);let a=-1;const l=s.length-1;do{for(t[0]=s[a=0];a<l;)s[a++]=t[1]=t[0]/10,t[0]=(t[0]-t[1]*10<<16)+s[a];s[a]=t[1]=t[0]/10,t[0]=t[0]-t[1]*10,e=`${t[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class Ef{static new(e,t){switch(t){case!0:return new Or(e);case!1:return new Dr(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Or(e)}return e.byteLength===16?new ua(e):new Dr(e)}static signed(e){return new Or(e)}static unsigned(e){return new Dr(e)}static decimal(e){return new ua(e)}constructor(e,t){return Ef.new(e,t)}}var Xx,Jx,Zx,ev,tv,nv,sv,iv,rv,ov,av,lv,cv,uv,dv,hv,fv,pv,mv,gv,yv,xv;class ue{static isNull(e){return e?.typeId===T.Null}static isInt(e){return e?.typeId===T.Int}static isFloat(e){return e?.typeId===T.Float}static isBinary(e){return e?.typeId===T.Binary}static isLargeBinary(e){return e?.typeId===T.LargeBinary}static isUtf8(e){return e?.typeId===T.Utf8}static isLargeUtf8(e){return e?.typeId===T.LargeUtf8}static isBool(e){return e?.typeId===T.Bool}static isDecimal(e){return e?.typeId===T.Decimal}static isDate(e){return e?.typeId===T.Date}static isTime(e){return e?.typeId===T.Time}static isTimestamp(e){return e?.typeId===T.Timestamp}static isInterval(e){return e?.typeId===T.Interval}static isDuration(e){return e?.typeId===T.Duration}static isList(e){return e?.typeId===T.List}static isStruct(e){return e?.typeId===T.Struct}static isUnion(e){return e?.typeId===T.Union}static isFixedSizeBinary(e){return e?.typeId===T.FixedSizeBinary}static isFixedSizeList(e){return e?.typeId===T.FixedSizeList}static isMap(e){return e?.typeId===T.Map}static isDictionary(e){return e?.typeId===T.Dictionary}static isDenseUnion(e){return ue.isUnion(e)&&e.mode===Ut.Dense}static isSparseUnion(e){return ue.isUnion(e)&&e.mode===Ut.Sparse}constructor(e){this.typeId=e}}Xx=Symbol.toStringTag;ue[Xx]=(n=>(n.children=null,n.ArrayType=Array,n.OffsetArrayType=Int32Array,n[Symbol.toStringTag]="DataType"))(ue.prototype);class ci extends ue{constructor(){super(T.Null)}toString(){return"Null"}}Jx=Symbol.toStringTag;ci[Jx]=(n=>n[Symbol.toStringTag]="Null")(ci.prototype);class zi extends ue{constructor(e,t){super(T.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Zx=Symbol.toStringTag;zi[Zx]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(zi.prototype);class ha extends zi{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(ha.prototype,"ArrayType",{value:Int32Array});class Ec extends ue{constructor(e){super(T.Float),this.precision=e}get ArrayType(){switch(this.precision){case Pt.HALF:return Uint16Array;case Pt.SINGLE:return Float32Array;case Pt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ev=Symbol.toStringTag;Ec[ev]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(Ec.prototype);class kc extends ue{constructor(){super(T.Binary)}toString(){return"Binary"}}tv=Symbol.toStringTag;kc[tv]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(kc.prototype);class Tc extends ue{constructor(){super(T.LargeBinary)}toString(){return"LargeBinary"}}nv=Symbol.toStringTag;Tc[nv]=(n=>(n.ArrayType=Uint8Array,n.OffsetArrayType=BigInt64Array,n[Symbol.toStringTag]="LargeBinary"))(Tc.prototype);class jc extends ue{constructor(){super(T.Utf8)}toString(){return"Utf8"}}sv=Symbol.toStringTag;jc[sv]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(jc.prototype);class Mc extends ue{constructor(){super(T.LargeUtf8)}toString(){return"LargeUtf8"}}iv=Symbol.toStringTag;Mc[iv]=(n=>(n.ArrayType=Uint8Array,n.OffsetArrayType=BigInt64Array,n[Symbol.toStringTag]="LargeUtf8"))(Mc.prototype);class Cc extends ue{constructor(){super(T.Bool)}toString(){return"Bool"}}rv=Symbol.toStringTag;Cc[rv]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(Cc.prototype);class Oc extends ue{constructor(e,t,s=128){super(T.Decimal),this.scale=e,this.precision=t,this.bitWidth=s}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}ov=Symbol.toStringTag;Oc[ov]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(Oc.prototype);class Dc extends ue{constructor(e){super(T.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${Tn[this.unit]}>`}get ArrayType(){return this.unit===Tn.DAY?Int32Array:BigInt64Array}}av=Symbol.toStringTag;Dc[av]=(n=>(n.unit=null,n[Symbol.toStringTag]="Date"))(Dc.prototype);class Rc extends ue{constructor(e,t){super(T.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${xe[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}lv=Symbol.toStringTag;Rc[lv]=(n=>(n.unit=null,n.bitWidth=null,n[Symbol.toStringTag]="Time"))(Rc.prototype);class Ac extends ue{constructor(e,t){super(T.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${xe[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}cv=Symbol.toStringTag;Ac[cv]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=BigInt64Array,n[Symbol.toStringTag]="Timestamp"))(Ac.prototype);class Lc extends ue{constructor(e){super(T.Interval),this.unit=e}toString(){return`Interval<${ls[this.unit]}>`}}uv=Symbol.toStringTag;Lc[uv]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(Lc.prototype);class Bc extends ue{constructor(e){super(T.Duration),this.unit=e}toString(){return`Duration<${xe[this.unit]}>`}}dv=Symbol.toStringTag;Bc[dv]=(n=>(n.unit=null,n.ArrayType=BigInt64Array,n[Symbol.toStringTag]="Duration"))(Bc.prototype);class Fc extends ue{constructor(e){super(T.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}hv=Symbol.toStringTag;Fc[hv]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(Fc.prototype);class Vt extends ue{constructor(e){super(T.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}fv=Symbol.toStringTag;Vt[fv]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(Vt.prototype);class Pc extends ue{constructor(e,t,s){super(T.Union),this.mode=e,this.children=s,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((i,a,l)=>(i[a]=l)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}pv=Symbol.toStringTag;Pc[pv]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(Pc.prototype);class Uc extends ue{constructor(e){super(T.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}mv=Symbol.toStringTag;Uc[mv]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(Uc.prototype);class zc extends ue{constructor(e,t){super(T.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}gv=Symbol.toStringTag;zc[gv]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(zc.prototype);class $c extends ue{constructor(e,t=!1){var s,i,a;if(super(T.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",!((s=e?.type)===null||s===void 0)&&s.children)){const l=(i=e?.type)===null||i===void 0?void 0:i.children[0];l&&(l.name="key");const c=(a=e?.type)===null||a===void 0?void 0:a.children[1];c&&(c.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}yv=Symbol.toStringTag;$c[yv]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))($c.prototype);const XS=(n=>()=>++n)(-1);class zr extends ue{constructor(e,t,s,i){super(T.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=i||!1,this.id=s==null?XS():et(s)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}xv=Symbol.toStringTag;zr[xv]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(zr.prototype);function Ns(n){const e=n;switch(n.typeId){case T.Decimal:return n.bitWidth/32;case T.Interval:return 1+e.unit;case T.FixedSizeList:return e.listSize;case T.FixedSizeBinary:return e.byteWidth;default:return 1}}class Oe{visitMany(e,...t){return e.map((s,i)=>this.visit(s,...t.map(a=>a[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return JS(this,e,t)}getVisitFnByTypeId(e,t=!0){return Tr(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitLargeUtf8(e,...t){return null}visitBinary(e,...t){return null}visitLargeBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitDuration(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function JS(n,e,t=!0){return typeof e=="number"?Tr(n,e,t):typeof e=="string"&&e in T?Tr(n,T[e],t):e&&e instanceof ue?Tr(n,W0(e),t):e?.type&&e.type instanceof ue?Tr(n,W0(e.type),t):Tr(n,T.NONE,t)}function Tr(n,e,t=!0){let s=null;switch(e){case T.Null:s=n.visitNull;break;case T.Bool:s=n.visitBool;break;case T.Int:s=n.visitInt;break;case T.Int8:s=n.visitInt8||n.visitInt;break;case T.Int16:s=n.visitInt16||n.visitInt;break;case T.Int32:s=n.visitInt32||n.visitInt;break;case T.Int64:s=n.visitInt64||n.visitInt;break;case T.Uint8:s=n.visitUint8||n.visitInt;break;case T.Uint16:s=n.visitUint16||n.visitInt;break;case T.Uint32:s=n.visitUint32||n.visitInt;break;case T.Uint64:s=n.visitUint64||n.visitInt;break;case T.Float:s=n.visitFloat;break;case T.Float16:s=n.visitFloat16||n.visitFloat;break;case T.Float32:s=n.visitFloat32||n.visitFloat;break;case T.Float64:s=n.visitFloat64||n.visitFloat;break;case T.Utf8:s=n.visitUtf8;break;case T.LargeUtf8:s=n.visitLargeUtf8;break;case T.Binary:s=n.visitBinary;break;case T.LargeBinary:s=n.visitLargeBinary;break;case T.FixedSizeBinary:s=n.visitFixedSizeBinary;break;case T.Date:s=n.visitDate;break;case T.DateDay:s=n.visitDateDay||n.visitDate;break;case T.DateMillisecond:s=n.visitDateMillisecond||n.visitDate;break;case T.Timestamp:s=n.visitTimestamp;break;case T.TimestampSecond:s=n.visitTimestampSecond||n.visitTimestamp;break;case T.TimestampMillisecond:s=n.visitTimestampMillisecond||n.visitTimestamp;break;case T.TimestampMicrosecond:s=n.visitTimestampMicrosecond||n.visitTimestamp;break;case T.TimestampNanosecond:s=n.visitTimestampNanosecond||n.visitTimestamp;break;case T.Time:s=n.visitTime;break;case T.TimeSecond:s=n.visitTimeSecond||n.visitTime;break;case T.TimeMillisecond:s=n.visitTimeMillisecond||n.visitTime;break;case T.TimeMicrosecond:s=n.visitTimeMicrosecond||n.visitTime;break;case T.TimeNanosecond:s=n.visitTimeNanosecond||n.visitTime;break;case T.Decimal:s=n.visitDecimal;break;case T.List:s=n.visitList;break;case T.Struct:s=n.visitStruct;break;case T.Union:s=n.visitUnion;break;case T.DenseUnion:s=n.visitDenseUnion||n.visitUnion;break;case T.SparseUnion:s=n.visitSparseUnion||n.visitUnion;break;case T.Dictionary:s=n.visitDictionary;break;case T.Interval:s=n.visitInterval;break;case T.IntervalDayTime:s=n.visitIntervalDayTime||n.visitInterval;break;case T.IntervalYearMonth:s=n.visitIntervalYearMonth||n.visitInterval;break;case T.Duration:s=n.visitDuration;break;case T.DurationSecond:s=n.visitDurationSecond||n.visitDuration;break;case T.DurationMillisecond:s=n.visitDurationMillisecond||n.visitDuration;break;case T.DurationMicrosecond:s=n.visitDurationMicrosecond||n.visitDuration;break;case T.DurationNanosecond:s=n.visitDurationNanosecond||n.visitDuration;break;case T.FixedSizeList:s=n.visitFixedSizeList;break;case T.Map:s=n.visitMap;break}if(typeof s=="function")return s;if(!t)return()=>null;throw new Error(`Unrecognized type '${T[e]}'`)}function W0(n){switch(n.typeId){case T.Null:return T.Null;case T.Int:{const{bitWidth:e,isSigned:t}=n;switch(e){case 8:return t?T.Int8:T.Uint8;case 16:return t?T.Int16:T.Uint16;case 32:return t?T.Int32:T.Uint32;case 64:return t?T.Int64:T.Uint64}return T.Int}case T.Float:switch(n.precision){case Pt.HALF:return T.Float16;case Pt.SINGLE:return T.Float32;case Pt.DOUBLE:return T.Float64}return T.Float;case T.Binary:return T.Binary;case T.LargeBinary:return T.LargeBinary;case T.Utf8:return T.Utf8;case T.LargeUtf8:return T.LargeUtf8;case T.Bool:return T.Bool;case T.Decimal:return T.Decimal;case T.Time:switch(n.unit){case xe.SECOND:return T.TimeSecond;case xe.MILLISECOND:return T.TimeMillisecond;case xe.MICROSECOND:return T.TimeMicrosecond;case xe.NANOSECOND:return T.TimeNanosecond}return T.Time;case T.Timestamp:switch(n.unit){case xe.SECOND:return T.TimestampSecond;case xe.MILLISECOND:return T.TimestampMillisecond;case xe.MICROSECOND:return T.TimestampMicrosecond;case xe.NANOSECOND:return T.TimestampNanosecond}return T.Timestamp;case T.Date:switch(n.unit){case Tn.DAY:return T.DateDay;case Tn.MILLISECOND:return T.DateMillisecond}return T.Date;case T.Interval:switch(n.unit){case ls.DAY_TIME:return T.IntervalDayTime;case ls.YEAR_MONTH:return T.IntervalYearMonth}return T.Interval;case T.Duration:switch(n.unit){case xe.SECOND:return T.DurationSecond;case xe.MILLISECOND:return T.DurationMillisecond;case xe.MICROSECOND:return T.DurationMicrosecond;case xe.NANOSECOND:return T.DurationNanosecond}return T.Duration;case T.Map:return T.Map;case T.List:return T.List;case T.Struct:return T.Struct;case T.Union:switch(n.mode){case Ut.Dense:return T.DenseUnion;case Ut.Sparse:return T.SparseUnion}return T.Union;case T.FixedSizeBinary:return T.FixedSizeBinary;case T.FixedSizeList:return T.FixedSizeList;case T.Dictionary:return T.Dictionary}throw new Error(`Unrecognized type '${T[n.typeId]}'`)}Oe.prototype.visitInt8=null;Oe.prototype.visitInt16=null;Oe.prototype.visitInt32=null;Oe.prototype.visitInt64=null;Oe.prototype.visitUint8=null;Oe.prototype.visitUint16=null;Oe.prototype.visitUint32=null;Oe.prototype.visitUint64=null;Oe.prototype.visitFloat16=null;Oe.prototype.visitFloat32=null;Oe.prototype.visitFloat64=null;Oe.prototype.visitDateDay=null;Oe.prototype.visitDateMillisecond=null;Oe.prototype.visitTimestampSecond=null;Oe.prototype.visitTimestampMillisecond=null;Oe.prototype.visitTimestampMicrosecond=null;Oe.prototype.visitTimestampNanosecond=null;Oe.prototype.visitTimeSecond=null;Oe.prototype.visitTimeMillisecond=null;Oe.prototype.visitTimeMicrosecond=null;Oe.prototype.visitTimeNanosecond=null;Oe.prototype.visitDenseUnion=null;Oe.prototype.visitSparseUnion=null;Oe.prototype.visitIntervalDayTime=null;Oe.prototype.visitIntervalYearMonth=null;Oe.prototype.visitDuration=null;Oe.prototype.visitDurationSecond=null;Oe.prototype.visitDurationMillisecond=null;Oe.prototype.visitDurationMicrosecond=null;Oe.prototype.visitDurationNanosecond=null;const vv=new Float64Array(1),yr=new Uint32Array(vv.buffer);function bv(n){const e=(n&31744)>>10,t=(n&1023)/1024,s=Math.pow(-1,(n&32768)>>15);switch(e){case 31:return s*(t?Number.NaN:1/0);case 0:return s*(t?6103515625e-14*t:0)}return s*Math.pow(2,e-15)*(1+t)}function ZS(n){if(n!==n)return 32256;vv[0]=n;const e=(yr[1]&2147483648)>>16&65535;let t=yr[1]&2146435072,s=0;return t>=1089470464?yr[0]>0?t=31744:(t=(t&2080374784)>>16,s=(yr[1]&1048575)>>10):t<=1056964608?(s=1048576+(yr[1]&1048575),s=1048576+(s<<(t>>20)-998)>>21,t=0):(t=t-1056964608>>10,s=(yr[1]&1048575)+512>>10),e|t|s&65535}class ve extends Oe{}function we(n){return(e,t,s)=>{if(e.setValid(t,s!=null))return n(e,t,s)}}const e2=(n,e,t)=>{n[e]=Math.floor(t/864e5)},_v=(n,e,t,s)=>{if(t+1<e.length){const i=et(e[t]),a=et(e[t+1]);n.set(s.subarray(0,a-i),i)}},t2=({offset:n,values:e},t,s)=>{const i=n+t;s?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},Ms=({values:n},e,t)=>{n[e]=t},kf=({values:n},e,t)=>{n[e]=t},wv=({values:n},e,t)=>{n[e]=ZS(t)},n2=(n,e,t)=>{switch(n.type.precision){case Pt.HALF:return wv(n,e,t);case Pt.SINGLE:case Pt.DOUBLE:return kf(n,e,t)}},Sv=({values:n},e,t)=>{e2(n,e,t.valueOf())},Nv=({values:n},e,t)=>{n[e]=BigInt(t)},s2=({stride:n,values:e},t,s)=>{e.set(s.subarray(0,n),n*t)},Iv=({values:n,valueOffsets:e},t,s)=>_v(n,e,t,s),Ev=({values:n,valueOffsets:e},t,s)=>_v(n,e,t,Sf(s)),i2=(n,e,t)=>{n.type.unit===Tn.DAY?Sv(n,e,t):Nv(n,e,t)},kv=({values:n},e,t)=>{n[e]=BigInt(t/1e3)},Tv=({values:n},e,t)=>{n[e]=BigInt(t)},jv=({values:n},e,t)=>{n[e]=BigInt(t*1e3)},Mv=({values:n},e,t)=>{n[e]=BigInt(t*1e6)},r2=(n,e,t)=>{switch(n.type.unit){case xe.SECOND:return kv(n,e,t);case xe.MILLISECOND:return Tv(n,e,t);case xe.MICROSECOND:return jv(n,e,t);case xe.NANOSECOND:return Mv(n,e,t)}},Cv=({values:n},e,t)=>{n[e]=t},Ov=({values:n},e,t)=>{n[e]=t},Dv=({values:n},e,t)=>{n[e]=t},Rv=({values:n},e,t)=>{n[e]=t},o2=(n,e,t)=>{switch(n.type.unit){case xe.SECOND:return Cv(n,e,t);case xe.MILLISECOND:return Ov(n,e,t);case xe.MICROSECOND:return Dv(n,e,t);case xe.NANOSECOND:return Rv(n,e,t)}},a2=({values:n,stride:e},t,s)=>{n.set(s.subarray(0,e),e*t)},l2=(n,e,t)=>{const s=n.children[0],i=n.valueOffsets,a=jn.getVisitFn(s);if(Array.isArray(t))for(let l=-1,c=i[e],d=i[e+1];c<d;)a(s,c++,t[++l]);else for(let l=-1,c=i[e],d=i[e+1];c<d;)a(s,c++,t.get(++l))},c2=(n,e,t)=>{const s=n.children[0],{valueOffsets:i}=n,a=jn.getVisitFn(s);let{[e]:l,[e+1]:c}=i;const d=t instanceof Map?t.entries():Object.entries(t);for(const f of d)if(a(s,l,f),++l>=c)break},u2=(n,e)=>(t,s,i,a)=>s&&t(s,n,e[a]),d2=(n,e)=>(t,s,i,a)=>s&&t(s,n,e.get(a)),h2=(n,e)=>(t,s,i,a)=>s&&t(s,n,e.get(i.name)),f2=(n,e)=>(t,s,i,a)=>s&&t(s,n,e[i.name]),p2=(n,e,t)=>{const s=n.type.children.map(a=>jn.getVisitFn(a.type)),i=t instanceof Map?h2(e,t):t instanceof He?d2(e,t):Array.isArray(t)?u2(e,t):f2(e,t);n.type.children.forEach((a,l)=>i(s[l],n.children[l],a,l))},m2=(n,e,t)=>{n.type.mode===Ut.Dense?Av(n,e,t):Lv(n,e,t)},Av=(n,e,t)=>{const s=n.type.typeIdToChildIndex[n.typeIds[e]],i=n.children[s];jn.visit(i,n.valueOffsets[e],t)},Lv=(n,e,t)=>{const s=n.type.typeIdToChildIndex[n.typeIds[e]],i=n.children[s];jn.visit(i,e,t)},g2=(n,e,t)=>{var s;(s=n.dictionary)===null||s===void 0||s.set(n.values[e],t)},y2=(n,e,t)=>{n.type.unit===ls.DAY_TIME?Bv(n,e,t):Fv(n,e,t)},Bv=({values:n},e,t)=>{n.set(t.subarray(0,2),2*e)},Fv=({values:n},e,t)=>{n[e]=t[0]*12+t[1]%12},Pv=({values:n},e,t)=>{n[e]=t},Uv=({values:n},e,t)=>{n[e]=t},zv=({values:n},e,t)=>{n[e]=t},$v=({values:n},e,t)=>{n[e]=t},x2=(n,e,t)=>{switch(n.type.unit){case xe.SECOND:return Pv(n,e,t);case xe.MILLISECOND:return Uv(n,e,t);case xe.MICROSECOND:return zv(n,e,t);case xe.NANOSECOND:return $v(n,e,t)}},v2=(n,e,t)=>{const{stride:s}=n,i=n.children[0],a=jn.getVisitFn(i);if(Array.isArray(t))for(let l=-1,c=e*s;++l<s;)a(i,c+l,t[l]);else for(let l=-1,c=e*s;++l<s;)a(i,c+l,t.get(l))};ve.prototype.visitBool=we(t2);ve.prototype.visitInt=we(Ms);ve.prototype.visitInt8=we(Ms);ve.prototype.visitInt16=we(Ms);ve.prototype.visitInt32=we(Ms);ve.prototype.visitInt64=we(Ms);ve.prototype.visitUint8=we(Ms);ve.prototype.visitUint16=we(Ms);ve.prototype.visitUint32=we(Ms);ve.prototype.visitUint64=we(Ms);ve.prototype.visitFloat=we(n2);ve.prototype.visitFloat16=we(wv);ve.prototype.visitFloat32=we(kf);ve.prototype.visitFloat64=we(kf);ve.prototype.visitUtf8=we(Ev);ve.prototype.visitLargeUtf8=we(Ev);ve.prototype.visitBinary=we(Iv);ve.prototype.visitLargeBinary=we(Iv);ve.prototype.visitFixedSizeBinary=we(s2);ve.prototype.visitDate=we(i2);ve.prototype.visitDateDay=we(Sv);ve.prototype.visitDateMillisecond=we(Nv);ve.prototype.visitTimestamp=we(r2);ve.prototype.visitTimestampSecond=we(kv);ve.prototype.visitTimestampMillisecond=we(Tv);ve.prototype.visitTimestampMicrosecond=we(jv);ve.prototype.visitTimestampNanosecond=we(Mv);ve.prototype.visitTime=we(o2);ve.prototype.visitTimeSecond=we(Cv);ve.prototype.visitTimeMillisecond=we(Ov);ve.prototype.visitTimeMicrosecond=we(Dv);ve.prototype.visitTimeNanosecond=we(Rv);ve.prototype.visitDecimal=we(a2);ve.prototype.visitList=we(l2);ve.prototype.visitStruct=we(p2);ve.prototype.visitUnion=we(m2);ve.prototype.visitDenseUnion=we(Av);ve.prototype.visitSparseUnion=we(Lv);ve.prototype.visitDictionary=we(g2);ve.prototype.visitInterval=we(y2);ve.prototype.visitIntervalDayTime=we(Bv);ve.prototype.visitIntervalYearMonth=we(Fv);ve.prototype.visitDuration=we(x2);ve.prototype.visitDurationSecond=we(Pv);ve.prototype.visitDurationMillisecond=we(Uv);ve.prototype.visitDurationMicrosecond=we(zv);ve.prototype.visitDurationNanosecond=we($v);ve.prototype.visitFixedSizeList=we(v2);ve.prototype.visitMap=we(c2);const jn=new ve,Pn=Symbol.for("parent"),Rr=Symbol.for("rowIndex");class Tf{constructor(e,t){return this[Pn]=e,this[Rr]=t,new Proxy(this,new _2)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Rr],t=this[Pn],s=t.type.children,i={};for(let a=-1,l=s.length;++a<l;)i[s[a].name]=on.visit(t.children[a],e);return i}toString(){return`{${[...this].map(([e,t])=>`${ca(e)}: ${ca(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new b2(this[Pn],this[Rr])}}class b2{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,on.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Tf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Pn]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Rr]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class _2{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Pn].type.children.map(t=>t.name)}has(e,t){return e[Pn].type.children.findIndex(s=>s.name===t)!==-1}getOwnPropertyDescriptor(e,t){if(e[Pn].type.children.findIndex(s=>s.name===t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const s=e[Pn].type.children.findIndex(i=>i.name===t);if(s!==-1){const i=on.visit(e[Pn].children[s],e[Rr]);return Reflect.set(e,t,i),i}}set(e,t,s){const i=e[Pn].type.children.findIndex(a=>a.name===t);return i!==-1?(jn.visit(e[Pn].children[i],e[Rr],s),Reflect.set(e,t,s)):Reflect.has(e,t)||typeof t=="symbol"?Reflect.set(e,t,s):!1}}class pe extends Oe{}function be(n){return(e,t)=>e.getValid(t)?n(e,t):null}const w2=(n,e)=>864e5*n[e],S2=(n,e)=>null,Hv=(n,e,t)=>{if(t+1>=e.length)return null;const s=et(e[t]),i=et(e[t+1]);return n.subarray(s,i)},N2=({offset:n,values:e},t)=>{const s=n+t;return(e[s>>3]&1<<s%8)!==0},Vv=({values:n},e)=>w2(n,e),Wv=({values:n},e)=>et(n[e]),gi=({stride:n,values:e},t)=>e[n*t],I2=({stride:n,values:e},t)=>bv(e[n*t]),qv=({values:n},e)=>n[e],E2=({stride:n,values:e},t)=>e.subarray(n*t,n*(t+1)),Yv=({values:n,valueOffsets:e},t)=>Hv(n,e,t),Qv=({values:n,valueOffsets:e},t)=>{const s=Hv(n,e,t);return s!==null?Xh(s):null},k2=({values:n},e)=>n[e],T2=({type:n,values:e},t)=>n.precision!==Pt.HALF?e[t]:bv(e[t]),j2=(n,e)=>n.type.unit===Tn.DAY?Vv(n,e):Wv(n,e),Kv=({values:n},e)=>1e3*et(n[e]),Gv=({values:n},e)=>et(n[e]),Xv=({values:n},e)=>Kx(n[e],BigInt(1e3)),Jv=({values:n},e)=>Kx(n[e],BigInt(1e6)),M2=(n,e)=>{switch(n.type.unit){case xe.SECOND:return Kv(n,e);case xe.MILLISECOND:return Gv(n,e);case xe.MICROSECOND:return Xv(n,e);case xe.NANOSECOND:return Jv(n,e)}},Zv=({values:n},e)=>n[e],eb=({values:n},e)=>n[e],tb=({values:n},e)=>n[e],nb=({values:n},e)=>n[e],C2=(n,e)=>{switch(n.type.unit){case xe.SECOND:return Zv(n,e);case xe.MILLISECOND:return eb(n,e);case xe.MICROSECOND:return tb(n,e);case xe.NANOSECOND:return nb(n,e)}},O2=({values:n,stride:e},t)=>Ef.decimal(n.subarray(e*t,e*(t+1))),D2=(n,e)=>{const{valueOffsets:t,stride:s,children:i}=n,{[e*s]:a,[e*s+1]:l}=t,d=i[0].slice(a,l-a);return new He([d])},R2=(n,e)=>{const{valueOffsets:t,children:s}=n,{[e]:i,[e+1]:a}=t,l=s[0];return new jf(l.slice(i,a-i))},A2=(n,e)=>new Tf(n,e),L2=(n,e)=>n.type.mode===Ut.Dense?sb(n,e):ib(n,e),sb=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],s=n.children[t];return on.visit(s,n.valueOffsets[e])},ib=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],s=n.children[t];return on.visit(s,e)},B2=(n,e)=>{var t;return(t=n.dictionary)===null||t===void 0?void 0:t.get(n.values[e])},F2=(n,e)=>n.type.unit===ls.DAY_TIME?rb(n,e):ob(n,e),rb=({values:n},e)=>n.subarray(2*e,2*(e+1)),ob=({values:n},e)=>{const t=n[e],s=new Int32Array(2);return s[0]=Math.trunc(t/12),s[1]=Math.trunc(t%12),s},ab=({values:n},e)=>n[e],lb=({values:n},e)=>n[e],cb=({values:n},e)=>n[e],ub=({values:n},e)=>n[e],P2=(n,e)=>{switch(n.type.unit){case xe.SECOND:return ab(n,e);case xe.MILLISECOND:return lb(n,e);case xe.MICROSECOND:return cb(n,e);case xe.NANOSECOND:return ub(n,e)}},U2=(n,e)=>{const{stride:t,children:s}=n,a=s[0].slice(e*t,t);return new He([a])};pe.prototype.visitNull=be(S2);pe.prototype.visitBool=be(N2);pe.prototype.visitInt=be(k2);pe.prototype.visitInt8=be(gi);pe.prototype.visitInt16=be(gi);pe.prototype.visitInt32=be(gi);pe.prototype.visitInt64=be(qv);pe.prototype.visitUint8=be(gi);pe.prototype.visitUint16=be(gi);pe.prototype.visitUint32=be(gi);pe.prototype.visitUint64=be(qv);pe.prototype.visitFloat=be(T2);pe.prototype.visitFloat16=be(I2);pe.prototype.visitFloat32=be(gi);pe.prototype.visitFloat64=be(gi);pe.prototype.visitUtf8=be(Qv);pe.prototype.visitLargeUtf8=be(Qv);pe.prototype.visitBinary=be(Yv);pe.prototype.visitLargeBinary=be(Yv);pe.prototype.visitFixedSizeBinary=be(E2);pe.prototype.visitDate=be(j2);pe.prototype.visitDateDay=be(Vv);pe.prototype.visitDateMillisecond=be(Wv);pe.prototype.visitTimestamp=be(M2);pe.prototype.visitTimestampSecond=be(Kv);pe.prototype.visitTimestampMillisecond=be(Gv);pe.prototype.visitTimestampMicrosecond=be(Xv);pe.prototype.visitTimestampNanosecond=be(Jv);pe.prototype.visitTime=be(C2);pe.prototype.visitTimeSecond=be(Zv);pe.prototype.visitTimeMillisecond=be(eb);pe.prototype.visitTimeMicrosecond=be(tb);pe.prototype.visitTimeNanosecond=be(nb);pe.prototype.visitDecimal=be(O2);pe.prototype.visitList=be(D2);pe.prototype.visitStruct=be(A2);pe.prototype.visitUnion=be(L2);pe.prototype.visitDenseUnion=be(sb);pe.prototype.visitSparseUnion=be(ib);pe.prototype.visitDictionary=be(B2);pe.prototype.visitInterval=be(F2);pe.prototype.visitIntervalDayTime=be(rb);pe.prototype.visitIntervalYearMonth=be(ob);pe.prototype.visitDuration=be(P2);pe.prototype.visitDurationSecond=be(ab);pe.prototype.visitDurationMillisecond=be(lb);pe.prototype.visitDurationMicrosecond=be(cb);pe.prototype.visitDurationNanosecond=be(ub);pe.prototype.visitFixedSizeList=be(U2);pe.prototype.visitMap=be(R2);const on=new pe,jr=Symbol.for("keys"),Ar=Symbol.for("vals"),Mr=Symbol.for("kKeysAsStrings"),sf=Symbol.for("_kKeysAsStrings");class jf{constructor(e){return this[jr]=new He([e.children[0]]).memoize(),this[Ar]=e.children[1],new Proxy(this,new $2)}get[Mr](){return this[sf]||(this[sf]=Array.from(this[jr].toArray(),String))}[Symbol.iterator](){return new z2(this[jr],this[Ar])}get size(){return this[jr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[jr],t=this[Ar],s={};for(let i=-1,a=e.length;++i<a;)s[e.get(i)]=on.visit(t,i);return s}toString(){return`{${[...this].map(([e,t])=>`${ca(e)}: ${ca(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class z2{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),on.visit(this.vals,e)]})}}class $2{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Mr]}has(e,t){return e[Mr].includes(t)}getOwnPropertyDescriptor(e,t){if(e[Mr].indexOf(t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const s=e[Mr].indexOf(t);if(s!==-1){const i=on.visit(Reflect.get(e,Ar),s);return Reflect.set(e,t,i),i}}set(e,t,s){const i=e[Mr].indexOf(t);return i!==-1?(jn.visit(Reflect.get(e,Ar),i,s),Reflect.set(e,t,s)):Reflect.has(e,t)?Reflect.set(e,t,s):!1}}Object.defineProperties(jf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[jr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ar]:{writable:!0,enumerable:!1,configurable:!1,value:null},[sf]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let q0;function db(n,e,t,s){const{length:i=0}=n;let a=typeof e!="number"?0:e,l=typeof t!="number"?i:t;return a<0&&(a=(a%i+i)%i),l<0&&(l=(l%i+i)%i),l<a&&(q0=a,a=l,l=q0),l>i&&(l=i),s?s(n,a,l):[a,l]}const Mf=(n,e)=>n<0?e+n:n,Y0=n=>n!==n;function Qr(n){if(typeof n!=="object"||n===null)return Y0(n)?Y0:t=>t===n;if(n instanceof Date){const t=n.valueOf();return s=>s instanceof Date?s.valueOf()===t:!1}return ArrayBuffer.isView(n)?t=>t?US(n,t):!1:n instanceof Map?V2(n):Array.isArray(n)?H2(n):n instanceof He?W2(n):q2(n,!0)}function H2(n){const e=[];for(let t=-1,s=n.length;++t<s;)e[t]=Qr(n[t]);return du(e)}function V2(n){let e=-1;const t=[];for(const s of n.values())t[++e]=Qr(s);return du(t)}function W2(n){const e=[];for(let t=-1,s=n.length;++t<s;)e[t]=Qr(n.get(t));return du(e)}function q2(n,e=!1){const t=Object.keys(n);if(!e&&t.length===0)return()=>!1;const s=[];for(let i=-1,a=t.length;++i<a;)s[i]=Qr(n[t[i]]);return du(s,t)}function du(n,e){return t=>{if(!t||typeof t!="object")return!1;switch(t.constructor){case Array:return Y2(n,t);case Map:return Q0(n,t,t.keys());case jf:case Tf:case Object:case void 0:return Q0(n,t,e||Object.keys(t))}return t instanceof He?Q2(n,t):!1}}function Y2(n,e){const t=n.length;if(e.length!==t)return!1;for(let s=-1;++s<t;)if(!n[s](e[s]))return!1;return!0}function Q2(n,e){const t=n.length;if(e.length!==t)return!1;for(let s=-1;++s<t;)if(!n[s](e.get(s)))return!1;return!0}function Q0(n,e,t){const s=t[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),a=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let l=0;const c=n.length;let d=a.next(),f=s.next(),m=i.next();for(;l<c&&!f.done&&!m.done&&!d.done&&!(f.value!==m.value||!n[l](d.value));++l,f=s.next(),m=i.next(),d=a.next());return l===c&&f.done&&m.done&&d.done?!0:(s.return&&s.return(),i.return&&i.return(),a.return&&a.return(),!1)}function hb(n,e,t,s){return(t&1<<s)!==0}function K2(n,e,t,s){return(t&1<<s)>>s}function Hc(n,e,t){const s=t.byteLength+7&-8;if(n>0||t.byteLength<s){const i=new Uint8Array(s);return i.set(n%8===0?t.subarray(n>>3):Vc(new Cf(t,n,e,null,hb)).subarray(0,s)),i}return t}function Vc(n){const e=[];let t=0,s=0,i=0;for(const l of n)l&&(i|=1<<s),++s===8&&(e[t++]=i,i=s=0);(t===0||s>0)&&(e[t++]=i);const a=new Uint8Array(e.length+7&-8);return a.set(e),a}class Cf{constructor(e,t,s,i,a){this.bytes=e,this.length=s,this.context=i,this.get=a,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function rf(n,e,t){if(t-e<=0)return 0;if(t-e<8){let a=0;for(const l of new Cf(n,e,t-e,n,K2))a+=l;return a}const s=t>>3<<3,i=e+(e%8===0?0:8-e%8);return rf(n,e,i)+rf(n,s,t)+G2(n,i>>3,s-i>>3)}function G2(n,e,t){let s=0,i=Math.trunc(e);const a=new DataView(n.buffer,n.byteOffset,n.byteLength),l=t===void 0?n.byteLength:i+t;for(;l-i>=4;)s+=Eh(a.getUint32(i)),i+=4;for(;l-i>=2;)s+=Eh(a.getUint16(i)),i+=2;for(;l-i>=1;)s+=Eh(a.getUint8(i)),i+=1;return s}function Eh(n){let e=Math.trunc(n);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const X2=-1;class Ke{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return ue.isSparseUnion(e)?this.children.some(t=>t.nullable):ue.isDenseUnion(e)?this.children.some(t=>t.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:t,values:s,nullBitmap:i,typeIds:a}=this;return t&&(e+=t.byteLength),s&&(e+=s.byteLength),i&&(e+=i.byteLength),a&&(e+=a.byteLength),this.children.reduce((l,c)=>l+c.byteLength,e)}get nullCount(){if(ue.isUnion(this.type))return this.children.reduce((s,i)=>s+i.nullCount,0);let e=this._nullCount,t;return e<=X2&&(t=this.nullBitmap)&&(this._nullCount=e=t.length===0?0:this.length-rf(t,this.offset,this.offset+this.length)),e}constructor(e,t,s,i,a,l=[],c){this.type=e,this.children=l,this.dictionary=c,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(s||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let d;a instanceof Ke?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=Ns(e),a&&((d=a[0])&&(this.valueOffsets=d),(d=a[1])&&(this.values=d),(d=a[2])&&(this.nullBitmap=d),(d=a[3])&&(this.typeIds=d)))}getValid(e){const{type:t}=this;if(ue.isUnion(t)){const s=t,i=this.children[s.typeIdToChildIndex[this.typeIds[e]]],a=s.mode===Ut.Dense?this.valueOffsets[e]:e;return i.getValid(a)}if(this.nullable&&this.nullCount>0){const s=this.offset+e;return(this.nullBitmap[s>>3]&1<<s%8)!==0}return!0}setValid(e,t){let s;const{type:i}=this;if(ue.isUnion(i)){const a=i,l=this.children[a.typeIdToChildIndex[this.typeIds[e]]],c=a.mode===Ut.Dense?this.valueOffsets[e]:e;s=l.getValid(c),l.setValid(c,t)}else{let{nullBitmap:a}=this;const{offset:l,length:c}=this,d=l+e,f=1<<d%8,m=d>>3;(!a||a.byteLength<=m)&&(a=new Uint8Array((l+c+63&-64)>>3).fill(255),this.nullCount>0?(a.set(Hc(l,c,this.nullBitmap),0),Object.assign(this,{nullBitmap:a})):Object.assign(this,{nullBitmap:a,_nullCount:0}));const y=a[m];s=(y&f)!==0,a[m]=t?y|f:y&~f}return s!==!!t&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(e=this.type,t=this.offset,s=this.length,i=this._nullCount,a=this,l=this.children){return new Ke(e,t,s,i,a,l,this.dictionary)}slice(e,t){const{stride:s,typeId:i,children:a}=this,l=+(this._nullCount===0)-1,c=i===16?s:1,d=this._sliceBuffers(e,t,s,i);return this.clone(this.type,this.offset+e,t,l,d,a.length===0||this.valueOffsets?a:this._sliceChildren(a,c*e,c*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===T.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:s}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);i[t>>3]=(1<<t-(t&-8))-1,s>0&&i.set(Hc(this.offset,t,this.nullBitmap),0);const a=this.buffers;return a[Ss.VALIDITY]=i,this.clone(this.type,0,e,s+(e-t),a)}_sliceBuffers(e,t,s,i){let a;const{buffers:l}=this;return(a=l[Ss.TYPE])&&(l[Ss.TYPE]=a.subarray(e,e+t)),(a=l[Ss.OFFSET])&&(l[Ss.OFFSET]=a.subarray(e,e+t+1))||(a=l[Ss.DATA])&&(l[Ss.DATA]=i===6?a:a.subarray(s*e,s*(e+t))),l}_sliceChildren(e,t,s){return e.map(i=>i.slice(t,s))}}Ke.prototype.children=Object.freeze([]);class ta extends Oe{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:t,["offset"]:s=0,["length"]:i=0}=e;return new Ke(t,s,i,i)}visitBool(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length>>3,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitInt(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitFloat(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitUtf8(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.data),a=Le(e.nullBitmap),l=Bo(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,i,a])}visitLargeUtf8(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.data),a=Le(e.nullBitmap),l=A0(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,i,a])}visitBinary(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.data),a=Le(e.nullBitmap),l=Bo(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,i,a])}visitLargeBinary(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.data),a=Le(e.nullBitmap),l=A0(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,i,a])}visitFixedSizeBinary(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitDate(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitTimestamp(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitTime(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitDecimal(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitList(e){const{["type"]:t,["offset"]:s=0,["child"]:i}=e,a=Le(e.nullBitmap),l=Bo(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,void 0,a],[i])}visitStruct(e){const{["type"]:t,["offset"]:s=0,["children"]:i=[]}=e,a=Le(e.nullBitmap),{length:l=i.reduce((d,{length:f})=>Math.max(d,f),0),nullCount:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,void 0,a],i)}visitUnion(e){const{["type"]:t,["offset"]:s=0,["children"]:i=[]}=e,a=Xe(t.ArrayType,e.typeIds),{["length"]:l=a.length,["nullCount"]:c=-1}=e;if(ue.isSparseUnion(t))return new Ke(t,s,l,c,[void 0,void 0,void 0,a],i);const d=Bo(e.valueOffsets);return new Ke(t,s,l,c,[d,void 0,void 0,a],i)}visitDictionary(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.indices.ArrayType,e.data),{["dictionary"]:l=new He([new ta().visit({type:t.dictionary})])}=e,{["length"]:c=a.length,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[void 0,a,i],[],l)}visitInterval(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitDuration(e){const{["type"]:t,["offset"]:s=0}=e,i=Le(e.nullBitmap),a=Xe(t.ArrayType,e.data),{["length"]:l=a.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,a,i])}visitFixedSizeList(e){const{["type"]:t,["offset"]:s=0,["child"]:i=new ta().visit({type:t.valueType})}=e,a=Le(e.nullBitmap),{["length"]:l=i.length/Ns(t),["nullCount"]:c=e.nullBitmap?-1:0}=e;return new Ke(t,s,l,c,[void 0,void 0,a],[i])}visitMap(e){const{["type"]:t,["offset"]:s=0,["child"]:i=new ta().visit({type:t.childType})}=e,a=Le(e.nullBitmap),l=Bo(e.valueOffsets),{["length"]:c=l.length-1,["nullCount"]:d=e.nullBitmap?-1:0}=e;return new Ke(t,s,c,d,[l,void 0,a],[i])}}const J2=new ta;function Ae(n){return J2.visit(n)}class K0{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Z2(n){return n.some(e=>e.nullable)}function fb(n){return n.reduce((e,t)=>e+t.nullCount,0)}function pb(n){return n.reduce((e,t,s)=>(e[s+1]=e[s]+t.length,e),new Uint32Array(n.length+1))}function mb(n,e,t,s){const i=[];for(let a=-1,l=n.length;++a<l;){const c=n[a],d=e[a],{length:f}=c;if(d>=s)break;if(t>=d+f)continue;if(d>=t&&d+f<=s){i.push(c);continue}const m=Math.max(0,t-d),y=Math.min(s-d,f);i.push(c.slice(m,y-m))}return i.length===0&&i.push(n[0].slice(0,0)),i}function Of(n,e,t,s){let i=0,a=0,l=e.length-1;do{if(i>=l-1)return t<e[l]?s(n,i,t-e[i]):null;a=i+Math.trunc((l-i)*.5),t<e[a]?l=a:i=a}while(i<l)}function Df(n,e){return n.getValid(e)}function Wc(n){function e(t,s,i){return n(t[s],i)}return function(t){const s=this.data;return Of(s,this._offsets,t,e)}}function gb(n){let e;function t(s,i,a){return n(s[i],a,e)}return function(s,i){const a=this.data;e=i;const l=Of(a,this._offsets,s,t);return e=void 0,l}}function yb(n){let e;function t(s,i,a){let l=a,c=0,d=0;for(let f=i-1,m=s.length;++f<m;){const y=s[f];if(~(c=n(y,e,l)))return d+c;l=0,d+=y.length}return-1}return function(s,i){e=s;const a=this.data,l=typeof i!="number"?t(a,0,0):Of(a,this._offsets,i,t);return e=void 0,l}}class me extends Oe{}function eN(n,e){return e===null&&n.length>0?0:-1}function tN(n,e){const{nullBitmap:t}=n;if(!t||n.nullCount<=0)return-1;let s=0;for(const i of new Cf(t,n.offset+(e||0),n.length,t,hb)){if(!i)return s;++s}return-1}function Ee(n,e,t){if(e===void 0)return-1;if(e===null)switch(n.typeId){case T.Union:break;case T.Dictionary:break;default:return tN(n,t)}const s=on.getVisitFn(n),i=Qr(e);for(let a=(t||0)-1,l=n.length;++a<l;)if(i(s(n,a)))return a;return-1}function xb(n,e,t){const s=on.getVisitFn(n),i=Qr(e);for(let a=(t||0)-1,l=n.length;++a<l;)if(i(s(n,a)))return a;return-1}me.prototype.visitNull=eN;me.prototype.visitBool=Ee;me.prototype.visitInt=Ee;me.prototype.visitInt8=Ee;me.prototype.visitInt16=Ee;me.prototype.visitInt32=Ee;me.prototype.visitInt64=Ee;me.prototype.visitUint8=Ee;me.prototype.visitUint16=Ee;me.prototype.visitUint32=Ee;me.prototype.visitUint64=Ee;me.prototype.visitFloat=Ee;me.prototype.visitFloat16=Ee;me.prototype.visitFloat32=Ee;me.prototype.visitFloat64=Ee;me.prototype.visitUtf8=Ee;me.prototype.visitLargeUtf8=Ee;me.prototype.visitBinary=Ee;me.prototype.visitLargeBinary=Ee;me.prototype.visitFixedSizeBinary=Ee;me.prototype.visitDate=Ee;me.prototype.visitDateDay=Ee;me.prototype.visitDateMillisecond=Ee;me.prototype.visitTimestamp=Ee;me.prototype.visitTimestampSecond=Ee;me.prototype.visitTimestampMillisecond=Ee;me.prototype.visitTimestampMicrosecond=Ee;me.prototype.visitTimestampNanosecond=Ee;me.prototype.visitTime=Ee;me.prototype.visitTimeSecond=Ee;me.prototype.visitTimeMillisecond=Ee;me.prototype.visitTimeMicrosecond=Ee;me.prototype.visitTimeNanosecond=Ee;me.prototype.visitDecimal=Ee;me.prototype.visitList=Ee;me.prototype.visitStruct=Ee;me.prototype.visitUnion=Ee;me.prototype.visitDenseUnion=xb;me.prototype.visitSparseUnion=xb;me.prototype.visitDictionary=Ee;me.prototype.visitInterval=Ee;me.prototype.visitIntervalDayTime=Ee;me.prototype.visitIntervalYearMonth=Ee;me.prototype.visitDuration=Ee;me.prototype.visitDurationSecond=Ee;me.prototype.visitDurationMillisecond=Ee;me.prototype.visitDurationMicrosecond=Ee;me.prototype.visitDurationNanosecond=Ee;me.prototype.visitFixedSizeList=Ee;me.prototype.visitMap=Ee;const qc=new me;class ge extends Oe{}function _e(n){const{type:e}=n;if(n.nullCount===0&&n.stride===1&&(ue.isInt(e)&&e.bitWidth!==64||ue.isTime(e)&&e.bitWidth!==64||ue.isFloat(e)&&e.precision!==Pt.HALF))return new K0(n.data.length,s=>{const i=n.data[s];return i.values.subarray(0,i.length)[Symbol.iterator]()});let t=0;return new K0(n.data.length,s=>{const a=n.data[s].length,l=n.slice(t,t+a);return t+=a,new nN(l)})}class nN{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ge.prototype.visitNull=_e;ge.prototype.visitBool=_e;ge.prototype.visitInt=_e;ge.prototype.visitInt8=_e;ge.prototype.visitInt16=_e;ge.prototype.visitInt32=_e;ge.prototype.visitInt64=_e;ge.prototype.visitUint8=_e;ge.prototype.visitUint16=_e;ge.prototype.visitUint32=_e;ge.prototype.visitUint64=_e;ge.prototype.visitFloat=_e;ge.prototype.visitFloat16=_e;ge.prototype.visitFloat32=_e;ge.prototype.visitFloat64=_e;ge.prototype.visitUtf8=_e;ge.prototype.visitLargeUtf8=_e;ge.prototype.visitBinary=_e;ge.prototype.visitLargeBinary=_e;ge.prototype.visitFixedSizeBinary=_e;ge.prototype.visitDate=_e;ge.prototype.visitDateDay=_e;ge.prototype.visitDateMillisecond=_e;ge.prototype.visitTimestamp=_e;ge.prototype.visitTimestampSecond=_e;ge.prototype.visitTimestampMillisecond=_e;ge.prototype.visitTimestampMicrosecond=_e;ge.prototype.visitTimestampNanosecond=_e;ge.prototype.visitTime=_e;ge.prototype.visitTimeSecond=_e;ge.prototype.visitTimeMillisecond=_e;ge.prototype.visitTimeMicrosecond=_e;ge.prototype.visitTimeNanosecond=_e;ge.prototype.visitDecimal=_e;ge.prototype.visitList=_e;ge.prototype.visitStruct=_e;ge.prototype.visitUnion=_e;ge.prototype.visitDenseUnion=_e;ge.prototype.visitSparseUnion=_e;ge.prototype.visitDictionary=_e;ge.prototype.visitInterval=_e;ge.prototype.visitIntervalDayTime=_e;ge.prototype.visitIntervalYearMonth=_e;ge.prototype.visitDuration=_e;ge.prototype.visitDurationSecond=_e;ge.prototype.visitDurationMillisecond=_e;ge.prototype.visitDurationMicrosecond=_e;ge.prototype.visitDurationNanosecond=_e;ge.prototype.visitFixedSizeList=_e;ge.prototype.visitMap=_e;const Rf=new ge;var vb;const bb={},_b={};class He{constructor(e){var t,s,i;const a=e[0]instanceof He?e.flatMap(c=>c.data):e;if(a.length===0||a.some(c=>!(c instanceof Ke)))throw new TypeError("Vector constructor expects an Array of Data instances.");const l=(t=a[0])===null||t===void 0?void 0:t.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:c,set:d,indexOf:f}=bb[l.typeId],m=a[0];this.isValid=y=>Df(m,y),this.get=y=>c(m,y),this.set=(y,x)=>d(m,y,x),this.indexOf=y=>f(m,y),this._offsets=[0,m.length];break}default:Object.setPrototypeOf(this,_b[l.typeId]),this._offsets=pb(a);break}this.data=a,this.type=l,this.stride=Ns(l),this.numChildren=(i=(s=l.children)===null||s===void 0?void 0:s.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,t)=>e+t.byteLength,0)}get nullable(){return Z2(this.data)}get nullCount(){return fb(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${T[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(Mf(e,this.length))}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return Rf.visit(this)}concat(...e){return new He(this.data.concat(e.flatMap(t=>t.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new He(db(this,e,t,({data:s,_offsets:i},a,l)=>mb(s,i,a,l)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:s,stride:i,ArrayType:a}=this;switch(e.typeId){case T.Int:case T.Float:case T.Decimal:case T.Time:case T.Timestamp:switch(t.length){case 0:return new a;case 1:return t[0].values.subarray(0,s*i);default:return t.reduce((l,{values:c,length:d})=>(l.array.set(c.subarray(0,d*i),l.offset),l.offset+=d*i,l),{array:new a(s*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt((t=this.type.children)===null||t===void 0?void 0:t.findIndex(s=>s.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new He(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return ue.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ue.isDictionary(this.type)){const e=new Yc(this.data[0].dictionary),t=this.data.map(s=>{const i=s.clone();return i.dictionary=e,i});return new He(t)}return new Yc(this)}unmemoize(){if(ue.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(s=>{const i=s.clone();return i.dictionary=e,i});return new He(t)}return this}}vb=Symbol.toStringTag;He[vb]=(n=>{n.type=ue.prototype,n.data=[],n.length=0,n.stride=1,n.numChildren=0,n._offsets=new Uint32Array([0]),n[Symbol.isConcatSpreadable]=!0;const e=Object.keys(T).map(t=>T[t]).filter(t=>typeof t=="number"&&t!==T.NONE);for(const t of e){const s=on.getVisitFnByTypeId(t),i=jn.getVisitFnByTypeId(t),a=qc.getVisitFnByTypeId(t);bb[t]={get:s,set:i,indexOf:a},_b[t]=Object.create(n,{isValid:{value:Wc(Df)},get:{value:Wc(on.getVisitFnByTypeId(t))},set:{value:gb(jn.getVisitFnByTypeId(t))},indexOf:{value:yb(qc.getVisitFnByTypeId(t))}})}return"Vector"})(He.prototype);class Yc extends He{constructor(e){super(e.data);const t=this.get,s=this.set,i=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(l){const c=a[l];if(c!==void 0)return c;const d=t.call(this,l);return a[l]=d,d}}),Object.defineProperty(this,"set",{value(l,c){s.call(this,l,c),a[l]=c}}),Object.defineProperty(this,"slice",{value:(l,c)=>new Yc(i.call(this,l,c))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new He(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class of{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,s,i){return e.prep(8,24),e.writeInt64(BigInt(i??0)),e.pad(4),e.writeInt32(s),e.writeInt64(BigInt(t??0)),e.offset()}}class hn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new hn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+qe),(t||new hn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xt.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Jn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const s=this.bb.__offset(this.bb_pos,8);return s?(t||new of).__init(this.bb.__vector(this.bb_pos+s)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const s=this.bb.__offset(this.bb_pos,10);return s?(t||new of).__init(this.bb.__vector(this.bb_pos+s)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const s=this.bb.__offset(this.bb_pos,12);return s?(t||new Nt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,xt.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class Ve{constructor(e=[],t,s,i=xt.V5){this.fields=e||[],this.metadata=t||new Map,s||(s=af(this.fields)),this.dictionaries=s,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),s=this.fields.filter(i=>t.has(i.name));return new Ve(s,this.metadata)}selectAt(e){const t=e.map(s=>this.fields[s]).filter(Boolean);return new Ve(t,this.metadata)}assign(...e){const t=e[0]instanceof Ve?e[0]:Array.isArray(e[0])?new Ve(e[0]):new Ve(e),s=[...this.fields],i=Yl(Yl(new Map,this.metadata),t.metadata),a=t.fields.filter(c=>{const d=s.findIndex(f=>f.name===c.name);return~d?(s[d]=c.clone({metadata:Yl(Yl(new Map,s[d].metadata),c.metadata)}))&&!1:!0}),l=af(a,new Map);return new Ve([...s,...a],i,new Map([...this.dictionaries,...l]))}}Ve.prototype.fields=null;Ve.prototype.metadata=null;Ve.prototype.dictionaries=null;class at{static new(...e){let[t,s,i,a]=e;return e[0]&&typeof e[0]=="object"&&({name:t}=e[0],s===void 0&&(s=e[0].type),i===void 0&&(i=e[0].nullable),a===void 0&&(a=e[0].metadata)),new at(`${t}`,s,i,a)}constructor(e,t,s=!1,i){this.name=e,this.type=t,this.nullable=s,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,s,i,a]=e;return!e[0]||typeof e[0]!="object"?[t=this.name,s=this.type,i=this.nullable,a=this.metadata]=e:{name:t=this.name,type:s=this.type,nullable:i=this.nullable,metadata:a=this.metadata}=e[0],at.new(t,s,i,a)}}at.prototype.type=null;at.prototype.name=null;at.prototype.nullable=null;at.prototype.metadata=null;function Yl(n,e){return new Map([...n||new Map,...e||new Map])}function af(n,e=new Map){for(let t=-1,s=n.length;++t<s;){const a=n[t].type;if(ue.isDictionary(a)){if(!e.has(a.id))e.set(a.id,a.dictionary);else if(e.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&af(a.children,e)}return e}var sN=Wx,iN=Pr;class fa{static decode(e){e=new iN(Le(e));const t=hn.getRootAsFooter(e),s=Ve.decode(t.schema(),new Map,t.version());return new rN(s,t)}static encode(e){const t=new sN,s=Ve.encode(t,e.schema);hn.startRecordBatchesVector(t,e.numRecordBatches);for(const l of[...e.recordBatches()].slice().reverse())ui.encode(t,l);const i=t.endVector();hn.startDictionariesVector(t,e.numDictionaries);for(const l of[...e.dictionaryBatches()].slice().reverse())ui.encode(t,l);const a=t.endVector();return hn.startFooter(t),hn.addSchema(t,s),hn.addVersion(t,xt.V5),hn.addRecordBatches(t,i),hn.addDictionaries(t,a),hn.finishFooterBuffer(t,hn.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=xt.V5,s,i){this.schema=e,this.version=t,s&&(this._recordBatches=s),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,t=-1,s=this.numRecordBatches;++t<s;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,s=this.numDictionaries;++t<s;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class rN extends fa{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return ui.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return ui.decode(t)}return null}}class ui{static decode(e){return new ui(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:s}=t,i=BigInt(t.offset),a=BigInt(t.bodyLength);return of.createBlock(e,i,s,a)}constructor(e,t,s){this.metaDataLength=e,this.offset=et(s),this.bodyLength=et(t)}}const ht=Object.freeze({done:!0,value:void 0});class G0{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Af{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class oN extends Af{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ke(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(ht);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Sn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Sn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ke(this,void 0,void 0,function*(){return yield this.abort(e),ht})}return(e){return ke(this,void 0,void 0,function*(){return yield this.close(),ht})}read(e){return ke(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ke(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,s)=>{this.resolvers.push({resolve:t,reject:s})}):Promise.resolve(ht)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class gc extends oN{write(e){if((e=Le(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?Xh(this.toUint8Array(!0)):this.toUint8Array(!1).then(Xh)}toUint8Array(e=!1){return e?as(this._values)[0]:ke(this,void 0,void 0,function*(){var t,s,i,a;const l=[];let c=0;try{for(var d=!0,f=Fi(this),m;m=yield f.next(),t=m.done,!t;d=!0){a=m.value,d=!1;const y=a;l.push(y),c+=y.byteLength}}catch(y){s={error:y}}finally{try{!d&&!t&&(i=f.return)&&(yield i.call(f))}finally{if(s)throw s.error}}return as(l,c)[0]})}}class Qc{constructor(e){e&&(this.source=new aN(Sn.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class $r{constructor(e){e instanceof $r?this.source=e.source:e instanceof gc?this.source=new Mi(Sn.fromAsyncIterable(e)):zx(e)?this.source=new Mi(Sn.fromNodeStream(e)):Nf(e)?this.source=new Mi(Sn.fromDOMStream(e)):Ux(e)?this.source=new Mi(Sn.fromDOMStream(e.body)):ka(e)?this.source=new Mi(Sn.fromIterable(e)):Ui(e)?this.source=new Mi(Sn.fromAsyncIterable(e)):Yr(e)&&(this.source=new Mi(Sn.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class aN{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||ht)}return(e){return Object.create(this.source.return&&this.source.return(e)||ht)}}class Mi{constructor(e){this.source=e,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}cancel(e){return ke(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ke(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ke(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return ke(this,arguments,void 0,function*(t,s="read"){return yield this.source.next({cmd:s,size:t})})}throw(e){return ke(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||ht;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return ke(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||ht;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class X0 extends Qc{constructor(e,t){super(),this.position=0,this.buffer=Le(e),this.size=t===void 0?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:s}=this.readAt(e,4);return new DataView(t,s).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:s,position:i}=this;return t&&i<s?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(s,i+Math.min(s-i,e)),t.subarray(i,this.position)):null}readAt(e,t){const s=this.buffer,i=Math.min(this.size,e+t);return s?s.subarray(e,i):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Kc extends $r{constructor(e,t){super(),this.position=0,this._handle=e,typeof t=="number"?this.size=t:this._pending=ke(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return ke(this,void 0,void 0,function*(){const{buffer:t,byteOffset:s}=yield this.readAt(e,4);return new DataView(t,s).getInt32(0,!0)})}seek(e){return ke(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ke(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:s,position:i}=this;if(t&&i<s){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let a=i,l=0,c=0;const d=Math.min(s,a+Math.min(s-a,e)),f=new Uint8Array(Math.max(0,(this.position=d)-a));for(;(a+=c)<d&&(l+=c)<f.byteLength;)({bytesRead:c}=yield t.read(f,l,f.byteLength-l,a));return f}return null})}readAt(e,t){return ke(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:s,size:i}=this;if(s&&e+t<i){const a=Math.min(i,e+t),l=new Uint8Array(a-e);return(yield s.read(l,0,t,e)).buffer}return new Uint8Array(t)})}close(){return ke(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ke(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ke(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const lN=65536;function Cr(n){return n<0&&(n=4294967295+n+1),`0x${n.toString(16)}`}const Hr=8,Lf=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class wb{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),s=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=t[3]*s[3];this.buffer[0]=i&65535;let a=i>>>16;return i=t[2]*s[3],a+=i,i=t[3]*s[2]>>>0,a+=i,this.buffer[0]+=a<<16,this.buffer[1]=a>>>0<i?lN:0,this.buffer[1]+=a>>>16,this.buffer[1]+=t[1]*s[3]+t[2]*s[2]+t[3]*s[1],this.buffer[1]+=t[0]*s[3]+t[1]*s[2]+t[2]*s[1]+t[3]*s[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Cr(this.buffer[1])} ${Cr(this.buffer[0])}`}}class Ge extends wb{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return Ge.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return Ge.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const s=e.length,i=new Ge(t);for(let a=0;a<s;){const l=Hr<s-a?Hr:s-a,c=new Ge(new Uint32Array([Number.parseInt(e.slice(a,a+l),10),0])),d=new Ge(new Uint32Array([Lf[l],0]));i.times(d),i.plus(c),a+=l}return i}static convertArray(e){const t=new Uint32Array(e.length*2);for(let s=-1,i=e.length;++s<i;)Ge.from(e[s],new Uint32Array(t.buffer,t.byteOffset+2*s*4,2));return t}static multiply(e,t){return new Ge(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Ge(new Uint32Array(e.buffer)).plus(t)}}class en extends wb{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]<<0,s=e.buffer[1]<<0;return t<s||t===s&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return en.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return en.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const s=e.startsWith("-"),i=e.length,a=new en(t);for(let l=s?1:0;l<i;){const c=Hr<i-l?Hr:i-l,d=new en(new Uint32Array([Number.parseInt(e.slice(l,l+c),10),0])),f=new en(new Uint32Array([Lf[c],0]));a.times(f),a.plus(d),l+=c}return s?a.negate():a}static convertArray(e){const t=new Uint32Array(e.length*2);for(let s=-1,i=e.length;++s<i;)en.from(e[s],new Uint32Array(t.buffer,t.byteOffset+2*s*4,2));return t}static multiply(e,t){return new en(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new en(new Uint32Array(e.buffer)).plus(t)}}class Zn{constructor(e){this.buffer=e}high(){return new en(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new en(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const t=new Ge(new Uint32Array([this.buffer[3],0])),s=new Ge(new Uint32Array([this.buffer[2],0])),i=new Ge(new Uint32Array([this.buffer[1],0])),a=new Ge(new Uint32Array([this.buffer[0],0])),l=new Ge(new Uint32Array([e.buffer[3],0])),c=new Ge(new Uint32Array([e.buffer[2],0])),d=new Ge(new Uint32Array([e.buffer[1],0])),f=new Ge(new Uint32Array([e.buffer[0],0]));let m=Ge.multiply(a,f);this.buffer[0]=m.low();const y=new Ge(new Uint32Array([m.high(),0]));return m=Ge.multiply(i,f),y.plus(m),m=Ge.multiply(a,d),y.plus(m),this.buffer[1]=y.low(),this.buffer[3]=y.lessThan(m)?1:0,this.buffer[2]=y.high(),new Ge(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Ge.multiply(s,f)).plus(Ge.multiply(i,d)).plus(Ge.multiply(a,c)),this.buffer[3]+=Ge.multiply(t,f).plus(Ge.multiply(s,d)).plus(Ge.multiply(i,c)).plus(Ge.multiply(a,l)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${Cr(this.buffer[3])} ${Cr(this.buffer[2])} ${Cr(this.buffer[1])} ${Cr(this.buffer[0])}`}static multiply(e,t){return new Zn(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Zn(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return Zn.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return Zn.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const s=e.startsWith("-"),i=e.length,a=new Zn(t);for(let l=s?1:0;l<i;){const c=Hr<i-l?Hr:i-l,d=new Zn(new Uint32Array([Number.parseInt(e.slice(l,l+c),10),0,0,0])),f=new Zn(new Uint32Array([Lf[c],0,0,0]));a.times(f),a.plus(d),l+=c}return s?a.negate():a}static convertArray(e){const t=new Uint32Array(e.length*4);for(let s=-1,i=e.length;++s<i;)Zn.from(e[s],new Uint32Array(t.buffer,t.byteOffset+4*4*s,4));return t}}class Sb extends Oe{constructor(e,t,s,i,a=xt.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=s,this.dictionaries=i,this.metadataVersion=a}visit(e){return super.visit(e instanceof at?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return Ae({type:e,length:t})}visitBool(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitInt(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitDate(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitTime(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitList(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),children:this.visitMany(e.children)})}visitUnion(e,{length:t,nullCount:s}=this.nextFieldNode()){return this.metadataVersion<xt.V5&&this.readNullBitmap(e,s),e.mode===Ut.Sparse?this.visitSparseUnion(e,{length:t,nullCount:s}):this.visitDenseUnion(e,{length:t,nullCount:s})}visitDenseUnion(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitDuration(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:s}=this.nextFieldNode()){return Ae({type:e,length:t,nullCount:s,nullBitmap:this.readNullBitmap(e,s),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,s=this.nextBufferRange()){return t>0&&this.readData(e,s)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:s}=this.nextBufferRange()){return this.bytes.subarray(s,s+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class cN extends Sb{constructor(e,t,s,i,a){super(new Uint8Array(0),t,s,i,a),this.sources=e}readNullBitmap(e,t,{offset:s}=this.nextBufferRange()){return t<=0?new Uint8Array(0):Vc(this.sources[s])}readOffsets(e,{offset:t}=this.nextBufferRange()){return Xe(Uint8Array,Xe(e.OffsetArrayType,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return Xe(Uint8Array,Xe(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:s}=this;return ue.isTimestamp(e)||(ue.isInt(e)||ue.isTime(e))&&e.bitWidth===64||ue.isDuration(e)||ue.isDate(e)&&e.unit===Tn.MILLISECOND?Xe(Uint8Array,en.convertArray(s[t])):ue.isDecimal(e)?Xe(Uint8Array,Zn.convertArray(s[t])):ue.isBinary(e)||ue.isLargeBinary(e)||ue.isFixedSizeBinary(e)?uN(s[t]):ue.isBool(e)?Vc(s[t]):ue.isUtf8(e)||ue.isLargeUtf8(e)?Sf(s[t].join("")):Xe(Uint8Array,Xe(e.ArrayType,s[t].map(i=>+i)))}}function uN(n){const e=n.join(""),t=new Uint8Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s>>1]=Number.parseInt(e.slice(s,s+2),16);return t}class ye extends Oe{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((s,i)=>this.compareFields(s,t[i]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function qt(n,e){return e instanceof n.constructor}function Vi(n,e){return n===e||qt(n,e)}function Cs(n,e){return n===e||qt(n,e)&&n.bitWidth===e.bitWidth&&n.isSigned===e.isSigned}function hu(n,e){return n===e||qt(n,e)&&n.precision===e.precision}function dN(n,e){return n===e||qt(n,e)&&n.byteWidth===e.byteWidth}function Bf(n,e){return n===e||qt(n,e)&&n.unit===e.unit}function Ta(n,e){return n===e||qt(n,e)&&n.unit===e.unit&&n.timezone===e.timezone}function ja(n,e){return n===e||qt(n,e)&&n.unit===e.unit&&n.bitWidth===e.bitWidth}function hN(n,e){return n===e||qt(n,e)&&n.children.length===e.children.length&&di.compareManyFields(n.children,e.children)}function fN(n,e){return n===e||qt(n,e)&&n.children.length===e.children.length&&di.compareManyFields(n.children,e.children)}function Ff(n,e){return n===e||qt(n,e)&&n.mode===e.mode&&n.typeIds.every((t,s)=>t===e.typeIds[s])&&di.compareManyFields(n.children,e.children)}function pN(n,e){return n===e||qt(n,e)&&n.id===e.id&&n.isOrdered===e.isOrdered&&di.visit(n.indices,e.indices)&&di.visit(n.dictionary,e.dictionary)}function Pf(n,e){return n===e||qt(n,e)&&n.unit===e.unit}function Ma(n,e){return n===e||qt(n,e)&&n.unit===e.unit}function mN(n,e){return n===e||qt(n,e)&&n.listSize===e.listSize&&n.children.length===e.children.length&&di.compareManyFields(n.children,e.children)}function gN(n,e){return n===e||qt(n,e)&&n.keysSorted===e.keysSorted&&n.children.length===e.children.length&&di.compareManyFields(n.children,e.children)}ye.prototype.visitNull=Vi;ye.prototype.visitBool=Vi;ye.prototype.visitInt=Cs;ye.prototype.visitInt8=Cs;ye.prototype.visitInt16=Cs;ye.prototype.visitInt32=Cs;ye.prototype.visitInt64=Cs;ye.prototype.visitUint8=Cs;ye.prototype.visitUint16=Cs;ye.prototype.visitUint32=Cs;ye.prototype.visitUint64=Cs;ye.prototype.visitFloat=hu;ye.prototype.visitFloat16=hu;ye.prototype.visitFloat32=hu;ye.prototype.visitFloat64=hu;ye.prototype.visitUtf8=Vi;ye.prototype.visitLargeUtf8=Vi;ye.prototype.visitBinary=Vi;ye.prototype.visitLargeBinary=Vi;ye.prototype.visitFixedSizeBinary=dN;ye.prototype.visitDate=Bf;ye.prototype.visitDateDay=Bf;ye.prototype.visitDateMillisecond=Bf;ye.prototype.visitTimestamp=Ta;ye.prototype.visitTimestampSecond=Ta;ye.prototype.visitTimestampMillisecond=Ta;ye.prototype.visitTimestampMicrosecond=Ta;ye.prototype.visitTimestampNanosecond=Ta;ye.prototype.visitTime=ja;ye.prototype.visitTimeSecond=ja;ye.prototype.visitTimeMillisecond=ja;ye.prototype.visitTimeMicrosecond=ja;ye.prototype.visitTimeNanosecond=ja;ye.prototype.visitDecimal=Vi;ye.prototype.visitList=hN;ye.prototype.visitStruct=fN;ye.prototype.visitUnion=Ff;ye.prototype.visitDenseUnion=Ff;ye.prototype.visitSparseUnion=Ff;ye.prototype.visitDictionary=pN;ye.prototype.visitInterval=Pf;ye.prototype.visitIntervalDayTime=Pf;ye.prototype.visitIntervalYearMonth=Pf;ye.prototype.visitDuration=Ma;ye.prototype.visitDurationSecond=Ma;ye.prototype.visitDurationMillisecond=Ma;ye.prototype.visitDurationMicrosecond=Ma;ye.prototype.visitDurationNanosecond=Ma;ye.prototype.visitFixedSizeList=mN;ye.prototype.visitMap=gN;const di=new ye;function lf(n,e){return di.compareSchemas(n,e)}function kh(n,e){return yN(n,e.map(t=>t.data.concat()))}function yN(n,e){const t=[...n.fields],s=[],i={numBatches:e.reduce((y,x)=>Math.max(y,x.length),0)};let a=0,l=0,c=-1;const d=e.length;let f,m=[];for(;i.numBatches-- >0;){for(l=Number.POSITIVE_INFINITY,c=-1;++c<d;)m[c]=f=e[c].shift(),l=Math.min(l,f?f.length:l);Number.isFinite(l)&&(m=xN(t,l,m,e,i),l>0&&(s[a++]=Ae({type:new Vt(t),length:l,nullCount:0,children:m.slice()})))}return[n=n.assign(t),s.map(y=>new nn(n,y))]}function xN(n,e,t,s,i){var a;const l=(e+63&-64)>>3;for(let c=-1,d=s.length;++c<d;){const f=t[c],m=f?.length;if(m>=e)m===e?t[c]=f:(t[c]=f.slice(0,e),i.numBatches=Math.max(i.numBatches,s[c].unshift(f.slice(e,m-e))));else{const y=n[c];n[c]=y.clone({nullable:!0}),t[c]=(a=f?._changeLengthAndBackfillNullBitmap(e))!==null&&a!==void 0?a:Ae({type:y.type,length:e,nullCount:e,nullBitmap:new Uint8Array(l)})}}return t}var Nb;class Ht{constructor(...e){var t,s;if(e.length===0)return this.batches=[],this.schema=new Ve([]),this._offsets=[0],this;let i,a;e[0]instanceof Ve&&(i=e.shift()),e.at(-1)instanceof Uint32Array&&(a=e.pop());const l=d=>{if(d){if(d instanceof nn)return[d];if(d instanceof Ht)return d.batches;if(d instanceof Ke){if(d.type instanceof Vt)return[new nn(new Ve(d.type.children),d)]}else{if(Array.isArray(d))return d.flatMap(f=>l(f));if(typeof d[Symbol.iterator]=="function")return[...d].flatMap(f=>l(f));if(typeof d=="object"){const f=Object.keys(d),m=f.map(b=>new He([d[b]])),y=i??new Ve(f.map((b,_)=>new at(String(b),m[_].type,m[_].nullable))),[,x]=kh(y,m);return x.length===0?[new nn(d)]:x}}}return[]},c=e.flatMap(d=>l(d));if(i=(s=i??((t=c[0])===null||t===void 0?void 0:t.schema))!==null&&s!==void 0?s:new Ve([]),!(i instanceof Ve))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const d of c){if(!(d instanceof nn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!lf(i,d.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=c,this._offsets=a??pb(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=fb(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(Mf(e,this.numRows))}set(e,t){}indexOf(e,t){return-1}[Symbol.iterator](){return this.batches.length>0?Rf.visit(new He(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const t=this.schema,s=this.data.concat(e.flatMap(({data:i})=>i));return new Ht(t,s.map(i=>new nn(t,i)))}slice(e,t){const s=this.schema;[e,t]=db({length:this.numRows},e,t);const i=mb(this.data,this._offsets,e,t);return new Ht(s,i.map(a=>new nn(s,a)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(s=>s.children[e]);if(t.length===0){const{type:s}=this.schema.fields[e],i=Ae({type:s,length:0,nullCount:0});t.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new He(t)}return null}setChild(e,t){var s;return this.setChildAt((s=this.schema.fields)===null||s===void 0?void 0:s.findIndex(i=>i.name===e),t)}setChildAt(e,t){let s=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new He([Ae({type:new ci,length:this.numRows})]));const a=s.fields.slice(),l=a[e].clone({type:t.type}),c=this.schema.fields.map((d,f)=>this.getChildAt(f));[a[e],c[e]]=[l,t],[s,i]=kh(s,c)}return new Ht(s,i)}select(e){const t=this.schema.fields.reduce((s,i,a)=>s.set(i.name,a),new Map);return this.selectAt(e.map(s=>t.get(s)).filter(s=>s>-1))}selectAt(e){const t=this.schema.selectAt(e),s=this.batches.map(i=>i.selectAt(e));return new Ht(t,s)}assign(e){const t=this.schema.fields,[s,i]=e.schema.fields.reduce((c,d,f)=>{const[m,y]=c,x=t.findIndex(b=>b.name===d.name);return~x?y[x]=f:m.push(f),c},[[],[]]),a=this.schema.assign(e.schema),l=[...t.map((c,d)=>[d,i[d]]).map(([c,d])=>d===void 0?this.getChildAt(c):e.getChildAt(d)),...s.map(c=>e.getChildAt(c))].filter(Boolean);return new Ht(...kh(a,l))}}Nb=Symbol.toStringTag;Ht[Nb]=(n=>(n.schema=null,n.batches=[],n._offsets=new Uint32Array([0]),n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,n.isValid=Wc(Df),n.get=Wc(on.getVisitFn(T.Struct)),n.set=gb(jn.getVisitFn(T.Struct)),n.indexOf=yb(qc.getVisitFn(T.Struct)),"Table"))(Ht.prototype);var Ib;let nn=class Go{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Ve))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ae({nullCount:0,type:new Vt(this.schema.fields),children:this.schema.fields.map(t=>Ae({type:t.type,nullCount:0}))})]=e,!(this.data instanceof Ke))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=J0(this.schema,this.data.children);break}case 1:{const[t]=e,{fields:s,children:i,length:a}=Object.keys(t).reduce((d,f,m)=>(d.children[m]=t[f],d.length=Math.max(d.length,t[f].length),d.fields[m]=at.new({name:f,type:t[f].type,nullable:!0}),d),{length:0,fields:new Array,children:new Array}),l=new Ve(s),c=Ae({type:new Vt(s),length:a,children:i,nullCount:0});[this.schema,this.data]=J0(l,c.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Eb(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return on.visit(this.data,e)}at(e){return this.get(Mf(e,this.numRows))}set(e,t){return jn.visit(this.data,e,t)}indexOf(e,t){return qc.visit(this.data,e,t)}[Symbol.iterator](){return Rf.visit(new He([this.data]))}toArray(){return[...this]}concat(...e){return new Ht(this.schema,[this,...e])}slice(e,t){const[s]=new He([this.data]).slice(e,t).data;return new Go(this.schema,s)}getChild(e){var t;return this.getChildAt((t=this.schema.fields)===null||t===void 0?void 0:t.findIndex(s=>s.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new He([this.data.children[e]]):null}setChild(e,t){var s;return this.setChildAt((s=this.schema.fields)===null||s===void 0?void 0:s.findIndex(i=>i.name===e),t)}setChildAt(e,t){let s=this.schema,i=this.data;if(e>-1&&e<this.numCols){t||(t=new He([Ae({type:new ci,length:this.numRows})]));const a=s.fields.slice(),l=i.children.slice(),c=a[e].clone({type:t.type});[a[e],l[e]]=[c,t.data[0]],s=new Ve(a,new Map(this.schema.metadata)),i=Ae({type:new Vt(a),children:l})}return new Go(s,i)}select(e){const t=this.schema.select(e),s=new Vt(t.fields),i=[];for(const a of e){const l=this.schema.fields.findIndex(c=>c.name===a);~l&&(i[l]=this.data.children[l])}return new Go(t,Ae({type:s,length:this.numRows,children:i}))}selectAt(e){const t=this.schema.selectAt(e),s=e.map(a=>this.data.children[a]).filter(Boolean),i=Ae({type:new Vt(t.fields),length:this.numRows,children:s});return new Go(t,i)}};Ib=Symbol.toStringTag;nn[Ib]=(n=>(n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(nn.prototype);function J0(n,e,t=e.reduce((s,i)=>Math.max(s,i.length),0)){var s;const i=[...n.fields],a=[...e],l=(t+63&-64)>>3;for(const[c,d]of n.fields.entries()){const f=e[c];(!f||f.length!==t)&&(i[c]=d.clone({nullable:!0}),a[c]=(s=f?._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ae({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(l)}))}return[n.assign(i),Ae({type:new Vt(i),length:t,children:a})]}function Eb(n,e,t=new Map){var s,i;if(((s=n?.length)!==null&&s!==void 0?s:0)>0&&n?.length===e?.length)for(let a=-1,l=n.length;++a<l;){const{type:c}=n[a],d=e[a];for(const f of[d,...((i=d?.dictionary)===null||i===void 0?void 0:i.data)||[]])Eb(c.children,f?.children,t);if(ue.isDictionary(c)){const{id:f}=c;if(!t.has(f))d?.dictionary&&t.set(f,d.dictionary);else if(t.get(f)!==d.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return t}class Uf extends nn{constructor(e){const t=e.fields.map(i=>Ae({type:i.type})),s=Ae({type:new Vt(e.fields),nullCount:0,children:t});super(e,s)}}let ei=class Gn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new Gn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+qe),(t||new Gn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xt.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):ze.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){const s=this.bb.__offset(this.bb_pos,12);return s?(t||new Nt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,xt.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,ze.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,s,i,a,l){return Gn.startMessage(e),Gn.addVersion(e,t),Gn.addHeaderType(e,s),Gn.addHeader(e,i),Gn.addBodyLength(e,a),Gn.addCustomMetadata(e,l),Gn.endMessage(e)}};class vN extends Oe{visit(e,t){return e==null||t==null?void 0:super.visit(e,t)}visitNull(e,t){return H0.startNull(t),H0.endNull(t)}visitInt(e,t){return fn.startInt(t),fn.addBitWidth(t,e.bitWidth),fn.addIsSigned(t,e.isSigned),fn.endInt(t)}visitFloat(e,t){return ns.startFloatingPoint(t),ns.addPrecision(t,e.precision),ns.endFloatingPoint(t)}visitBinary(e,t){return F0.startBinary(t),F0.endBinary(t)}visitLargeBinary(e,t){return U0.startLargeBinary(t),U0.endLargeBinary(t)}visitBool(e,t){return P0.startBool(t),P0.endBool(t)}visitUtf8(e,t){return V0.startUtf8(t),V0.endUtf8(t)}visitLargeUtf8(e,t){return z0.startLargeUtf8(t),z0.endLargeUtf8(t)}visitDecimal(e,t){return Sr.startDecimal(t),Sr.addScale(t,e.scale),Sr.addPrecision(t,e.precision),Sr.addBitWidth(t,e.bitWidth),Sr.endDecimal(t)}visitDate(e,t){return uc.startDate(t),uc.addUnit(t,e.unit),uc.endDate(t)}visitTime(e,t){return Nn.startTime(t),Nn.addUnit(t,e.unit),Nn.addBitWidth(t,e.bitWidth),Nn.endTime(t)}visitTimestamp(e,t){const s=e.timezone&&t.createString(e.timezone)||void 0;return In.startTimestamp(t),In.addUnit(t,e.unit),s!==void 0&&In.addTimezone(t,s),In.endTimestamp(t)}visitInterval(e,t){return ss.startInterval(t),ss.addUnit(t,e.unit),ss.endInterval(t)}visitDuration(e,t){return dc.startDuration(t),dc.addUnit(t,e.unit),dc.endDuration(t)}visitList(e,t){return $0.startList(t),$0.endList(t)}visitStruct(e,t){return Li.startStruct_(t),Li.endStruct_(t)}visitUnion(e,t){tn.startTypeIdsVector(t,e.typeIds.length);const s=tn.createTypeIdsVector(t,e.typeIds);return tn.startUnion(t),tn.addMode(t,e.mode),tn.addTypeIds(t,s),tn.endUnion(t)}visitDictionary(e,t){const s=this.visit(e.indices,t);return ks.startDictionaryEncoding(t),ks.addId(t,BigInt(e.id)),ks.addIsOrdered(t,e.isOrdered),s!==void 0&&ks.addIndexType(t,s),ks.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return hc.startFixedSizeBinary(t),hc.addByteWidth(t,e.byteWidth),hc.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return fc.startFixedSizeList(t),fc.addListSize(t,e.listSize),fc.endFixedSizeList(t)}visitMap(e,t){return pc.startMap(t),pc.addKeysSorted(t,e.keysSorted),pc.endMap(t)}}const Th=new vN;function bN(n,e=new Map){return new Ve(wN(n,e),yc(n.metadata),e)}function kb(n){return new pn(n.count,Tb(n.columns),jb(n.columns))}function _N(n){return new cs(kb(n.data),n.id,n.isDelta)}function wN(n,e){return(n.fields||[]).filter(Boolean).map(t=>at.fromJSON(t,e))}function Z0(n,e){return(n.children||[]).filter(Boolean).map(t=>at.fromJSON(t,e))}function Tb(n){return(n||[]).reduce((e,t)=>[...e,new hi(t.count,SN(t.VALIDITY)),...Tb(t.children)],[])}function jb(n,e=[]){for(let t=-1,s=(n||[]).length;++t<s;){const i=n[t];i.VALIDITY&&e.push(new rs(e.length,i.VALIDITY.length)),i.TYPE_ID&&e.push(new rs(e.length,i.TYPE_ID.length)),i.OFFSET&&e.push(new rs(e.length,i.OFFSET.length)),i.DATA&&e.push(new rs(e.length,i.DATA.length)),e=jb(i.children,e)}return e}function SN(n){return(n||[]).reduce((e,t)=>e+ +(t===0),0)}function NN(n,e){let t,s,i,a,l,c;return!e||!(a=n.dictionary)?(l=ty(n,Z0(n,e)),i=new at(n.name,l,n.nullable,yc(n.metadata))):e.has(t=a.id)?(s=(s=a.indexType)?ey(s):new ha,c=new zr(e.get(t),s,t,a.isOrdered),i=new at(n.name,c,n.nullable,yc(n.metadata))):(s=(s=a.indexType)?ey(s):new ha,e.set(t,l=ty(n,Z0(n,e))),c=new zr(l,s,t,a.isOrdered),i=new at(n.name,c,n.nullable,yc(n.metadata))),i||null}function yc(n=[]){return new Map(n.map(({key:e,value:t})=>[e,t]))}function ey(n){return new zi(n.isSigned,n.bitWidth)}function ty(n,e){const t=n.type.name;switch(t){case"NONE":return new ci;case"null":return new ci;case"binary":return new kc;case"largebinary":return new Tc;case"utf8":return new jc;case"largeutf8":return new Mc;case"bool":return new Cc;case"list":return new Fc((e||[])[0]);case"struct":return new Vt(e||[]);case"struct_":return new Vt(e||[])}switch(t){case"int":{const s=n.type;return new zi(s.isSigned,s.bitWidth)}case"floatingpoint":{const s=n.type;return new Ec(Pt[s.precision])}case"decimal":{const s=n.type;return new Oc(s.scale,s.precision,s.bitWidth)}case"date":{const s=n.type;return new Dc(Tn[s.unit])}case"time":{const s=n.type;return new Rc(xe[s.unit],s.bitWidth)}case"timestamp":{const s=n.type;return new Ac(xe[s.unit],s.timezone)}case"interval":{const s=n.type;return new Lc(ls[s.unit])}case"duration":{const s=n.type;return new Bc(xe[s.unit])}case"union":{const s=n.type,[i,...a]=(s.mode+"").toLowerCase(),l=i.toUpperCase()+a.join("");return new Pc(Ut[l],s.typeIds||[],e||[])}case"fixedsizebinary":{const s=n.type;return new Uc(s.byteWidth)}case"fixedsizelist":{const s=n.type;return new zc(s.listSize,(e||[])[0])}case"map":{const s=n.type;return new $c((e||[])[0],s.keysSorted)}}throw new Error(`Unrecognized type: "${t}"`)}var IN=Wx,EN=Pr;class Wt{static fromJSON(e,t){const s=new Wt(0,xt.V5,t);return s._createHeader=kN(e,t),s}static decode(e){e=new EN(Le(e));const t=ei.getRootAsMessage(e),s=t.bodyLength(),i=t.version(),a=t.headerType(),l=new Wt(s,i,a);return l._createHeader=TN(t,a),l}static encode(e){const t=new IN;let s=-1;return e.isSchema()?s=Ve.encode(t,e.header()):e.isRecordBatch()?s=pn.encode(t,e.header()):e.isDictionaryBatch()&&(s=cs.encode(t,e.header())),ei.startMessage(t),ei.addVersion(t,xt.V5),ei.addHeader(t,s),ei.addHeaderType(t,e.headerType),ei.addBodyLength(t,BigInt(e.bodyLength)),ei.finishMessageBuffer(t,ei.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof Ve)return new Wt(0,xt.V5,ze.Schema,e);if(e instanceof pn)return new Wt(t,xt.V5,ze.RecordBatch,e);if(e instanceof cs)return new Wt(t,xt.V5,ze.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ze.Schema}isRecordBatch(){return this.headerType===ze.RecordBatch}isDictionaryBatch(){return this.headerType===ze.DictionaryBatch}constructor(e,t,s,i){this._version=t,this._headerType=s,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=et(e)}}class pn{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,s){this._nodes=t,this._buffers=s,this._length=et(e)}}class cs{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,s=!1){this._data=e,this._isDelta=s,this._id=et(t)}}class rs{constructor(e,t){this.offset=et(e),this.length=et(t)}}class hi{constructor(e,t){this.length=et(e),this.nullCount=et(t)}}function kN(n,e){return()=>{switch(e){case ze.Schema:return Ve.fromJSON(n);case ze.RecordBatch:return pn.fromJSON(n);case ze.DictionaryBatch:return cs.fromJSON(n)}throw new Error(`Unrecognized Message type: { name: ${ze[e]}, type: ${e} }`)}}function TN(n,e){return()=>{switch(e){case ze.Schema:return Ve.decode(n.header(new Jn),new Map,n.version());case ze.RecordBatch:return pn.decode(n.header(new ws),n.version());case ze.DictionaryBatch:return cs.decode(n.header(new _r),n.version())}throw new Error(`Unrecognized Message type: { name: ${ze[e]}, type: ${e} }`)}}at.encode=PN;at.decode=BN;at.fromJSON=NN;Ve.encode=FN;Ve.decode=jN;Ve.fromJSON=bN;pn.encode=UN;pn.decode=MN;pn.fromJSON=kb;cs.encode=zN;cs.decode=CN;cs.fromJSON=_N;hi.encode=$N;hi.decode=DN;rs.encode=HN;rs.decode=ON;function jN(n,e=new Map,t=xt.V5){const s=LN(n,e);return new Ve(s,xc(n),e,t)}function MN(n,e=xt.V5){if(n.compression()!==null)throw new Error("Record batch compression not implemented");return new pn(n.length(),RN(n),AN(n,e))}function CN(n,e=xt.V5){return new cs(pn.decode(n.data(),e),n.id(),n.isDelta())}function ON(n){return new rs(n.offset(),n.length())}function DN(n){return new hi(n.length(),n.nullCount())}function RN(n){const e=[];for(let t,s=-1,i=-1,a=n.nodesLength();++s<a;)(t=n.nodes(s))&&(e[++i]=hi.decode(t));return e}function AN(n,e){const t=[];for(let s,i=-1,a=-1,l=n.buffersLength();++i<l;)(s=n.buffers(i))&&(e<xt.V4&&(s.bb_pos+=8*(i+1)),t[++a]=rs.decode(s));return t}function LN(n,e){const t=[];for(let s,i=-1,a=-1,l=n.fieldsLength();++i<l;)(s=n.fields(i))&&(t[++a]=at.decode(s,e));return t}function ny(n,e){const t=[];for(let s,i=-1,a=-1,l=n.childrenLength();++i<l;)(s=n.children(i))&&(t[++a]=at.decode(s,e));return t}function BN(n,e){let t,s,i,a,l,c;return!e||!(c=n.dictionary())?(i=iy(n,ny(n,e)),s=new at(n.name(),i,n.nullable(),xc(n))):e.has(t=et(c.id()))?(a=(a=c.indexType())?sy(a):new ha,l=new zr(e.get(t),a,t,c.isOrdered()),s=new at(n.name(),l,n.nullable(),xc(n))):(a=(a=c.indexType())?sy(a):new ha,e.set(t,i=iy(n,ny(n,e))),l=new zr(i,a,t,c.isOrdered()),s=new at(n.name(),l,n.nullable(),xc(n))),s||null}function xc(n){const e=new Map;if(n)for(let t,s,i=-1,a=Math.trunc(n.customMetadataLength());++i<a;)(t=n.customMetadata(i))&&(s=t.key())!=null&&e.set(s,t.value());return e}function sy(n){return new zi(n.isSigned(),n.bitWidth())}function iy(n,e){const t=n.typeType();switch(t){case st.NONE:return new ci;case st.Null:return new ci;case st.Binary:return new kc;case st.LargeBinary:return new Tc;case st.Utf8:return new jc;case st.LargeUtf8:return new Mc;case st.Bool:return new Cc;case st.List:return new Fc((e||[])[0]);case st.Struct_:return new Vt(e||[])}switch(t){case st.Int:{const s=n.type(new fn);return new zi(s.isSigned(),s.bitWidth())}case st.FloatingPoint:{const s=n.type(new ns);return new Ec(s.precision())}case st.Decimal:{const s=n.type(new Sr);return new Oc(s.scale(),s.precision(),s.bitWidth())}case st.Date:{const s=n.type(new uc);return new Dc(s.unit())}case st.Time:{const s=n.type(new Nn);return new Rc(s.unit(),s.bitWidth())}case st.Timestamp:{const s=n.type(new In);return new Ac(s.unit(),s.timezone())}case st.Interval:{const s=n.type(new ss);return new Lc(s.unit())}case st.Duration:{const s=n.type(new dc);return new Bc(s.unit())}case st.Union:{const s=n.type(new tn);return new Pc(s.mode(),s.typeIdsArray()||[],e||[])}case st.FixedSizeBinary:{const s=n.type(new hc);return new Uc(s.byteWidth())}case st.FixedSizeList:{const s=n.type(new fc);return new zc(s.listSize(),(e||[])[0])}case st.Map:{const s=n.type(new pc);return new $c((e||[])[0],s.keysSorted())}}throw new Error(`Unrecognized type: "${st[t]}" (${t})`)}function FN(n,e){const t=e.fields.map(a=>at.encode(n,a));Jn.startFieldsVector(n,t.length);const s=Jn.createFieldsVector(n,t),i=e.metadata&&e.metadata.size>0?Jn.createCustomMetadataVector(n,[...e.metadata].map(([a,l])=>{const c=n.createString(`${a}`),d=n.createString(`${l}`);return Nt.startKeyValue(n),Nt.addKey(n,c),Nt.addValue(n,d),Nt.endKeyValue(n)})):-1;return Jn.startSchema(n),Jn.addFields(n,s),Jn.addEndianness(n,VN?Ur.Little:Ur.Big),i!==-1&&Jn.addCustomMetadata(n,i),Jn.endSchema(n)}function PN(n,e){let t=-1,s=-1,i=-1;const a=e.type;let l=e.typeId;ue.isDictionary(a)?(l=a.dictionary.typeId,i=Th.visit(a,n),s=Th.visit(a.dictionary,n)):s=Th.visit(a,n);const c=(a.children||[]).map(m=>at.encode(n,m)),d=wn.createChildrenVector(n,c),f=e.metadata&&e.metadata.size>0?wn.createCustomMetadataVector(n,[...e.metadata].map(([m,y])=>{const x=n.createString(`${m}`),b=n.createString(`${y}`);return Nt.startKeyValue(n),Nt.addKey(n,x),Nt.addValue(n,b),Nt.endKeyValue(n)})):-1;return e.name&&(t=n.createString(e.name)),wn.startField(n),wn.addType(n,s),wn.addTypeType(n,l),wn.addChildren(n,d),wn.addNullable(n,!!e.nullable),t!==-1&&wn.addName(n,t),i!==-1&&wn.addDictionary(n,i),f!==-1&&wn.addCustomMetadata(n,f),wn.endField(n)}function UN(n,e){const t=e.nodes||[],s=e.buffers||[];ws.startNodesVector(n,t.length);for(const l of t.slice().reverse())hi.encode(n,l);const i=n.endVector();ws.startBuffersVector(n,s.length);for(const l of s.slice().reverse())rs.encode(n,l);const a=n.endVector();return ws.startRecordBatch(n),ws.addLength(n,BigInt(e.length)),ws.addNodes(n,i),ws.addBuffers(n,a),ws.endRecordBatch(n)}function zN(n,e){const t=pn.encode(n,e.data);return _r.startDictionaryBatch(n),_r.addId(n,BigInt(e.id)),_r.addIsDelta(n,e.isDelta),_r.addData(n,t),_r.endDictionaryBatch(n)}function $N(n,e){return Qx.createFieldNode(n,BigInt(e.length),BigInt(e.nullCount))}function HN(n,e){return Yx.createBuffer(n,BigInt(e.offset),BigInt(e.length))}const VN=(()=>{const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256})(),zf=n=>`Expected ${ze[n]} Message in stream, but was null or length 0.`,$f=n=>`Header pointer of flatbuffer-encoded ${ze[n]} Message is null or length 0.`,Mb=(n,e)=>`Expected to read ${n} metadata bytes, but only read ${e}.`,Cb=(n,e)=>`Expected to read ${n} bytes for message body, but only read ${e}.`;class Ob{constructor(e){this.source=e instanceof Qc?e:new Qc(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?ht:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(zf(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=Le(this.source.read(e));if(t.byteLength<e)throw new Error(Cb(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=ze.Schema,s=this.readMessage(t),i=s?.header();if(e&&!i)throw new Error($f(t));return i}readMetadataLength(){const e=this.source.read(fu),t=e&&new Pr(e),s=t?.readInt32(0)||0;return{done:s===0,value:s}}readMetadata(e){const t=this.source.read(e);if(!t)return ht;if(t.byteLength<e)throw new Error(Mb(e,t.byteLength));return{done:!1,value:Wt.decode(t)}}}class WN{constructor(e,t){this.source=e instanceof $r?e:Px(e)?new Kc(e,t):new $r(e)}[Symbol.asyncIterator](){return this}next(){return ke(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?ht:e})}throw(e){return ke(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ke(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ke(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(zf(e));return t.value})}readMessageBody(e){return ke(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=Le(yield this.source.read(e));if(t.byteLength<e)throw new Error(Cb(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(){return ke(this,arguments,void 0,function*(e=!1){const t=ze.Schema,s=yield this.readMessage(t),i=s?.header();if(e&&!i)throw new Error($f(t));return i})}readMetadataLength(){return ke(this,void 0,void 0,function*(){const e=yield this.source.read(fu),t=e&&new Pr(e),s=t?.readInt32(0)||0;return{done:s===0,value:s}})}readMetadata(e){return ke(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return ht;if(t.byteLength<e)throw new Error(Mb(e,t.byteLength));return{done:!1,value:Wt.decode(t)}})}}class qN extends Ob{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof G0?e:new G0(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Wt.fromJSON(e.schema,ze.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:Wt.fromJSON(t,ze.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:Wt.fromJSON(t,ze.RecordBatch)}}return this._body=[],ht}readMessageBody(e){return t(this._body);function t(s){return(s||[]).reduce((i,a)=>[...i,...a.VALIDITY&&[a.VALIDITY]||[],...a.TYPE_ID&&[a.TYPE_ID]||[],...a.OFFSET&&[a.OFFSET]||[],...a.DATA&&[a.DATA]||[],...t(a.children)],[])}}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(zf(e));return t.value}readSchema(){const e=ze.Schema,t=this.readMessage(e),s=t?.header();if(!t||!s)throw new Error($f(e));return s}}const fu=4,cf="ARROW1",pa=new Uint8Array(cf.length);for(let n=0;n<cf.length;n+=1)pa[n]=cf.codePointAt(n);function Hf(n,e=0){for(let t=-1,s=pa.length;++t<s;)if(pa[t]!==n[e+t])return!1;return!0}const Ca=pa.length,Db=Ca+fu,YN=Ca*2+fu;class kn extends Af{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return Ui(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Sn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Sn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof kn?e:Jh(e)?XN(e):Px(e)?eI(e):Ui(e)?ke(this,void 0,void 0,function*(){return yield kn.from(yield e)}):Ux(e)||Nf(e)||zx(e)||Yr(e)?ZN(new $r(e)):JN(new Qc(e))}static readAll(e){return e instanceof kn?e.isSync()?ry(e):oy(e):Jh(e)||ArrayBuffer.isView(e)||ka(e)||Fx(e)?ry(e):oy(e)}}class Gc extends kn{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return is(this,arguments,function*(){yield Te(yield*cc(Fi(this[Symbol.iterator]())))})}}class Xc extends kn{constructor(e){super(e),this._impl=e}readAll(){return ke(this,void 0,void 0,function*(){var e,t,s,i;const a=new Array;try{for(var l=!0,c=Fi(this),d;d=yield c.next(),e=d.done,!e;l=!0){i=d.value,l=!1;const f=i;a.push(f)}}catch(f){t={error:f}}finally{try{!l&&!e&&(s=c.return)&&(yield s.call(c))}finally{if(t)throw t.error}}return a})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Rb extends Gc{constructor(e){super(e),this._impl=e}}class QN extends Xc{constructor(e){super(e),this._impl=e}}class Ab{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const s=this._loadVectors(e,t,this.schema.fields),i=Ae({type:new Vt(this.schema.fields),length:e.length,children:s});return new nn(this.schema,i)}_loadDictionaryBatch(e,t){const{id:s,isDelta:i}=e,{dictionaries:a,schema:l}=this,c=a.get(s),d=l.dictionaries.get(s),f=this._loadVectors(e.data,t,[d]);return(c&&i?c.concat(new He(f)):new He(f)).memoize()}_loadVectors(e,t,s){return new Sb(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(s)}}class Jc extends Ab{constructor(e,t){super(t),this._reader=Jh(e)?new qN(this._handle=e):new Ob(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Bb(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):ht}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):ht}next(){if(this.closed)return ht;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const s=e.header(),i=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(s,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const s=e.header(),i=t.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(s,i);this.dictionaries.set(s.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Uf(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Zc extends Ab{constructor(e,t){super(t),this._reader=new WN(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ke(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ke(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Bb(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ke(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):ht})}return(e){return ke(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):ht})}next(){return ke(this,void 0,void 0,function*(){if(this.closed)return ht;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const s=e.header(),i=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(s,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const s=e.header(),i=yield t.readMessageBody(e.bodyLength),a=this._loadDictionaryBatch(s,i);this.dictionaries.set(s.id,a)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Uf(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ke(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Lb extends Jc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof X0?e:new X0(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const s=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(s&&this._handle.seek(s.offset)){const i=this._reader.readMessage(ze.RecordBatch);if(i?.isRecordBatch()){const a=i.header(),l=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(a,l)}}return null}_readDictionaryBatch(e){var t;const s=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(s&&this._handle.seek(s.offset)){const i=this._reader.readMessage(ze.DictionaryBatch);if(i?.isDictionaryBatch()){const a=i.header(),l=this._reader.readMessageBody(i.bodyLength),c=this._loadDictionaryBatch(a,l);this.dictionaries.set(a.id,c)}}}_readFooter(){const{_handle:e}=this,t=e.size-Db,s=e.readInt32(t),i=e.readAt(t-s,s);return fa.decode(i)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const s=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(this._recordBatchIndex);if(s&&this._handle.seek(s.offset))return this._reader.readMessage(e)}return null}}class KN extends Zc{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){const s=typeof t[0]!="number"?t.shift():void 0,i=t[0]instanceof Map?t.shift():void 0;super(e instanceof Kc?e:new Kc(e,s),i)}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return ke(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const s of this._footer.dictionaryBatches())s&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){return ke(this,void 0,void 0,function*(){var t;if(this.closed)return null;this._footer||(yield this.open());const s=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(s&&(yield this._handle.seek(s.offset))){const i=yield this._reader.readMessage(ze.RecordBatch);if(i?.isRecordBatch()){const a=i.header(),l=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(a,l)}}return null})}_readDictionaryBatch(e){return ke(this,void 0,void 0,function*(){var t;const s=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(s&&(yield this._handle.seek(s.offset))){const i=yield this._reader.readMessage(ze.DictionaryBatch);if(i?.isDictionaryBatch()){const a=i.header(),l=yield this._reader.readMessageBody(i.bodyLength),c=this._loadDictionaryBatch(a,l);this.dictionaries.set(a.id,c)}}})}_readFooter(){return ke(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-Db,s=yield e.readInt32(t),i=yield e.readAt(t-s,s);return fa.decode(i)})}_readNextMessageAndValidate(e){return ke(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class GN extends Jc{constructor(e,t){super(e,t)}_loadVectors(e,t,s){return new cN(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(s)}}function Bb(n,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:n.autoDestroy}function*ry(n){const e=kn.from(n);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function oy(n){return is(this,arguments,function*(){const t=yield Te(kn.from(n));try{if(!(yield Te(t.open({autoDestroy:!1}))).closed)do yield yield Te(t);while(!(yield Te(t.reset().open())).closed)}finally{yield Te(t.cancel())}})}function XN(n){return new Gc(new GN(n))}function JN(n){const e=n.peek(Ca+7&-8);return e&&e.byteLength>=4?Hf(e)?new Rb(new Lb(n.read())):new Gc(new Jc(n)):new Gc(new Jc(function*(){}()))}function ZN(n){return ke(this,void 0,void 0,function*(){const e=yield n.peek(Ca+7&-8);return e&&e.byteLength>=4?Hf(e)?new Rb(new Lb(yield n.read())):new Xc(new Zc(n)):new Xc(new Zc(function(){return is(this,arguments,function*(){})}()))})}function eI(n){return ke(this,void 0,void 0,function*(){const{size:e}=yield n.stat(),t=new Kc(n,e);return e>=YN&&Hf(yield t.readAt(0,Ca+7&-8))?new QN(new KN(t)):new Xc(new Zc(t))})}class ft extends Oe{static assemble(...e){const t=i=>i.flatMap(a=>Array.isArray(a)?t(a):a instanceof nn?a.data.children:a.data),s=new ft;return s.visitMany(t(e)),s}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof He)return this.visitMany(e.data),this;const{type:t}=e;if(!ue.isDictionary(t)){const{length:s}=e;if(s>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ue.isUnion(t))this.nodes.push(new hi(s,0));else{const{nullCount:i}=e;ue.isNull(t)||zn.call(this,i<=0?new Uint8Array(0):Hc(e.offset,s,e.nullBitmap)),this.nodes.push(new hi(s,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function zn(n){const e=n.byteLength+7&-8;return this.buffers.push(n),this.bufferRegions.push(new rs(this._byteLength,e)),this._byteLength+=e,this}function tI(n){var e;const{type:t,length:s,typeIds:i,valueOffsets:a}=n;if(zn.call(this,i),t.mode===Ut.Sparse)return uf.call(this,n);if(t.mode===Ut.Dense){if(n.offset<=0)return zn.call(this,a),uf.call(this,n);{const l=new Int32Array(s),c=Object.create(null),d=Object.create(null);for(let f,m,y=-1;++y<s;)(f=i[y])!==void 0&&((m=c[f])===void 0&&(m=c[f]=a[y]),l[y]=a[y]-m,d[f]=((e=d[f])!==null&&e!==void 0?e:0)+1);zn.call(this,l),this.visitMany(n.children.map((f,m)=>{const y=t.typeIds[m],x=c[y],b=d[y];return f.slice(x,Math.min(s,b))}))}}return this}function nI(n){let e;return n.nullCount>=n.length?zn.call(this,new Uint8Array(0)):(e=n.values)instanceof Uint8Array?zn.call(this,Hc(n.offset,n.length,e)):zn.call(this,Vc(n.values))}function Os(n){return zn.call(this,n.values.subarray(0,n.length*n.stride))}function pu(n){const{length:e,values:t,valueOffsets:s}=n,i=et(s[0]),a=et(s[e]),l=Math.min(a-i,t.byteLength-i);return zn.call(this,Hx(-i,e+1,s)),zn.call(this,t.subarray(i,i+l)),this}function Vf(n){const{length:e,valueOffsets:t}=n;if(t){const{[0]:s,[e]:i}=t;return zn.call(this,Hx(-s,e+1,t)),this.visit(n.children[0].slice(s,i-s))}return this.visit(n.children[0])}function uf(n){return this.visitMany(n.type.children.map((e,t)=>n.children[t]).filter(Boolean))[0]}ft.prototype.visitBool=nI;ft.prototype.visitInt=Os;ft.prototype.visitFloat=Os;ft.prototype.visitUtf8=pu;ft.prototype.visitLargeUtf8=pu;ft.prototype.visitBinary=pu;ft.prototype.visitLargeBinary=pu;ft.prototype.visitFixedSizeBinary=Os;ft.prototype.visitDate=Os;ft.prototype.visitTimestamp=Os;ft.prototype.visitTime=Os;ft.prototype.visitDecimal=Os;ft.prototype.visitList=Vf;ft.prototype.visitStruct=uf;ft.prototype.visitUnion=tI;ft.prototype.visitInterval=Os;ft.prototype.visitDuration=Os;ft.prototype.visitFixedSizeList=Vf;ft.prototype.visitMap=Vf;class Fb extends Af{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new gc,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,rn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Ui(e)?e.then(t=>this.writeAll(t)):Yr(e)?Qf(this,e):Yf(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof gc?this._sink=e:(this._sink=new gc,e&&DS(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&RS(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!t||!lf(t,this._schema))&&(t==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof Ht&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof nn&&!(t=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(t&&!lf(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof nn?e instanceof Uf||this._writeRecordBatch(e):e instanceof Ht?this.writeAll(e.batches):ka(e)&&this.writeAll(e)}_writeMessage(e,t=8){const s=t-1,i=Wt.encode(e),a=i.byteLength,l=this._writeLegacyIpcFormat?4:8,c=a+l+s&~s,d=c-a-l;return e.headerType===ze.RecordBatch?this._recordBatchBlocks.push(new ui(c,e.bodyLength,this._position)):e.headerType===ze.DictionaryBatch&&this._dictionaryBlocks.push(new ui(c,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(c-l)),a>0&&this._write(i),this._writePadding(d)}_write(e){if(this._started){const t=Le(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(Wt.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(pa)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:s,bufferRegions:i,buffers:a}=ft.assemble(e),l=new pn(e.numRows,s,i),c=Wt.from(l,t);return this._writeDictionaries(e)._writeMessage(c)._writeBodyBuffers(a)}_writeDictionaryBatch(e,t,s=!1){const{byteLength:i,nodes:a,bufferRegions:l,buffers:c}=ft.assemble(new He([e])),d=new pn(e.length,a,l),f=new cs(d,t,s),m=Wt.from(f,i);return this._writeMessage(m)._writeBodyBuffers(c)}_writeBodyBuffers(e){let t,s,i;for(let a=-1,l=e.length;++a<l;)(t=e[a])&&(s=t.byteLength)>0&&(this._write(t),(i=(s+7&-8)-s)>0&&this._writePadding(i));return this}_writeDictionaries(e){var t,s;for(const[i,a]of e.dictionaries){const l=(t=a?.data)!==null&&t!==void 0?t:[],c=this._seenDictionaries.get(i),d=(s=this._dictionaryDeltaOffsets.get(i))!==null&&s!==void 0?s:0;if(!c||c.data[0]!==l[0])for(const[f,m]of l.entries())this._writeDictionaryBatch(m,i,f>0);else if(d<l.length)for(const f of l.slice(d))this._writeDictionaryBatch(f,i,!0);this._seenDictionaries.set(i,a),this._dictionaryDeltaOffsets.set(i,l.length)}return this}}class Wf extends Fb{static writeAll(e,t){const s=new Wf(t);return Ui(e)?e.then(i=>s.writeAll(i)):Yr(e)?Qf(s,e):Yf(s,e)}}class qf extends Fb{static writeAll(e){const t=new qf;return Ui(e)?e.then(s=>t.writeAll(s)):Yr(e)?Qf(t,e):Yf(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t,s=!1){if(!s&&this._seenDictionaries.has(t))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,s)}_writeFooter(e){const t=fa.encode(new fa(e,xt.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function Yf(n,e){let t=e;e instanceof Ht&&(t=e.batches,n.reset(void 0,e.schema));for(const s of t)n.write(s);return n.finish()}function Qf(n,e){return ke(this,void 0,void 0,function*(){var t,s,i,a,l,c,d;try{for(t=!0,s=Fi(e);i=yield s.next(),a=i.done,!a;t=!0){d=i.value,t=!1;const f=d;n.write(f)}}catch(f){l={error:f}}finally{try{!t&&!a&&(c=s.return)&&(yield c.call(s))}finally{if(l)throw l.error}}return n.finish()})}function sI(n,e="stream"){return(e==="stream"?Wf:qf).writeAll(n).toUint8Array(!0)}var iI=Object.create,Pb=Object.defineProperty,rI=Object.getOwnPropertyDescriptor,oI=Object.getOwnPropertyNames,aI=Object.getPrototypeOf,lI=Object.prototype.hasOwnProperty,cI=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),uI=(n,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of oI(e))!lI.call(n,i)&&i!==t&&Pb(n,i,{get:()=>e[i],enumerable:!(s=rI(e,i))||s.enumerable});return n},dI=(n,e,t)=>(t=n!=null?iI(aI(n)):{},uI(!n||!n.__esModule?Pb(t,"default",{value:n,enumerable:!0}):t,n)),hI=cI((n,e)=>{e.exports=Worker}),fI=(n=>(n[n.UNDEFINED=0]="UNDEFINED",n[n.AUTOMATIC=1]="AUTOMATIC",n[n.READ_ONLY=2]="READ_ONLY",n[n.READ_WRITE=3]="READ_WRITE",n))(fI||{}),pI=(n=>(n[n.IDENTIFIER=0]="IDENTIFIER",n[n.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",n[n.STRING_CONSTANT=2]="STRING_CONSTANT",n[n.OPERATOR=3]="OPERATOR",n[n.KEYWORD=4]="KEYWORD",n[n.COMMENT=5]="COMMENT",n))(pI||{}),mI=(n=>(n[n.NONE=0]="NONE",n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.WARNING=3]="WARNING",n[n.ERROR=4]="ERROR",n))(mI||{}),gI=(n=>(n[n.NONE=0]="NONE",n[n.CONNECT=1]="CONNECT",n[n.DISCONNECT=2]="DISCONNECT",n[n.OPEN=3]="OPEN",n[n.QUERY=4]="QUERY",n[n.INSTANTIATE=5]="INSTANTIATE",n))(gI||{}),yI=(n=>(n[n.NONE=0]="NONE",n[n.OK=1]="OK",n[n.ERROR=2]="ERROR",n[n.START=3]="START",n[n.RUN=4]="RUN",n[n.CAPTURE=5]="CAPTURE",n))(yI||{}),xI=(n=>(n[n.NONE=0]="NONE",n[n.WEB_WORKER=1]="WEB_WORKER",n[n.NODE_WORKER=2]="NODE_WORKER",n[n.BINDINGS=3]="BINDINGS",n[n.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",n))(xI||{}),vI=class{log(n){}},bI=(n=>(n[n.SUCCESS=0]="SUCCESS",n))(bI||{}),_I=class{constructor(n,e){this._bindings=n,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(n){return n(this._bindings,this._conn)}async query(n){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:n});let e=await this._bindings.runQuery(this._conn,n),t=kn.from(e);return console.assert(t.isSync(),"Reader is not sync"),console.assert(t.isFile(),"Reader is not file"),new Ht(t)}async send(n){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:n});let e=await this._bindings.startPendingQuery(this._conn,n);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let t=new Ub(this._bindings,this._conn,e),s=await kn.from(t);return console.assert(s.isAsync()),console.assert(s.isStream()),s}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(n){return await this._bindings.getTableNames(this._conn,n)}async prepare(n){let e=await this._bindings.createPrepared(this._conn,n);return new wI(this._bindings,this._conn,e)}async insertArrowTable(n,e){let t=sI(n,"stream");await this.insertArrowFromIPCStream(t,e)}async insertArrowFromIPCStream(n,e){await this._bindings.insertArrowFromIPCStream(this._conn,n,e)}async insertCSVFromPath(n,e){await this._bindings.insertCSVFromPath(this._conn,n,e)}async insertJSONFromPath(n,e){await this._bindings.insertJSONFromPath(this._conn,n,e)}},Ub=class{constructor(n,e,t){this.db=n,this.conn=e,this.header=t,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let n;return this._inFlight!=null?(n=await this._inFlight,this._inFlight=null):n=await this.db.fetchQueryResults(this.conn),this._depleted=n.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:n}}[Symbol.asyncIterator](){return this}},wI=class{constructor(n,e,t){this.bindings=n,this.connectionId=e,this.statementId=t}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...n){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,n),t=kn.from(e);return console.assert(t.isSync()),console.assert(t.isFile()),new Ht(t)}async send(...n){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,n),t=new Ub(this.bindings,this.connectionId,e),s=await kn.from(t);return console.assert(s.isAsync()),console.assert(s.isStream()),s}},SI=(n=>(n.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",n.CLOSE_PREPARED="CLOSE_PREPARED",n.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",n.CONNECT="CONNECT",n.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",n.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",n.CREATE_PREPARED="CREATE_PREPARED",n.DISCONNECT="DISCONNECT",n.DROP_FILE="DROP_FILE",n.DROP_FILES="DROP_FILES",n.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",n.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",n.FLUSH_FILES="FLUSH_FILES",n.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",n.GET_TABLE_NAMES="GET_TABLE_NAMES",n.GET_VERSION="GET_VERSION",n.GLOB_FILE_INFOS="GLOB_FILE_INFOS",n.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",n.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",n.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",n.INSTANTIATE="INSTANTIATE",n.OPEN="OPEN",n.PING="PING",n.POLL_PENDING_QUERY="POLL_PENDING_QUERY",n.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",n.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",n.REGISTER_FILE_URL="REGISTER_FILE_URL",n.RESET="RESET",n.RUN_PREPARED="RUN_PREPARED",n.RUN_QUERY="RUN_QUERY",n.SEND_PREPARED="SEND_PREPARED",n.START_PENDING_QUERY="START_PENDING_QUERY",n.TOKENIZE="TOKENIZE",n))(SI||{}),NI=(n=>(n.CONNECTION_INFO="CONNECTION_INFO",n.ERROR="ERROR",n.FEATURE_FLAGS="FEATURE_FLAGS",n.FILE_BUFFER="FILE_BUFFER",n.FILE_INFOS="FILE_INFOS",n.FILE_SIZE="FILE_SIZE",n.FILE_STATISTICS="FILE_STATISTICS",n.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",n.LOG="LOG",n.OK="OK",n.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",n.QUERY_PLAN="QUERY_PLAN",n.QUERY_RESULT="QUERY_RESULT",n.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",n.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",n.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",n.REGISTERED_FILE="REGISTERED_FILE",n.SCRIPT_TOKENS="SCRIPT_TOKENS",n.SUCCESS="SUCCESS",n.TABLE_NAMES="TABLE_NAMES",n.VERSION_STRING="VERSION_STRING",n))(NI||{}),Fe=class{constructor(n,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=n,this.data=e,this.promise=new Promise((t,s)=>{this.promiseResolver=t,this.promiseRejecter=s})}};function vc(n){switch(n.typeId){case T.Binary:return{sqlType:"binary"};case T.Bool:return{sqlType:"bool"};case T.Date:return{sqlType:"date"};case T.DateDay:return{sqlType:"date32[d]"};case T.DateMillisecond:return{sqlType:"date64[ms]"};case T.Decimal:{let e=n;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case T.Float:return{sqlType:"float"};case T.Float16:return{sqlType:"float16"};case T.Float32:return{sqlType:"float32"};case T.Float64:return{sqlType:"float64"};case T.Int:return{sqlType:"int32"};case T.Int16:return{sqlType:"int16"};case T.Int32:return{sqlType:"int32"};case T.Int64:return{sqlType:"int64"};case T.Uint16:return{sqlType:"uint16"};case T.Uint32:return{sqlType:"uint32"};case T.Uint64:return{sqlType:"uint64"};case T.Uint8:return{sqlType:"uint8"};case T.IntervalDayTime:return{sqlType:"interval[dt]"};case T.IntervalYearMonth:return{sqlType:"interval[m]"};case T.List:return{sqlType:"list",valueType:vc(n.valueType)};case T.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:n.byteWidth};case T.Null:return{sqlType:"null"};case T.Utf8:return{sqlType:"utf8"};case T.Struct:return{sqlType:"struct",fields:n.children.map(e=>df(e.name,e.type))};case T.Map:{let e=n;return{sqlType:"map",keyType:vc(e.keyType),valueType:vc(e.valueType)}}case T.Time:return{sqlType:"time[s]"};case T.TimeMicrosecond:return{sqlType:"time[us]"};case T.TimeMillisecond:return{sqlType:"time[ms]"};case T.TimeNanosecond:return{sqlType:"time[ns]"};case T.TimeSecond:return{sqlType:"time[s]"};case T.Timestamp:return{sqlType:"timestamp",timezone:n.timezone||void 0};case T.TimestampSecond:return{sqlType:"timestamp[s]",timezone:n.timezone||void 0};case T.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:n.timezone||void 0};case T.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:n.timezone||void 0};case T.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:n.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(n.toString()))}function df(n,e){let t=vc(e);return t.name=n,t}var II=new TextEncoder,ay=class{constructor(n,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=n,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(n){this._worker=n,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(n,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let t=this._nextMessageId++;return this._pendingRequests.set(t,n),this._worker.postMessage({messageId:t,type:n.type,data:n.data},e),await n.promise}onMessage(n){var e;let t=n.data;switch(t.type){case"LOG":{this._logger.log(t.data);return}case"INSTANTIATE_PROGRESS":{for(let i of this._onInstantiationProgress)i(t.data);return}}let s=this._pendingRequests.get(t.requestId);if(!s){console.warn("unassociated response: [".concat(t.requestId,", ").concat(t.type.toString(),"]"));return}if(this._pendingRequests.delete(t.requestId),t.type=="ERROR"){let i=new Error(t.data.message);i.name=t.data.name,(e=Object.getOwnPropertyDescriptor(i,"stack"))!=null&&e.writable&&(i.stack=t.data.stack),s.promiseRejecter(i);return}switch(s.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(t.type=="OK"){s.promiseResolver(t.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],t.type=="OK"){s.promiseResolver(t.data);return}break;case"GLOB_FILE_INFOS":if(t.type=="FILE_INFOS"){s.promiseResolver(t.data);return}break;case"GET_VERSION":if(t.type=="VERSION_STRING"){s.promiseResolver(t.data);return}break;case"GET_FEATURE_FLAGS":if(t.type=="FEATURE_FLAGS"){s.promiseResolver(t.data);return}break;case"GET_TABLE_NAMES":if(t.type=="TABLE_NAMES"){s.promiseResolver(t.data);return}break;case"TOKENIZE":if(t.type=="SCRIPT_TOKENS"){s.promiseResolver(t.data);return}break;case"COPY_FILE_TO_BUFFER":if(t.type=="FILE_BUFFER"){s.promiseResolver(t.data);return}break;case"EXPORT_FILE_STATISTICS":if(t.type=="FILE_STATISTICS"){s.promiseResolver(t.data);return}break;case"CONNECT":if(t.type=="CONNECTION_INFO"){s.promiseResolver(t.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(t.type=="QUERY_RESULT"){s.promiseResolver(t.data);return}break;case"SEND_PREPARED":if(t.type=="QUERY_RESULT_HEADER"){s.promiseResolver(t.data);return}break;case"START_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){s.promiseResolver(t.data);return}break;case"POLL_PENDING_QUERY":if(t.type=="QUERY_RESULT_HEADER_OR_NULL"){s.promiseResolver(t.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],t.type=="SUCCESS"){s.promiseResolver(t.data);return}break;case"FETCH_QUERY_RESULTS":if(t.type=="QUERY_RESULT_CHUNK"){s.promiseResolver(t.data);return}break;case"CREATE_PREPARED":if(t.type=="PREPARED_STATEMENT_ID"){s.promiseResolver(t.data);return}break}s.promiseRejecter(new Error("unexpected response type: ".concat(t.type.toString())))}onError(n){console.error(n),console.error("error in duckdb worker: ".concat(n.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let n=new Fe("RESET",null);return await this.postTask(n)}async ping(){let n=new Fe("PING",null);await this.postTask(n)}async dropFile(n){let e=new Fe("DROP_FILE",n);return await this.postTask(e)}async dropFiles(){let n=new Fe("DROP_FILES",null);return await this.postTask(n)}async flushFiles(){let n=new Fe("FLUSH_FILES",null);return await this.postTask(n)}async instantiate(n,e=null,t=s=>{}){this._onInstantiationProgress.push(t);let s=new Fe("INSTANTIATE",[n,e]);return await this.postTask(s)}async getVersion(){let n=new Fe("GET_VERSION",null);return await this.postTask(n)}async getFeatureFlags(){let n=new Fe("GET_FEATURE_FLAGS",null);return await this.postTask(n)}async open(n){let e=new Fe("OPEN",n);await this.postTask(e)}async tokenize(n){let e=new Fe("TOKENIZE",n);return await this.postTask(e)}async connectInternal(){let n=new Fe("CONNECT",null);return await this.postTask(n)}async connect(){let n=await this.connectInternal();return new _I(this,n)}async disconnect(n){let e=new Fe("DISCONNECT",n);await this.postTask(e)}async runQuery(n,e){let t=new Fe("RUN_QUERY",[n,e]);return await this.postTask(t)}async startPendingQuery(n,e){let t=new Fe("START_PENDING_QUERY",[n,e]);return await this.postTask(t)}async pollPendingQuery(n){let e=new Fe("POLL_PENDING_QUERY",n);return await this.postTask(e)}async cancelPendingQuery(n){let e=new Fe("CANCEL_PENDING_QUERY",n);return await this.postTask(e)}async fetchQueryResults(n){let e=new Fe("FETCH_QUERY_RESULTS",n);return await this.postTask(e)}async getTableNames(n,e){let t=new Fe("GET_TABLE_NAMES",[n,e]);return await this.postTask(t)}async createPrepared(n,e){let t=new Fe("CREATE_PREPARED",[n,e]);return await this.postTask(t)}async closePrepared(n,e){let t=new Fe("CLOSE_PREPARED",[n,e]);await this.postTask(t)}async runPrepared(n,e,t){let s=new Fe("RUN_PREPARED",[n,e,t]);return await this.postTask(s)}async sendPrepared(n,e,t){let s=new Fe("SEND_PREPARED",[n,e,t]);return await this.postTask(s)}async globFiles(n){let e=new Fe("GLOB_FILE_INFOS",n);return await this.postTask(e)}async registerFileText(n,e){let t=II.encode(e);await this.registerFileBuffer(n,t)}async registerFileURL(n,e,t,s){e===void 0&&(e=n);let i=new Fe("REGISTER_FILE_URL",[n,e,t,s]);await this.postTask(i)}async registerEmptyFileBuffer(n){}async registerFileBuffer(n,e){let t=new Fe("REGISTER_FILE_BUFFER",[n,e]);await this.postTask(t,[e.buffer])}async registerFileHandle(n,e,t,s){let i=new Fe("REGISTER_FILE_HANDLE",[n,e,t,s]);await this.postTask(i,[])}async collectFileStatistics(n,e){let t=new Fe("COLLECT_FILE_STATISTICS",[n,e]);await this.postTask(t,[])}async exportFileStatistics(n){let e=new Fe("EXPORT_FILE_STATISTICS",n);return await this.postTask(e,[])}async copyFileToBuffer(n){let e=new Fe("COPY_FILE_TO_BUFFER",n);return await this.postTask(e)}async copyFileToPath(n,e){let t=new Fe("COPY_FILE_TO_PATH",[n,e]);await this.postTask(t)}async insertArrowFromIPCStream(n,e,t){if(e.length==0)return;let s=new Fe("INSERT_ARROW_FROM_IPC_STREAM",[n,e,t]);await this.postTask(s,[e.buffer])}async insertCSVFromPath(n,e,t){if(t.columns!==void 0){let i=[];for(let a in t.columns){let l=t.columns[a];i.push(df(a,l))}t.columnsFlat=i,delete t.columns}let s=new Fe("IMPORT_CSV_FROM_PATH",[n,e,t]);await this.postTask(s)}async insertJSONFromPath(n,e,t){if(t.columns!==void 0){let i=[];for(let a in t.columns){let l=t.columns[a];i.push(df(a,l))}t.columnsFlat=i,delete t.columns}let s=new Fe("IMPORT_JSON_FROM_PATH",[n,e,t]);await this.postTask(s)}},EI=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),kI=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),TI=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),jI=()=>(async n=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(n)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),Kf={name:"@duckdb/duckdb-wasm",version:"1.29.0"},MI=Kf.name,CI=Kf.version,Gf=Kf.version.split(".");Gf[0];Gf[1];Gf[2];var OI=()=>typeof navigator>"u";function ly(){let n="https://cdn.jsdelivr.net/npm/".concat(MI,"@").concat(CI,"/dist/");return{mvp:{mainModule:"".concat(n,"duckdb-mvp.wasm"),mainWorker:"".concat(n,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(n,"duckdb-eh.wasm"),mainWorker:"".concat(n,"duckdb-browser-eh.worker.js")}}}var jh=null,Mh=null,Ch=null,Oh=null,Dh=null;async function DI(){return jh==null&&(jh=typeof BigInt64Array<"u"),Mh==null&&(Mh=await kI()),Ch==null&&(Ch=await jI()),Oh==null&&(Oh=await TI()),Dh==null&&(Dh=await EI()),{bigInt64Array:jh,crossOriginIsolated:OI()||globalThis.crossOriginIsolated||!1,wasmExceptions:Mh,wasmSIMD:Oh,wasmThreads:Ch,wasmBulkMemory:Dh}}async function cy(n){let e=await DI();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&n.coi)return{mainModule:n.coi.mainModule,mainWorker:n.coi.mainWorker,pthreadWorker:n.coi.pthreadWorker};if(n.eh)return{mainModule:n.eh.mainModule,mainWorker:n.eh.mainWorker,pthreadWorker:null}}return{mainModule:n.mvp.mainModule,mainWorker:n.mvp.mainWorker,pthreadWorker:null}}dI(hI());function RI(){let n=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),n.decode(e))}RI();var zb=(n=>(n[n.BUFFER=0]="BUFFER",n[n.NODE_FS=1]="NODE_FS",n[n.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",n[n.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",n[n.HTTP=4]="HTTP",n[n.S3=5]="S3",n))(zb||{});class AI{tables=new Map;createTable(e,t,s=[]){const i={name:e,columns:t,data:s.map(a=>({...a}))};this.tables.set(e,i)}insertRow(e,t){const s=this.tables.get(e);if(!s)throw new Error(`Table ${e} does not exist`);s.data.push({...t})}insertRows(e,t){const s=this.tables.get(e);if(!s)throw new Error(`Table ${e} does not exist`);s.data.push(...t.map(i=>({...i})))}query(e){const t=e.toUpperCase().trim();if(t.startsWith("SELECT"))return this.executeSelect(e);if(t.startsWith("DESCRIBE"))return this.executeDescribe(e);if(t.includes("COUNT(*)"))return this.executeCount(e);throw new Error(`Unsupported SQL: ${e}`)}executeSelect(e){const t=e.match(/FROM\s+(\w+)/i);if(!t)throw new Error("Invalid SELECT statement: no FROM clause");const s=t[1],i=this.tables.get(s);if(!i)throw new Error(`Table ${s} does not exist`);const a=e.match(/LIMIT\s+(\d+)(?:\s+OFFSET\s+(\d+))?/i);let l=i.data.length,c=0;return a&&(l=parseInt(a[1]),c=a[2]?parseInt(a[2]):0),i.data.slice(c,c+l)}executeDescribe(e){const t=e.match(/DESCRIBE\s+(\w+)/i);if(!t)throw new Error("Invalid DESCRIBE statement");const s=t[1],i=this.tables.get(s);if(!i)throw new Error(`Table ${s} does not exist`);return i.columns.map(a=>{const l=this.inferColumnType(i.data,a.name);return{column_name:a.name,column_type:l,null:a.nullable?"YES":"NO"}})}executeCount(e){const t=e.match(/FROM\s+(\w+)/i);if(!t)throw new Error("Invalid COUNT statement: no FROM clause");const s=t[1],i=this.tables.get(s);if(!i)throw new Error(`Table ${s} does not exist`);return[{count:i.data.length}]}getTableInfo(e){const t=this.tables.get(e);if(!t)throw new Error(`Table ${e} does not exist`);return t.columns.map(i=>{const a=this.inferColumnType(t.data,i.name);return{...i,type:a}})}inferColumnType(e,t){if(e.length===0)return"TEXT";const s=Math.min(e.length,100),i=e.slice(0,s);let a=0,l=0,c=0,d=0,f=0;for(const y of i){const x=y[t];if(x==null||x==="")continue;f++;const b=String(x).trim();if(b.toLowerCase()==="true"||b.toLowerCase()==="false"||b==="1"||b==="0"){d++;continue}if(/^-?\d+$/.test(b)){a++;continue}if(/^-?\d*\.\d+$/.test(b)){l++;continue}if(/^\d{4}-\d{2}-\d{2}/.test(b)||/^\d{2}\/\d{2}\/\d{4}/.test(b)||/^\d{4}\/\d{2}\/\d{2}/.test(b))try{const _=new Date(b);if(!isNaN(_.getTime())){c++;continue}}catch{}}if(f===0)return"TEXT";const m=f*.8;return a>=m?"INTEGER":l>=m?"FLOAT":a+l>=m?"NUMERIC":c>=m?"DATE":d>=m?"BOOLEAN":"TEXT"}getTableData(e,t=100,s=0){const i=this.tables.get(e);if(!i)throw new Error(`Table ${e} does not exist`);return i.data.slice(s,s+t)}getTableCount(e){const t=this.tables.get(e);if(!t)throw new Error(`Table ${e} does not exist`);return t.data.length}dropTable(e){this.tables.delete(e)}listTables(){return Array.from(this.tables.keys())}getTableSchema(e){return this.tables.get(e)}}const Me=new AI,na=Object.freeze(Object.defineProperty({__proto__:null,memoryDataStore:Me},Symbol.toStringTag,{value:"Module"}));function Vr(){const n=window.performance;if(n&&n.memory){const e=n.memory,t=e.usedJSHeapSize/e.jsHeapSizeLimit*100;return{usedJSHeapSize:e.usedJSHeapSize,totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,usagePercentage:t,isNearLimit:t>70,isCritical:t>85}}return{usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0,usagePercentage:0,isNearLimit:!1,isCritical:!1}}function sa(n){return n>=1073741824?`${(n/1073741824).toFixed(2)} GB`:`${(n/1048576).toFixed(2)} MB`}function $b(){const n=Vr();return n.isCritical?{shouldWarn:!0,message:`🚨 メモリ使用量が危険レベルです (${n.usagePercentage.toFixed(1)}%)
大容量ファイルの処理は制限される可能性があります。`}:n.isNearLimit?{shouldWarn:!0,message:`⚠️ メモリ使用量が高くなっています (${n.usagePercentage.toFixed(1)}%)
ファイルサイズを小さくすることを推奨します。`}:{shouldWarn:!1,message:""}}function LI(){window.gc&&(window.gc(),console.log("🗑️ ガベージコレクション実行"))}function BI(n=""){const e=Vr();e.jsHeapSizeLimit>0&&(console.log(`📊 メモリ使用状況${n?` (${n})`:""}:`),console.log(`  使用中: ${sa(e.usedJSHeapSize)}`),console.log(`  総容量: ${sa(e.totalJSHeapSize)}`),console.log(`  上限: ${sa(e.jsHeapSizeLimit)}`),console.log(`  使用率: ${e.usagePercentage.toFixed(1)}%`),e.isCritical?console.warn("🚨 メモリ使用量が危険レベルです！"):e.isNearLimit&&console.warn("⚠️ メモリ使用量が高くなっています"))}let xr=null,$n=!1;function FI(){try{if(typeof Worker>"u")return console.log("💡 Web Workers非サポート環境: メモリ内データストアを使用"),!1;if(window.location.protocol==="file:")return console.log("💡 ローカルファイル環境: メモリ内データストアを使用"),!1;if(window.location.protocol==="http:"&&!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("127.0.0.1")&&!window.location.hostname.includes("192.168.")&&!window.location.hostname.includes("10.0.")&&!window.location.hostname.includes("172."))return console.log("💡 HTTP本番環境: メモリ内データストアを使用"),!1;try{new Worker("data:application/javascript,self.close();").terminate()}catch{return console.log("💡 Worker作成テスト失敗: メモリ内データストアを使用"),!1}return!0}catch{return console.log("💡 環境判定エラー: メモリ内データストアを使用"),!1}}async function Ds(){if(!FI())return $n=!0,console.log("✅ 互換性モード: メモリ内データストアで動作中（機能に制限はありません）"),null;if($n)return console.log("メモリ内データストアを使用中"),null;if(xr)return xr;try{const n=new vI;try{const e=ly(),t=await cy(e),s=new Worker(t.mainWorker),i=new ay(n,s);await i.instantiate(t.mainModule,t.pthreadWorker||void 0);const a=await i.connect();return xr={db:i,conn:a},console.log("DuckDB初期化成功"),xr}catch(e){if(e instanceof Error&&(e.name==="SecurityError"||e.message.includes("insecure")||e.message.includes("SecurityError")))throw console.warn("セキュリティエラーによりDuckDB初期化失敗、メモリ内データストアにフォールバック:",e.message),e;console.warn("pthread使用での初期化に失敗、代替方法を試行:",e);try{const t=ly(),s=await cy(t),i=new Worker(s.mainWorker),a=new ay(n,i);await a.instantiate(s.mainModule);const l=await a.connect();return xr={db:a,conn:l},console.log("DuckDB初期化成功（pthread無し）"),xr}catch(t){throw console.warn("代替初期化も失敗:",t),t}}}catch(n){return console.log("DuckDBを使用できません。メモリ内データストアで動作します。"),n instanceof Error&&n.message.includes("SecurityError")&&console.log("📝 これは通常の動作です。セキュリティ制限によりDuckDBが無効化されました。"),$n=!0,null}}async function fi(n,e){const t=await Ds();return $n||!t?Me.query(n):(await t.conn.query(n,e)).toArray()}async function PI(n,e="data"){console.log(`🚀 ファイル処理開始: ${n.name} (${(n.size/(1024*1024)).toFixed(2)}MB)`),await Ds(),BI("ファイル処理開始前");const t=$b();t.shouldWarn&&(console.warn(t.message),Vr().isCritical&&(LI(),await new Promise(d=>setTimeout(d,1e3))));const s=n.size/(1024*1024),i=Vr(),a=i.jsHeapSizeLimit>0?(i.jsHeapSizeLimit-i.usedJSHeapSize)/(1024*1024):2048;s>a*.5&&console.warn(`⚠️ ファイルサイズ (${s.toFixed(1)}MB) が利用可能メモリ (${a.toFixed(1)}MB) に対して大きすぎる可能性があります`),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&s>5&&console.warn("🍎 Safari環境で大容量ファイルを検出、特別処理を適用");try{const c=n.name.split(".").pop()?.toLowerCase();switch(c){case"csv":return await uy(n,e);case"tsv":return await uy(n,e,"	");case"json":return await zI(n,e);case"sqlite":case"sqlite3":try{return await ma(n)}catch(d){if(d instanceof Error&&d.message.includes("DuckDBファイル"))return console.log("SQLiteファイルとして失敗、DuckDBファイルとして再試行"),await ga(n);throw d}case"db":return await $I(n);case"duckdb":return await ga(n);default:throw new Error(`Unsupported file type: ${c}`)}}catch(c){throw console.error("ファイル読み込みエラー:",c),new Error(`ファイル読み込みに失敗しました: ${c instanceof Error?c.message:"Unknown error"}`)}}async function UI(n,e=1024*1024){console.log(`📚 チャンク読み込み開始: ${Math.ceil(n.size/e)} チャンク`);let t="",s=0;for(;s<n.size;){const a=await n.slice(s,Math.min(s+e,n.size)).text();t+=a,s+=e;const l=Math.round(s/n.size*100);console.log(`📖 読み込み進捗: ${l}%`),s%(e*5)===0&&await new Promise(c=>setTimeout(c,50))}return console.log("✅ チャンク読み込み完了"),t}async function uy(n,e,t=","){const s=await Ds();try{let i=function(x,b){const _=[];let w="",N=!1;for(let I=0;I<x.length;I++){const k=x[I];k==='"'?N&&x[I+1]==='"'?(w+='"',I++):N=!N:k===b&&!N?(_.push(w.trim()),w=""):w+=k}return _.push(w.trim()),_};console.log(`📄 CSV読み込み開始: ${n.name}`);const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=n.size/(1024*1024);let c;a&&l>5?(console.log("🍎 Safari大容量ファイル: チャンク読み込みを実行"),c=await UI(n)):c=await n.text(),console.log(`📊 ファイル読み込み完了: ${c.length} 文字`);const d=c.split(`
`).filter(x=>x.trim());if(d.length===0)throw new Error("CSVファイルが空です");const f=i(d[0],t).map(x=>x||`column_${Math.random().toString(36).substr(2,9)}`);if(f.length===0)throw new Error("CSVファイルのヘッダーを読み取れません");const m=[];for(let x=1;x<d.length;x++){const b=i(d[x],t),_={};f.forEach((w,N)=>{_[w]=b[N]||null}),m.push(_)}if(m.length===0)throw new Error("CSVファイルにデータがありません");const y=f.map(x=>x.replace(/[^a-zA-Z0-9_]/g,"_"));if($n||!s){const x=y.map(w=>({name:w,type:"TEXT",nullable:!0}));Me.createTable(e,x);const b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_=b?1e3:5e3;console.log(`💾 メモリストア挿入開始: ${m.length}行を${_}行ずつ処理`);for(let w=0;w<m.length;w+=_){const N=m.slice(w,w+_),I=Math.round((w+N.length)/m.length*100);console.log(`📊 メモリ挿入進捗: ${I}% (${w+N.length}/${m.length}行)`);const k=N.map(D=>{const L={};return y.forEach((M,B)=>{L[M]=D[f[B]]}),L});Me.insertRows(e,k),b&&w%(_*2)===0&&await new Promise(D=>setTimeout(D,50))}}else{const x=y.map(I=>`"${I}" TEXT`).join(", ");await s.conn.query(`CREATE TABLE ${e} (${x})`);const b=y.map(()=>"?").join(", "),_=`INSERT INTO ${e} (${y.map(I=>`"${I}"`).join(", ")}) VALUES (${b})`,w=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),N=w?500:1e3;console.log(`💾 データ挿入開始: ${m.length}行を${N}行ずつ処理`);for(let I=0;I<m.length;I+=N){const k=m.slice(I,I+N),D=Math.round((I+k.length)/m.length*100);console.log(`📊 挿入進捗: ${D}% (${I+k.length}/${m.length}行)`);for(const L of k){const M=y.map((B,R)=>L[f[R]]);await s.conn.query(_,M)}w&&I%(N*4)===0&&await new Promise(L=>setTimeout(L,100))}}return console.log(`CSVファイル読み込み完了: ${m.length}行、${f.length}列`),[e]}catch(i){throw console.error("CSV読み込みエラー:",i),new Error(`CSVファイルの読み込みに失敗しました: ${i instanceof Error?i.message:"Unknown error"}`)}}async function zI(n,e){const t=await Ds();try{const s=await n.text();let i;try{const d=JSON.parse(s);i=Array.isArray(d)?d:[d]}catch{throw new Error("JSONファイルの解析に失敗しました。有効なJSON形式ではありません。")}if(i.length===0)throw new Error("JSONファイルにデータがありません");const a=new Set;i.forEach(d=>{typeof d=="object"&&d!==null&&Object.keys(d).forEach(f=>a.add(f))});const l=Array.from(a);if(l.length===0)throw new Error("JSONファイルから有効なカラムを検出できませんでした");const c=l.map(d=>d.replace(/[^a-zA-Z0-9_]/g,"_"));if($n||!t){const d=c.map(m=>({name:m,type:"TEXT",nullable:!0}));Me.createTable(e,d);const f=i.map(m=>{const y={};return l.forEach((x,b)=>{const _=c[b],w=m[x];w==null?y[_]=null:typeof w=="object"?y[_]=JSON.stringify(w):y[_]=String(w)}),y});Me.insertRows(e,f)}else{const d=c.map(x=>`"${x}" TEXT`).join(", ");await t.conn.query(`CREATE TABLE ${e} (${d})`);const f=c.map(()=>"?").join(", "),m=`INSERT INTO ${e} (${c.map(x=>`"${x}"`).join(", ")}) VALUES (${f})`,y=1e3;for(let x=0;x<i.length;x+=y){const b=i.slice(x,x+y);for(const _ of b){const w=l.map(N=>{const I=_[N];return I==null?null:typeof I=="object"?JSON.stringify(I):String(I)});await t.conn.query(m,w)}}}return console.log(`JSONファイル読み込み完了: ${i.length}行、${l.length}列`),[e]}catch(s){throw console.error("JSON読み込みエラー:",s),new Error(`JSONファイルの読み込みに失敗しました: ${s instanceof Error?s.message:"Unknown error"}`)}}async function $I(n){try{console.log("🔍 データベースファイルの形式を判定中:",n.name);const t=await n.slice(0,100).arrayBuffer(),s=new Uint8Array(t);if(s.length<16)throw new Error("ファイルサイズが小さすぎます");const i=String.fromCharCode(...s.slice(0,20));console.log("🔍 ファイルヘッダー検査:",JSON.stringify(i.substring(0,15)));const a=Array.from(s.slice(0,16)).map(f=>f.toString(16).padStart(2,"0")).join(" ");if(console.log("🔍 ヘッダーバイト値:",a),i.startsWith("SQLite format 3"))return console.log("✅ SQLiteファイルとして確実に検出"),await ma(n);if(i.includes("DUCK")||s.slice(4,8).every((f,m)=>f==="DUCK".charCodeAt(m))||i.includes("duckdb"))return console.log("✅ DuckDBファイルとして確実に検出"),await ga(n);const c=i.split("").filter(f=>{const m=f.charCodeAt(0);return m>=32&&m<=126}).length,d=c/i.length;console.log(`📊 印刷可能文字の割合: ${d.toFixed(2)} (${c}/${i.length})`),console.log("🔄 SQLiteファイルとして優先的に試行中...");try{const f=await ma(n);return console.log("✅ SQLiteファイルとしての読み込み成功"),f}catch(f){if(console.warn("❌ SQLiteファイルとしての読み込み失敗:",f),d<.7){console.log("🔄 バイナリファイルのため、DuckDBファイルとして試行");try{const m=await ga(n);return console.log("✅ DuckDBファイルとしての読み込み成功"),m}catch(m){throw console.error("❌ DuckDBファイルとしても読み込み失敗:",m),new Error(`データベースファイルの読み込みに失敗しました。SQLiteエラー: ${f instanceof Error?f.message:"Unknown"}, DuckDBエラー: ${m instanceof Error?m.message:"Unknown"}`)}}else throw f}}catch(e){throw console.error("データベースファイル判定エラー:",e),new Error(`データベースファイルの読み込みに失敗しました: ${e instanceof Error?e.message:"Unknown error"}`)}}async function ma(n,e=!0){try{console.log("🗄️ SQLiteファイルの読み込みを開始:",n.name),console.log("📖 ファイル読み込み中...");const t=await n.arrayBuffer(),s=new Uint8Array(t);if(console.log(`📊 ファイルサイズ: ${s.length} bytes (${(s.length/(1024*1024)).toFixed(2)} MB)`),s.length<16)throw new Error("ファイルサイズが小さすぎます。有効なSQLiteファイルではありません。");const i=String.fromCharCode(...s.slice(0,15));console.log("🔍 ファイルヘッダー検査:",JSON.stringify(i));const a=Array.from(s.slice(0,16)).map(d=>d.toString(16).padStart(2,"0")).join(" ");if(console.log("🔍 ヘッダーバイト値:",a),i!=="SQLite format 3"){if(i.includes("DUCK")&&e)return console.log("🔄 SQLiteとして処理しようとしましたが、DuckDBファイルとして自動切り替えします"),await ga(n);throw new Error(`有効なSQLiteファイルではありません。ヘッダー: "${i}"`)}console.log("✅ SQLiteファイル形式確認完了"),console.log("📦 sql.jsライブラリの読み込み開始");const l=await HI();console.log("✅ sql.jsライブラリ読み込み完了"),console.log("🗄️ SQLiteデータベースの初期化中...");let c;try{c=new l.Database(s),console.log("✅ SQLiteデータベース初期化完了")}catch(d){throw console.error("❌ SQLiteデータベース初期化エラー:",d),new Error(`SQLiteデータベースの初期化に失敗しました: ${d instanceof Error?d.message:"Unknown error"}`)}try{console.log("📊 データベース情報を取得中...");try{const x=c.exec("PRAGMA schema_version;");console.log("SQLiteスキーマバージョン:",x)}catch(x){console.warn("スキーマバージョン取得失敗:",x)}console.log("📋 テーブル一覧取得中...");const d="SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'";console.log("実行するクエリ:",d);const f=c.exec(d);if(console.log("テーブルクエリ結果:",f),!f.length||!f[0].values.length){console.log("🔄 代替クエリを試行中...");const b=c.exec("SELECT name FROM sqlite_master WHERE type='table'");if(console.log("全テーブル:",b),!b.length||!b[0].values.length)throw new Error("SQLiteファイルにテーブルが見つかりません");const _=b[0].values.filter(w=>!String(w[0]).startsWith("sqlite_"));if(_.length===0)throw new Error("ユーザーテーブルが見つかりません（システムテーブルのみ存在）");console.log("フィルタ後のテーブル:",_),f[0]={...b[0],values:_}}const m=f[0].values.map(x=>x[0]);console.log("🎯 検出されたテーブル:",m);for(const x of m)console.log(`📥 テーブル ${x} を読み込み中...`),await VI(c,x);console.log(`✅ SQLiteファイルの読み込み完了: ${m.length}個のテーブル`),console.log("🔍 メモリ内データストアの最終確認:");const y=Me.listTables();console.log("📋 メモリストア内のテーブル一覧:",y);for(const x of y)try{const b=Me.getTableCount(x),_=Me.getTableInfo(x);console.log(`📊 テーブル ${x}: ${b}行, ${_.length}列`)}catch(b){console.warn(`⚠️ テーブル ${x} の情報取得に失敗:`,b)}return m}finally{c&&(console.log("🔒 SQLiteデータベースを閉じています..."),c.close(),console.log("✅ SQLiteデータベースクローズ完了"))}}catch(t){throw console.error("❌ SQLiteファイル読み込みエラー:",t),new Error(`SQLiteファイルの読み込みに失敗しました: ${t instanceof Error?t.message:"Unknown error"}`)}}let Ql=null;async function HI(){if(Ql)return console.log("🚀 sql.js キャッシュから返却"),Ql;try{if(console.log("📦 sql.jsをCDNから読み込み中..."),window.initSqlJs){console.log("🔍 sql.js 既に読み込み済み、初期化を実行");try{const a=await window.initSqlJs({locateFile:l=>`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${l}`});return Ql=a,console.log("✅ sql.js 初期化完了（既存）"),a}catch(a){console.error("❌ sql.js 初期化エラー（既存）:",a),window.initSqlJs=void 0}}const n=["https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js","https://unpkg.com/sql.js@1.8.0/dist/sql-wasm.js","https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.js"];let e=!1,t=null;for(const a of n)try{console.log(`🌐 CDN試行: ${a}`),await new Promise((l,c)=>{const d=document.querySelector('script[src*="sql-wasm.js"]');d&&(console.log("📋 既存のsql.jsスクリプトを発見、削除して再読み込み"),d.remove());const f=document.createElement("script");f.src=a,f.crossOrigin="anonymous",f.type="text/javascript";const m=setTimeout(()=>{f.remove(),c(new Error(`タイムアウト: ${a}`))},15e3);f.onload=()=>{clearTimeout(m),console.log(`✅ sql.js スクリプト読み込み完了: ${a}`),l()},f.onerror=y=>{clearTimeout(m),f.remove(),c(new Error(`読み込みエラー: ${a} - ${y}`))},document.head.appendChild(f)}),e=!0,console.log(`🎉 CDN読み込み成功: ${a}`);break}catch(l){t=l,console.warn(`❌ CDN ${a} 失敗:`,l);continue}if(!e){const a=t?` 最後のエラー: ${t.message}`:"";throw new Error(`全てのCDNからの読み込みに失敗しました${a}`)}console.log("⏳ sql.js初期化関数の検出を待機中...");let s=0;const i=50;for(;s<i;){if(window.initSqlJs&&typeof window.initSqlJs=="function"){console.log(`🎯 sql.js初期化関数を検出 (${s+1}回目)`);break}await new Promise(a=>setTimeout(a,100)),s++}if(!window.initSqlJs)throw new Error(`sql.jsライブラリが正しく読み込まれませんでした (${s}回試行)`);console.log("🚀 sql.js初期化を実行中...");try{const a=await window.initSqlJs({locateFile:l=>{console.log(`📁 WASMファイル要求: ${l}`);const d=[`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${l}`,`https://unpkg.com/sql.js@1.8.0/dist/${l}`,`https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/${l}`][0];return console.log(`📁 WASMファイル選択: ${d}`),d}});if(!a||!a.Database)throw new Error("sql.js初期化は成功したが、Databaseクラスが見つかりません");return Ql=a,console.log("✅ sql.js 初期化完了（新規）"),a}catch(a){throw console.error("❌ sql.js初期化エラー:",a),new Error(`sql.js初期化に失敗しました: ${a instanceof Error?a.message:"Unknown error"}`)}}catch(n){throw console.error("sql.js読み込みエラー:",n),new Error(`SQLite解析ライブラリの読み込みに失敗しました: ${n instanceof Error?n.message:"Unknown error"}

考えられる原因:
1. インターネット接続の問題
2. ブラウザのJavaScript制限
3. CORS設定の問題

代替案:
1. SQLiteファイルをCSV形式でエクスポート
2. 別のブラウザで試行
3. インターネット接続を確認`)}}async function VI(n,e){try{console.log(`📥 テーブル ${e} の読み込み開始`);const t=`SELECT name FROM sqlite_master WHERE type='table' AND name='${e}'`;console.log(`🔍 テーブル存在確認クエリ: ${t}`);const s=n.exec(t);if(console.log("🔍 テーブル存在確認結果:",s),!s.length||!s[0].values.length){console.warn(`⚠️ テーブル ${e} が存在しません`);return}const i=`PRAGMA table_info("${e}")`;console.log(`📋 スキーマ取得クエリ: ${i}`);const a=n.exec(i);if(console.log("📋 スキーマ取得結果:",a),!a.length||!a[0].values.length){console.warn(`⚠️ テーブル ${e} のスキーマ取得に失敗`);return}const l=a[0].values.map(b=>({name:b[1],type:b[2]||"TEXT",nullable:b[3]===0}));console.log(`📊 テーブル ${e} のカラム:`,l.map(b=>`${b.name}(${b.type})`));const c=`SELECT COUNT(*) as count FROM "${e}"`;console.log(`🔢 行数確認クエリ: ${c}`);const d=n.exec(c),f=d.length>0&&d[0].values.length>0?d[0].values[0][0]:0;console.log(`🔢 テーブル ${e} の行数: ${f}`);const m=`SELECT * FROM "${e}"`;console.log(`📊 データ取得クエリ: ${m}`);const y=n.exec(m);console.log("📊 データ取得結果構造:",{length:y.length,hasValues:y.length>0&&y[0].values,valueCount:y.length>0&&y[0].values?y[0].values.length:0});const x=[];if(y.length&&y[0].values&&y[0].values.length)for(const b of y[0].values){const _={};l.forEach((w,N)=>{_[w.name]=b[N]}),x.push(_)}console.log(`💾 メモリストアにテーブル ${e} を作成中...`);try{Me.dropTable(e),console.log(`🗑️ 既存テーブル ${e} を削除`)}catch{console.log(`ℹ️ テーブル ${e} は存在しませんでした`)}Me.createTable(e,l),console.log(`✅ テーブル ${e} の構造を作成完了`),x.length>0?(Me.insertRows(e,x),console.log(`📥 テーブル ${e} にデータを挿入完了: ${x.length}行`)):console.log(`ℹ️ テーブル ${e} はデータが空です`);try{const b=Me.getTableCount(e);console.log(`✅ メモリストアでのテーブル ${e} 確認: ${b}行`)}catch(b){console.error(`❌ テーブル ${e} の作成確認に失敗:`,b)}console.log(`🎉 テーブル ${e} の読み込み完了: ${x.length}行、${l.length}列`)}catch(t){throw console.error(`❌ テーブル ${e} の読み込みエラー:`,t),t}}async function ga(n){try{console.log("DuckDBファイルの読み込みを開始:",n.name);const e=await Ds();if($n||!e){console.log("🔄 メモリ内データストアを使用してSQLiteファイルを読み込み");const t=await ma(n,!1);return console.log("✅ フォールバック処理でSQLiteファイルを読み込み完了:",t),t}try{console.log("DuckDB WasmでDBファイルを読み込み中..."),await e.db.registerFileHandle(n.name,n,zb.BROWSER_FILEREADER,!0),console.log("✅ ファイル登録完了");const t=n.name.split(".").pop()?.toLowerCase();let s;if(t==="duckdb")s=`ATTACH '${n.name}' AS uploaded_db;`,console.log("DuckDBファイルとして処理");else{console.log("SQLiteファイルとして処理、拡張機能をインストール中...");try{await e.conn.query("INSTALL sqlite;"),await e.conn.query("LOAD sqlite;"),console.log("✅ SQLite拡張機能読み込み完了")}catch(c){console.warn("SQLite拡張機能のインストール失敗:",c)}s=`ATTACH '${n.name}' AS uploaded_db (TYPE sqlite);`}await e.conn.query(s),console.log("✅ ファイルアタッチ完了");let i;try{i=await e.conn.query("SHOW TABLES FROM uploaded_db")}catch(c){console.warn("SHOW TABLES失敗、代替方法を試行:",c),t==="duckdb"?i=await e.conn.query('SELECT name FROM uploaded_db.sqlite_master WHERE type="table"'):i=await e.conn.query('SELECT name FROM uploaded_db.sqlite_master WHERE type="table" AND name NOT LIKE "sqlite_%"')}const a=i.toArray();if(a.length===0)throw new Error("ファイルにテーブルが見つかりません");const l=a.map(c=>c.name||c.table_name||c.Name);console.log("検出されたテーブル:",l);for(const c of l)await WI(e,`uploaded_db.${c}`,c);return console.log(`✅ DuckDBファイル読み込み完了: ${l.length}個のテーブル`),l}catch(t){console.warn("❌ DuckDB Wasmでの読み込みに失敗:",t),console.log("🔄 SQLiteファイルとしてフォールバック処理を実行");try{const s=await ma(n,!1);return console.log("✅ フォールバック処理でSQLiteファイルを読み込み完了:",s),s}catch(s){throw console.error("❌ フォールバック処理も失敗:",s),new Error(`データベースファイルの読み込みに失敗しました。DuckDBエラー: ${t instanceof Error?t.message:"Unknown"}, SQLiteエラー: ${s instanceof Error?s.message:"Unknown"}`)}}}catch(e){throw console.error("❌ DBファイル読み込みエラー:",e),e instanceof Error?e:new Error("DBファイルの読み込みに失敗しました")}}async function WI(n,e,t){try{console.log(`テーブル ${e} をメモリ内データストアにコピー中...`);const a=(await n.conn.query(`DESCRIBE ${e}`)).toArray().map(x=>({name:x.column_name,type:x.column_type,nullable:x.null==="YES"})),c=(await n.conn.query(`SELECT COUNT(*) as count FROM ${e}`)).toArray()[0].count;console.log(`テーブル行数: ${c}`);const d=1e4,f=1e6;c>f&&console.warn(`テーブルが大きすぎます（${c}行）。最初の${f}行のみを読み込みます。`);try{Me.dropTable(t)}catch{}Me.createTable(t,a);const m=Math.min(c,f);let y=0;for(let x=0;x<m;x+=d){const b=Math.min(d,m-x);console.log(`バッチ処理: ${x+1}-${x+b}行目 (${Math.round(x/m*100)}%)`);const w=(await n.conn.query(`SELECT * FROM ${e} LIMIT ${b} OFFSET ${x}`)).toArray();w.length>0&&(Me.insertRows(t,w),y+=w.length),x%(d*5)===0&&await new Promise(N=>setTimeout(N,100))}console.log(`✅ テーブル ${t} のコピー完了: ${y}行、${a.length}列`),c>f&&console.warn(`⚠️ メモリ制限により、${c-f}行がスキップされました`)}catch(s){throw console.error(`❌ テーブル ${e} のコピーエラー:`,s),s}}async function hf(n){const e=await Ds();return $n||!e?Me.getTableInfo(n).map(s=>({column_name:s.name,column_type:s.type,null:s.nullable?"YES":"NO"})):(await e.conn.query(`DESCRIBE ${n}`)).toArray()}async function bc(n){const e=await Ds();return $n||!e?Me.getTableCount(n):(await e.conn.query(`SELECT COUNT(*) as count FROM ${n}`)).toArray()[0].count}async function qI(n){const e=[];try{console.log(`🔍 JSONカラムチェック開始: ${n}`);const t=await Ds();let s;if($n||!t){console.log("📊 メモリストアからデータを取得");const l=Me.getTableSchema(n);if(!l||!l.data)throw new Error(`テーブル ${n} が見つかりません`);s=l.data,console.log(`📊 メモリストアデータ行数: ${s.length}`)}else console.log("📊 DuckDBからデータを取得"),s=(await t.conn.query(`SELECT * FROM ${n}`)).toArray(),console.log(`📊 DuckDBデータ行数: ${s.length}`);if(s.length===0)return console.log("⚠️ テーブルにデータが存在しません"),e;const i=s[0],a=Object.keys(i);console.log(`📊 チェック対象カラム: ${a.join(", ")}`);for(const l of a){let c=0;const d=[],f=Math.min(s.length,100);console.log(`🔍 カラム ${l} をチェック中（サンプルサイズ: ${f}）`);for(let y=0;y<f;y++){const x=s[y][l];if(y<3&&console.log(`📝 行${y} カラム${l}: タイプ=${typeof x}, 値=${x===null?"null":x===void 0?"undefined":`"${String(x).substring(0,100)}..."`}`),!x||typeof x!="string"){y<3&&console.log(`⏭️ 行${y}: スキップ（NULL値または文字列でない）`);continue}try{const b=JSON.parse(x);typeof b=="object"&&b!==null&&!Array.isArray(b)&&(c++,d.push(b),y<3&&console.log(`✅ 行${y}: JSON解析成功 ->`,Object.keys(b)))}catch{y<3&&console.log(`❌ 行${y}: JSON解析失敗`);continue}}const m=c/f;if(console.log(`📊 カラム ${l}: JSON率 ${(m*100).toFixed(1)}% (${c}/${f})`),m>=.3&&d.length>0){console.log(`🎯 カラム ${l} でJSONデータを検出 (${(m*100).toFixed(1)}%)`);const y=[];console.log(`📊 全${s.length}行からJSONデータを抽出中...`);for(let x=0;x<s.length;x++){const _=s[x][l];if(_&&typeof _=="string")try{const w=JSON.parse(_);if(typeof w=="object"&&w!==null&&!Array.isArray(w)){const N={...w,_source_row_id:x+1,_source_table:n,_source_column:l};y.push(N),y.length<=3&&console.log(`✅ JSON行${y.length}:`,Object.keys(N))}else x<3&&console.log(`⏭️ 行${x}: JSONだが配列またはプリミティブ値のためスキップ`)}catch{}}if(console.log(`📊 JSONデータ抽出完了: ${y.length}行（全${s.length}行中）`),y.length>0){const x=`${n}_${l}_json`;if(console.log(`🛠️ テーブル作成開始: ${x}`),$n||!t){console.log(`💾 メモリストアにテーブルを作成: ${x}`);const b=ff(y);console.log("📋 カラム定義:",b.map(w=>`${w.name}(${w.type})`).join(", ")),console.log("📊 保存するデータ:",y.length,"行"),console.log("📝 サンプルデータ:",y[0]),Me.createTable(x,b,y);const _=Me.getTableCount(x);console.log(`✅ メモリストアテーブル作成完了: ${x} (${_}行保存済み)`)}else{console.log(`🦆 DuckDBにテーブルを作成: ${x}`);const b=ff(y);console.log("📋 カラム定義:",b.map(_=>`${_.name}(${_.type})`).join(", ")),await YI(y,x),console.log(`✅ DuckDBテーブル作成完了: ${x}`)}e.push(x),console.log(`🎉 新しいテーブル ${x} を作成しました (${y.length}行)`)}}else console.log(`⏭️ カラム ${l}: JSON率が閾値未満のためスキップ`)}}catch(t){throw console.error("JSONカラムからのテーブル作成エラー:",t),new Error(`JSONカラムからのテーブル作成に失敗しました: ${t instanceof Error?t.message:"Unknown error"}`)}return console.log(`🏁 JSONカラムチェック完了: ${e.length}個のテーブルを作成`),e}function ff(n){const e=new Map;for(const s of n)for(const[i,a]of Object.entries(s)){e.has(i)||e.set(i,new Set);const l=typeof a;a===null?e.get(i).add("null"):l==="number"?e.get(i).add(Number.isInteger(a)?"integer":"double"):l==="boolean"?e.get(i).add("boolean"):e.get(i).add("text")}const t=[];for(const[s,i]of e){let a;i.has("text")?a="TEXT":i.has("double")?a="DOUBLE":i.has("integer")?a="INTEGER":i.has("boolean")?a="BOOLEAN":a="TEXT",t.push({name:s,type:a,nullable:i.has("null")})}return t}async function YI(n,e){console.log(`🦆 DuckDBテーブル作成開始: ${e}, データ数: ${n.length}`);const t=await Ds();if(!t)throw new Error("DuckDB instance not available");const s=ff(n);console.log(`📊 作成するカラム数: ${s.length}`);const i=s.map(c=>`${c.name} ${c.type}${c.nullable?"":" NOT NULL"}`).join(", "),a=`CREATE TABLE ${e} (${i})`;console.log(`🔨 テーブル作成SQL: ${a}`),await t.conn.query(a),console.log(`✅ テーブル作成完了: ${e}`),console.log(`📝 データ挿入開始: ${n.length}行`);let l=0;for(const c of n){const d=s.map(x=>x.name),f=d.map(x=>{const b=c[x];return b??null}),m=f.map(()=>"?").join(", "),y=`INSERT INTO ${e} (${d.join(", ")}) VALUES (${m})`;try{await t.conn.query(y,f),l++,(l<=3||l%10===0)&&console.log(`📝 挿入済み: ${l}/${n.length}行`)}catch(x){throw console.error(`❌ データ挿入エラー (行${l+1}):`,x),console.error("❌ 問題のデータ:",c),x}}console.log(`🎉 DuckDBデータ挿入完了: ${l}行挿入`)}const QI=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),mu=Ax(n=>({settings:{isEnabled:!1,interval:30,lastUpdate:null,autoRefresh:!0,dataChangeDetection:!0},subscriptions:[],isMonitoring:!1,updateSettings:e=>{n(t=>({settings:{...t.settings,...e}}))},addSubscription:e=>{const t={...e,id:QI(),isActive:!0,lastChecked:new Date};n(s=>({subscriptions:[...s.subscriptions,t]}))},removeSubscription:e=>{n(t=>({subscriptions:t.subscriptions.filter(s=>s.id!==e)}))},toggleSubscription:e=>{n(t=>({subscriptions:t.subscriptions.map(s=>s.id===e?{...s,isActive:!s.isActive}:s)}))},updateSubscription:(e,t)=>{n(s=>({subscriptions:s.subscriptions.map(i=>i.id===e?{...i,...t}:i)}))},setMonitoring:e=>{n({isMonitoring:e})},markLastUpdate:()=>{n(e=>({settings:{...e.settings,lastUpdate:new Date}}))}}));function KI({errorMessage:n,fileName:e,fileExtension:t}){const i=[{title:"CSVファイルの場合",description:"DuckDBでCSVファイルを作成",code:`-- DuckDBでCSVファイルを作成
COPY your_table TO 'output.csv' (FORMAT CSV, HEADER);`,applicableFor:["csv"]},{title:"Parquet形式（推奨）",description:"高性能・高圧縮率のParquet形式に変換",code:`-- Parquet形式でエクスポート
COPY your_table TO 'output.parquet' (FORMAT PARQUET);`,applicableFor:["parquet","csv","json"]},{title:"JSONファイルの場合",description:"DuckDBでJSONファイルを作成",code:`-- JSONファイルをエクスポート
COPY your_table TO 'output.json' (FORMAT JSON);`,applicableFor:["json"]},{title:"SQLiteファイルの場合",description:"SQLiteからCSVまたはParquetにエクスポート",code:`-- SQLiteからCSVにエクスポート
.mode csv
.output output.csv
SELECT * FROM your_table;

-- または、DuckDBを使用
CREATE TABLE temp_table AS SELECT * FROM 'your_file.sqlite';
COPY temp_table TO 'output.parquet' (FORMAT PARQUET);`,applicableFor:["sqlite","sqlite3","db"]}].filter(a=>a.applicableFor.includes(t)||t==="unknown");return h.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 space-y-4",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(Yw,{className:"h-5 w-5 text-red-600 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-red-800",children:"ファイル読み込みエラー"}),h.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[e," の読み込みに失敗しました"]}),h.jsxs("details",{className:"mt-2 text-xs text-red-600",children:[h.jsx("summary",{className:"cursor-pointer",children:"エラー詳細"}),h.jsx("pre",{className:"mt-1 whitespace-pre-wrap",children:n})]})]})]}),h.jsxs("div",{className:"border-t border-red-200 pt-4",children:[h.jsxs("h4",{className:"font-medium text-red-800 mb-3 flex items-center",children:[h.jsx(Tx,{className:"h-4 w-4 mr-2"}),"代替解決策"]}),h.jsx("div",{className:"space-y-3",children:i.map((a,l)=>h.jsxs("div",{className:"bg-white border border-red-200 rounded p-3",children:[h.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:a.title}),h.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),h.jsx("div",{className:"bg-gray-50 rounded p-2 text-sm font-mono text-gray-800",children:h.jsx("pre",{className:"whitespace-pre-wrap",children:a.code})}),h.jsxs("button",{onClick:()=>navigator.clipboard.writeText(a.code),className:"mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-center",children:[h.jsx(Zw,{className:"h-3 w-3 mr-1"}),"コードをコピー"]})]},l))})]}),h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[h.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"手順"}),h.jsxs("ol",{className:"text-sm text-blue-700 space-y-1",children:[h.jsx("li",{children:"1. 上記のコードを使用してファイルを変換"}),h.jsx("li",{children:"2. 変換されたファイルを本アプリに再アップロード"}),h.jsx("li",{children:"3. 正常に読み込まれることを確認"})]})]})]})}function GI({}){const[n,e]=ce.useState([]),[t,s]=ce.useState(!1),[i,a]=ce.useState(Vr()),l=ce.useRef(null),{addTable:c,setLoading:d,setError:f}=js(),{addSubscription:m}=mu(),y=/iPad|iPhone|iPod/.test(navigator.userAgent),x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),b=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),_=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(P){const G=Math.random()*16|0;return(P==="x"?G:G&3|8).toString(16)});ce.useEffect(()=>{const P=setInterval(()=>{a(Vr())},2e3);return()=>clearInterval(P)},[]);const w=P=>{if(console.log("📂 handleFileSelect called",{selectedFiles:P,selectedFilesLength:P?.length,isIOS:y,isSafari:x}),!P){console.log("❌ No files selected");return}console.log("📋 Selected files:",Array.from(P).map($=>({name:$.name,size:$.size,type:$.type,lastModified:$.lastModified})));const G=Array.from(P).filter($=>{const W=jS($);return console.log(`🔍 File validation: ${$.name} - ${W?"VALID":"INVALID"}`),W?!0:(f(`サポートされていないファイル形式です: ${$.name}`),!1)});console.log("✅ Valid files:",G.length);const H=G.map($=>{const de={id:_(),file:$,status:"pending",tableName:$.name.split(".")[0].replace(/[^a-zA-Z0-9_]/g,"_"),isDuckDBFile:!1};return console.log("📄 Created uploaded file object:",{id:de.id,name:$.name,tableName:de.tableName,isDuckDBFile:de.isDuckDBFile}),de});console.log("💾 Setting files state with:",H.length,"files"),e($=>{const W=[...$,...H];return console.log("📁 New files state will be:",W.length,"total files"),W})},N=P=>{P.preventDefault(),s(!0)},I=P=>{P.preventDefault(),s(!1)},k=P=>{P.preventDefault(),s(!1),w(P.dataTransfer.files)},D=P=>{console.log("📱 handleFileInputChange called",{isIOS:y,isSafari:x,filesLength:P.target.files?.length,files:P.target.files?Array.from(P.target.files).map(G=>({name:G.name,size:G.size,type:G.type})):null}),w(P.target.files),y&&P.target&&setTimeout(()=>{P.target.value=""},100)},L=P=>{e(G=>G.filter(H=>H.id!==P))},M=(P,G)=>{e(H=>H.map($=>$.id===P?{...$,tableName:G}:$))},B=async P=>{console.log("🚀 processFile started for:",{fileName:P.file.name,fileSize:P.file.size,fileType:P.file.type,isDuckDBFile:P.isDuckDBFile,isIOS:y,isSafari:x});try{if(P.file.size===0)throw new Error("ファイルサイズが0バイトです。正しいファイルを選択してください。");if(!P.file.name||P.file.name.trim()==="")throw new Error("ファイル名が無効です。");e($=>$.map(W=>W.id===P.id?{...W,status:"uploading"}:W)),console.log("📁 File validation passed, processing..."),console.log("📊 Processing regular file...");try{if(y&&x){console.log("🍎 iOS Safari detected, using safe file processing");try{const W=await P.file.slice(0,1024).text();console.log("📝 File read test successful, first 50 chars:",W.substring(0,50))}catch($){throw console.error("❌ File read test failed:",$),new Error("iOS Safari: ファイル読み込みができません。ファイルが破損しているか、サイズが大きすぎる可能性があります。")}if(P.file.size>10*1024*1024)throw console.warn("⚠️ Large file detected on iOS Safari"),new Error("iOS Safari: ファイルサイズが10MBを超えています。小さなファイルをお試しください。")}await PI(P.file,P.tableName),console.log("✅ createTableFromFile completed successfully")}catch($){throw console.error("❌ createTableFromFile failed:",$),new Error(`ファイル処理エラー: ${$ instanceof Error?$.message:"不明なエラー"}`)}e($=>$.map(W=>W.id===P.id?{...W,status:"success"}:W));const G=P.file.name.split(".").pop()?.toLowerCase();let H=[];if(G==="sqlite"||G==="sqlite3"||G==="db"){const{memoryDataStore:$}=await ea(async()=>{const{memoryDataStore:W}=await Promise.resolve().then(()=>na);return{memoryDataStore:W}},void 0);H=$.listTables(),console.log("データベースファイルから取得されたテーブル名:",H)}else H=[P.tableName];console.log("📋 Adding tables to store:",H);for(const $ of H)try{console.log(`🔍 Getting table info for: ${$}`);let W;try{W=await hf($),console.log("✅ getTableInfo successful, columns:",W?.length)}catch(Y){if(console.error("❌ getTableInfo failed:",Y),y&&x){console.log("🍎 iOS Safari: trying memory store fallback for table info");try{const{memoryDataStore:q}=await ea(async()=>{const{memoryDataStore:X}=await Promise.resolve().then(()=>na);return{memoryDataStore:X}},void 0),V=q.getTableSchema($);if(V&&V.columns)console.log("✅ Memory store fallback successful"),W=V.columns.map(X=>({column_name:X.name,column_type:X.type,null:X.nullable?"YES":"NO"}));else throw new Error("Memory store schema not found")}catch(q){throw console.error("❌ Memory store fallback failed:",q),new Error(`テーブル情報の取得に失敗 (フォールバックも失敗): ${Y instanceof Error?Y.message:String(Y)}`)}}else throw new Error(`テーブル情報の取得に失敗: ${Y instanceof Error?Y.message:String(Y)}`)}if(!W||W.length===0)throw console.warn(`⚠️ No table info found for: ${$}`),new Error(`テーブル ${$} の情報が見つかりません`);const de=W.map(Y=>({name:Y.column_name,type:Y.column_type,nullable:Y.null==="YES"}));console.log(`📊 Getting row count for: ${$}`);let U;try{U=await bc($),console.log("✅ getTableCount successful, count:",U)}catch(Y){if(console.error("❌ getTableCount failed:",Y),y&&x){console.log("🍎 iOS Safari: trying memory store fallback for row count");try{const{memoryDataStore:q}=await ea(async()=>{const{memoryDataStore:X}=await Promise.resolve().then(()=>na);return{memoryDataStore:X}},void 0),V=q.getTableSchema($);V&&V.data?(U=V.data.length,console.log("✅ Memory store row count fallback successful:",U)):(console.warn("⚠️ Setting default row count: 0"),U=0)}catch(q){console.error("❌ Memory store row count fallback failed:",q),console.warn("⚠️ Setting default row count: 0"),U=0}}else throw new Error(`行数の取得に失敗: ${Y instanceof Error?Y.message:String(Y)}`)}console.log("✅ Adding table to store:",{name:$,columnsCount:de.length,rowCount:U}),console.log(`📋 Adding table to store: ${$}`);try{c({name:$,connectionId:"file",columns:de,rowCount:U,isLoaded:!0}),console.log("✅ Table added to store successfully"),m({tableName:$,connectionId:"file",rowCount:U}),console.log("✅ Subscription added successfully");try{console.log(`🔍 JSONカラムをチェック中: ${$}`),console.log("🔍 テーブル情報:",{name:$,columns:de.length,rows:U}),console.log("🔍 カラム詳細:",de.map(q=>`${q.name}(${q.type})`).join(", "));try{const q=await bc($);console.log(`✅ テーブル ${$} の行数確認: ${q}`)}catch(q){console.error(`❌ テーブル ${$} の行数取得エラー:`,q)}const Y=await qI($);if(Y.length>0){console.log(`📊 JSONデータから${Y.length}個のテーブルを作成しました`),e(q=>q.map(V=>V.id===P.id?{...V,jsonTables:Y}:V));for(const q of Y)try{const X=(await hf(q)).map(O=>({name:O.column_name,type:O.column_type,nullable:O.null==="YES"})),ne=await bc(q);console.log(`🔢 JSONテーブル ${q} の行数: ${ne}`),ne===0&&console.warn(`⚠️ JSONテーブル ${q} にデータがありません`),c({name:q,connectionId:"file",columns:X,rowCount:ne,isLoaded:!0}),m({tableName:q,connectionId:"file",rowCount:ne}),console.log(`✅ JSONテーブル ${q} をストアに追加 (${X.length}カラム, ${ne}行)`)}catch(V){console.error(`❌ JSONテーブル ${q} の追加に失敗:`,V)}}}catch(Y){console.error("⚠️ JSONカラムチェックでエラー（処理は継続）:",Y)}y&&x&&(console.log("🍎 iOS Safari: forcing state update"),setTimeout(()=>{console.log("🔄 iOS Safari: delayed state verification")},1e3))}catch(Y){throw console.error("❌ Failed to add table to store:",Y),new Error(`ストアへのテーブル追加に失敗: ${Y instanceof Error?Y.message:String(Y)}`)}}catch(W){console.error(`❌ Error adding table ${$}:`,W);let de="Unknown error";throw W instanceof Error?(de=`${W.name}: ${W.message}`,W.stack&&console.error("Stack trace:",W.stack)):typeof W=="object"&&W!==null?de=JSON.stringify(W,Object.getOwnPropertyNames(W)):de=String(W),console.error(`📋 Detailed error info for table ${$}:`,de),new Error(`テーブル ${$} の処理でエラーが発生しました: ${de}`)}}catch(G){console.error("💥 processFile error:",G);let H="アップロードに失敗しました",$="Unknown error type";if(G instanceof Error)H=G.message,$=`${G.name}: ${G.message}`,G.stack&&console.error("💥 Error stack:",G.stack);else if(typeof G=="string")H=G,$=G;else if(G===null)H="iOS Safari: ファイル読み込みエラーが発生しました。ファイルサイズが大きすぎるか、ファイルが破損している可能性があります。",$="null error";else if(typeof G=="object")try{$=JSON.stringify(G,Object.getOwnPropertyNames(G)),H=`オブジェクトエラー: ${$}`}catch{$="Non-serializable object error",H="オブジェクトエラー（詳細取得不可）"}else $=String(G),H=`未知のエラータイプ: ${$}`;console.error("📝 Final error message:",H),console.error("🔍 Error details:",$),e(W=>W.map(de=>de.id===P.id?{...de,status:"error",error:H}:de))}},R=async()=>{d(!0);const P=n.filter(G=>G.status==="pending");for(const G of P)await B(G);d(!1)},Q=$b();return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"ファイルアップロード"}),n.some(P=>P.status==="pending")&&h.jsx("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700",children:"すべて処理"})]}),i.jsHeapSizeLimit>0&&h.jsx("div",{className:`p-4 rounded-lg border ${i.isCritical?"bg-red-50 border-red-200":i.isNearLimit?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:h.jsxs("div",{className:"flex items-center space-x-2",children:[i.isCritical&&h.jsx(b0,{className:"h-5 w-5 text-red-600"}),i.isNearLimit&&!i.isCritical&&h.jsx(b0,{className:"h-5 w-5 text-yellow-600"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["メモリ使用量: ",i.usagePercentage.toFixed(1),"%"]}),h.jsxs("span",{className:"text-xs text-gray-500",children:[sa(i.usedJSHeapSize)," / ",sa(i.jsHeapSizeLimit)]})]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:`h-2 rounded-full ${i.isCritical?"bg-red-600":i.isNearLimit?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(i.usagePercentage,100)}%`}})}),Q.shouldWarn&&h.jsx("p",{className:`text-sm mt-2 ${i.isCritical?"text-red-700":"text-yellow-700"}`,children:Q.message})]})]})}),h.jsxs("div",{onDragOver:N,onDragLeave:I,onDrop:k,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${t?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${b?"touch-manipulation":""}`,children:[h.jsx(Kh,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:b?"ファイルを選択してアップロード":"ファイルをドラッグ&ドロップ"}),!b&&h.jsx("p",{className:"text-gray-600 mb-4",children:"または"}),h.jsx("button",{onClick:P=>{console.log("🔘 File select button clicked",{isIOS:y,isSafari:x,isMobile:b}),P.preventDefault(),l.current?(console.log("📂 Triggering file input click"),l.current.click()):console.log("❌ File input ref is null")},onTouchStart:P=>{y&&(console.log("📱 Touch start on iOS - preparing file input"),P.preventDefault())},onTouchEnd:P=>{b&&(console.log("👆 Touch end on mobile"),P.preventDefault(),setTimeout(()=>{l.current&&(console.log("📂 Delayed file input click for mobile"),l.current.click())},50))},className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 active:bg-blue-800 touch-manipulation",children:"ファイルを選択"}),h.jsx("input",{ref:l,type:"file",multiple:!0,accept:y?".csv,.tsv,.json,.sqlite,.sqlite3,.db":".csv,.tsv,.json,.sqlite,.sqlite3,.db,text/csv,application/json,application/x-sqlite3,application/vnd.sqlite3",onChange:D,className:"hidden",style:{position:"absolute",left:"-9999px",top:"-9999px",opacity:0,pointerEvents:"none"},tabIndex:-1,onFocus:()=>console.log("📂 File input focused"),onBlur:()=>console.log("📂 File input blurred")},y?"ios-input":"desktop-input"),h.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"対応形式: CSV, TSV, JSON, SQLite3"})]}),(y||x)&&h.jsxs("div",{className:"mt-4 p-3 bg-gray-100 border rounded-lg",children:[h.jsxs("p",{className:"text-xs font-mono text-gray-600",children:["🐛 Debug: Files count = ",n.length," | iOS = ",y?"Yes":"No"," | Safari = ",x?"Yes":"No"]}),n.length>0&&h.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Files: ",n.map(P=>P.file.name).join(", ")]})]}),n.length>0&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-md font-medium text-gray-900",children:"アップロードファイル"}),h.jsx("div",{className:"space-y-3",children:n.map(P=>h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(Tx,{className:"h-8 w-8 text-gray-400"}),h.jsxs("div",{children:[h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx("p",{className:"font-medium text-gray-900",children:P.file.name})}),h.jsx("p",{className:"text-sm text-gray-500",children:TS(P.file.size)})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[P.status==="success"&&h.jsx(wf,{className:"h-5 w-5 text-green-600"}),P.status==="error"&&h.jsx(S0,{className:"h-5 w-5 text-red-600"}),h.jsx("button",{onClick:()=>L(P.id),className:"text-gray-400 hover:text-gray-600",children:h.jsx(S0,{className:"h-4 w-4"})})]})]}),P.status==="pending"&&h.jsxs("div",{className:"mt-3",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"テーブル名"}),h.jsx("input",{type:"text",value:P.tableName,onChange:G=>M(P.id,G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),P.status==="uploading"&&h.jsxs("div",{className:"mt-3",children:[h.jsx("div",{className:"bg-blue-200 rounded-full h-2",children:h.jsx("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse"})}),h.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["処理中...",/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&h.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:"⏳ 大容量ファイルの処理には時間がかかる場合があります"})]})]}),P.status==="success"&&h.jsx("div",{className:"mt-3",children:h.jsxs("div",{className:"text-sm text-green-600",children:[h.jsxs("p",{className:"mb-2",children:["テーブル「",P.tableName,"」として正常にアップロードされました"]}),P.jsonTables&&P.jsonTables.length>0&&h.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[h.jsx("p",{className:"text-blue-700 font-medium text-sm mb-2",children:"🔍 JSONデータを検出"}),h.jsxs("p",{className:"text-blue-600 text-sm mb-2",children:["JSONカラムから",P.jsonTables.length,"個の追加テーブルを作成しました:"]}),h.jsx("ul",{className:"list-disc list-inside space-y-1",children:P.jsonTables.map((G,H)=>h.jsx("li",{className:"font-mono text-xs text-blue-800",children:G},H))})]}),y&&h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mt-3",children:[h.jsx("p",{className:"text-blue-700 font-medium text-xs mb-1",children:"🍎 iOS Safari:"}),h.jsx("p",{className:"text-blue-600 text-xs",children:"「分析・可視化」タブでテーブルが表示されない場合は、ページを再読み込みしてください。"}),h.jsx("button",{onClick:()=>window.location.reload(),className:"mt-1 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200",children:"ページを再読み込み"})]})]})}),P.status==="error"&&h.jsx("div",{className:"mt-3",children:h.jsxs("div",{children:[h.jsx(KI,{errorMessage:P.error||"",fileName:P.file.name,fileExtension:P.file.name.split(".").pop()?.toLowerCase()||"unknown"}),h.jsx("button",{onClick:()=>B(P),className:"text-sm text-blue-600 hover:text-blue-800 mt-2",children:"再試行"})]})})]},P.id))})]})]})}function XI({tableName:n}){const[e,t]=ce.useState([]),[s,i]=ce.useState([]),[a,l]=ce.useState(0),[c,d]=ce.useState(1),[f,m]=ce.useState(5),[y,x]=ce.useState(!1),[b,_]=ce.useState(!1),[w,N]=ce.useState(new Date),{filters:I,setLoading:k,setError:D}=js(),{settings:L}=mu(),M=async()=>{if(n){x(!0);try{console.log("Loading data for table:",n);const H=await hf(n);console.log("Table info:",H),i(H);const $=await bc(n);console.log("Row count:",$),l($);let W=`SELECT * FROM ${n}`;const de=I.filter(Y=>Y.isActive);if(de.length>0){const Y=de.map(q=>{switch(q.operator){case"equals":return`${q.column} = '${q.value}'`;case"contains":return`${q.column} LIKE '%${q.value}%'`;case"greater":return`${q.column} > ${q.value}`;case"less":return`${q.column} < ${q.value}`;case"between":return`${q.column} BETWEEN ${q.value.min} AND ${q.value.max}`;case"in":return`${q.column} IN (${q.value.map(V=>`'${V}'`).join(", ")})`;default:return""}}).filter(Boolean).join(" AND ");W+=` WHERE ${Y}`}W+=` LIMIT ${f} OFFSET ${(c-1)*f}`,console.log("Executing query:",W);const U=await fi(W);console.log("Query result:",U),t(U)}catch(H){console.error("Error loading data:",H),D(H instanceof Error?H.message:"データの読み込みに失敗しました")}finally{x(!1)}}};ce.useEffect(()=>{M()},[n,c,f,I]),ce.useEffect(()=>{const H=$=>{console.log("🔄 DataPreview: dataChanged event received:",$.detail);const{tableName:W}=$.detail;W===n?(console.log("✅ DataPreview: Reloading data for table:",W),M(),N(new Date)):console.log("❌ DataPreview: Table mismatch:",{current:n,changed:W})};return console.log("🎧 DataPreview: Setting up dataChanged listener for table:",n),window.addEventListener("dataChanged",H),()=>{console.log("🔇 DataPreview: Removing dataChanged listener for table:",n),window.removeEventListener("dataChanged",H)}},[n]);const B=Math.ceil(a/f),R=H=>{d(H)},Q=H=>{m(H),d(1)},P=()=>{M(),N(new Date)},G=async()=>{try{k(!0);let H=`SELECT * FROM ${n}`;const $=I.filter(V=>V.isActive);if($.length>0){const V=$.map(X=>{switch(X.operator){case"equals":return`${X.column} = '${X.value}'`;case"contains":return`${X.column} LIKE '%${X.value}%'`;case"greater":return`${X.column} > ${X.value}`;case"less":return`${X.column} < ${X.value}`;default:return""}}).filter(Boolean).join(" AND ");H+=` WHERE ${V}`}const W=await fi(H),de=[s.map(V=>V.column_name).join(","),...W.map(V=>s.map(X=>V[X.column_name]).join(","))].join(`
`),U=new Blob([de],{type:"text/csv"}),Y=window.URL.createObjectURL(U),q=document.createElement("a");q.href=Y,q.download=`${n}_export.csv`,q.click(),window.URL.revokeObjectURL(Y)}catch(H){D(H instanceof Error?H.message:"エクスポートに失敗しました")}finally{k(!1)}};return n?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[h.jsxs("h3",{className:"text-lg font-medium text-gray-900 break-words",children:["データプレビュー: ",n]}),h.jsxs("span",{className:"text-sm text-gray-500",children:[a.toLocaleString()," 件のデータ"]}),L.autoRefresh&&h.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[h.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),h.jsx("span",{children:"リアルタイム更新"})]}),h.jsxs("span",{className:"text-xs text-gray-400",children:["最終更新: ",w.toLocaleTimeString()]})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:space-x-2 sm:gap-0",children:[h.jsxs("button",{onClick:P,disabled:y,className:"flex items-center justify-center px-3 py-2 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 disabled:opacity-50",children:[h.jsx(iS,{className:`h-4 w-4 mr-1 ${y?"animate-spin":""}`}),"更新"]}),h.jsxs("button",{onClick:()=>_(!b),className:`flex items-center justify-center px-3 py-2 rounded-md text-sm ${b?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[h.jsx(nS,{className:"h-4 w-4 mr-1"}),"フィルタ"]}),h.jsxs("button",{onClick:G,className:"flex items-center justify-center px-3 py-2 bg-green-100 text-green-700 rounded-md text-sm hover:bg-green-200",children:[h.jsx(eS,{className:"h-4 w-4 mr-1"}),"エクスポート"]})]})]})}),b&&h.jsx(JI,{columns:s,tableName:n}),y?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),h.jsx("p",{className:"mt-2 text-gray-600",children:"データを読み込んでいます..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsx("tr",{children:s.map(H=>h.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:H.column_name}),h.jsx("div",{className:"text-xs text-gray-400",children:H.column_type})]})},H.column_name))})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((H,$)=>h.jsx("tr",{className:"hover:bg-gray-50",children:s.map(W=>h.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 max-w-xs truncate",children:H[W.column_name]!==null&&H[W.column_name]!==void 0?String(H[W.column_name]):"—"},W.column_name))},$))})]})})}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:"表示件数:"}),h.jsxs("select",{value:f,onChange:H=>Q(Number(H.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm min-w-0",children:[h.jsx("option",{value:5,children:"5"}),h.jsx("option",{value:10,children:"10"}),h.jsx("option",{value:25,children:"25"}),h.jsx("option",{value:50,children:"50"}),h.jsx("option",{value:100,children:"100"})]})]}),h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("button",{onClick:()=>R(c-1),disabled:c===1,className:"flex items-center justify-center px-3 py-1 border border-gray-300 rounded disabled:opacity-50 min-w-0",children:h.jsx(Gw,{className:"h-4 w-4"})}),h.jsxs("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:[c," / ",B]}),h.jsx("button",{onClick:()=>R(c+1),disabled:c===B,className:"flex items-center justify-center px-3 py-1 border border-gray-300 rounded disabled:opacity-50 min-w-0",children:h.jsx(Xw,{className:"h-4 w-4"})})]})]})]})]}):h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(tS,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{children:"テーブルを選択してください"})]})}function JI({columns:n}){const{filters:e,addFilter:t,removeFilter:s,toggleFilter:i,clearFilters:a}=js(),[l,c]=ce.useState({column:"",operator:"equals",value:""}),d=()=>{l.column&&l.value&&(t(l),c({column:"",operator:"equals",value:""}))};return h.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"フィルタ設定"}),h.jsx("div",{className:"space-y-3 mb-4",children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[h.jsxs("select",{value:l.column,onChange:f=>c({...l,column:f.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md w-full",children:[h.jsx("option",{value:"",children:"カラムを選択"}),n.map(f=>h.jsx("option",{value:f.column_name,children:f.column_name},f.column_name))]}),h.jsxs("select",{value:l.operator,onChange:f=>c({...l,operator:f.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md w-full",children:[h.jsx("option",{value:"equals",children:"等しい"}),h.jsx("option",{value:"contains",children:"含む"}),h.jsx("option",{value:"greater",children:"より大きい"}),h.jsx("option",{value:"less",children:"より小さい"})]}),h.jsx("input",{type:"text",value:l.value,onChange:f=>c({...l,value:f.target.value}),placeholder:"値を入力",className:"px-3 py-2 border border-gray-300 rounded-md w-full"}),h.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 w-full sm:w-auto",children:"追加"})]})}),e.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"適用中のフィルタ:"}),h.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800",children:"すべて削除"})]}),e.map((f,m)=>h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white p-3 rounded border gap-2",children:[h.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[h.jsx("input",{type:"checkbox",checked:f.isActive,onChange:()=>i(m),className:"h-4 w-4 text-blue-600 border-gray-300 rounded flex-shrink-0"}),h.jsxs("span",{className:"text-sm break-words",children:[f.column," ",f.operator," ",f.value]})]}),h.jsx("button",{onClick:()=>s(m),className:"text-red-600 hover:text-red-800 text-sm self-start sm:self-auto flex-shrink-0",children:"削除"})]},m))]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Oa(n){return n+.5|0}const ri=(n,e,t)=>Math.max(Math.min(n,t),e);function Xo(n){return ri(Oa(n*2.55),0,255)}function li(n){return ri(Oa(n*255),0,255)}function Is(n){return ri(Oa(n/2.55)/100,0,1)}function dy(n){return ri(Oa(n*100),0,100)}const _n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pf=[..."0123456789ABCDEF"],ZI=n=>pf[n&15],eE=n=>pf[(n&240)>>4]+pf[n&15],Kl=n=>(n&240)>>4===(n&15),tE=n=>Kl(n.r)&&Kl(n.g)&&Kl(n.b)&&Kl(n.a);function nE(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&_n[n[1]]*17,g:255&_n[n[2]]*17,b:255&_n[n[3]]*17,a:e===5?_n[n[4]]*17:255}:(e===7||e===9)&&(t={r:_n[n[1]]<<4|_n[n[2]],g:_n[n[3]]<<4|_n[n[4]],b:_n[n[5]]<<4|_n[n[6]],a:e===9?_n[n[7]]<<4|_n[n[8]]:255})),t}const sE=(n,e)=>n<255?e(n):"";function iE(n){var e=tE(n)?ZI:eE;return n?"#"+e(n.r)+e(n.g)+e(n.b)+sE(n.a,e):void 0}const rE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Hb(n,e,t){const s=e*Math.min(t,1-t),i=(a,l=(a+n/30)%12)=>t-s*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function oE(n,e,t){const s=(i,a=(i+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function aE(n,e,t){const s=Hb(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function lE(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function Xf(n){const t=n.r/255,s=n.g/255,i=n.b/255,a=Math.max(t,s,i),l=Math.min(t,s,i),c=(a+l)/2;let d,f,m;return a!==l&&(m=a-l,f=c>.5?m/(2-a-l):m/(a+l),d=lE(t,s,i,m,a),d=d*60+.5),[d|0,f||0,c]}function Jf(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(li)}function Zf(n,e,t){return Jf(Hb,n,e,t)}function cE(n,e,t){return Jf(aE,n,e,t)}function uE(n,e,t){return Jf(oE,n,e,t)}function Vb(n){return(n%360+360)%360}function dE(n){const e=rE.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Xo(+e[5]):li(+e[5]));const i=Vb(+e[2]),a=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?s=cE(i,a,l):e[1]==="hsv"?s=uE(i,a,l):s=Zf(i,a,l),{r:s[0],g:s[1],b:s[2],a:t}}function hE(n,e){var t=Xf(n);t[0]=Vb(t[0]+e),t=Zf(t),n.r=t[0],n.g=t[1],n.b=t[2]}function fE(n){if(!n)return;const e=Xf(n),t=e[0],s=dy(e[1]),i=dy(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${Is(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const hy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function pE(){const n={},e=Object.keys(fy),t=Object.keys(hy);let s,i,a,l,c;for(s=0;s<e.length;s++){for(l=c=e[s],i=0;i<t.length;i++)a=t[i],c=c.replace(a,hy[a]);a=parseInt(fy[l],16),n[c]=[a>>16&255,a>>8&255,a&255]}return n}let Gl;function mE(n){Gl||(Gl=pE(),Gl.transparent=[0,0,0,0]);const e=Gl[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const gE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yE(n){const e=gE.exec(n);let t=255,s,i,a;if(e){if(e[7]!==s){const l=+e[7];t=e[8]?Xo(l):ri(l*255,0,255)}return s=+e[1],i=+e[3],a=+e[5],s=255&(e[2]?Xo(s):ri(s,0,255)),i=255&(e[4]?Xo(i):ri(i,0,255)),a=255&(e[6]?Xo(a):ri(a,0,255)),{r:s,g:i,b:a,a:t}}}function xE(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Is(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Rh=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,vr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function vE(n,e,t){const s=vr(Is(n.r)),i=vr(Is(n.g)),a=vr(Is(n.b));return{r:li(Rh(s+t*(vr(Is(e.r))-s))),g:li(Rh(i+t*(vr(Is(e.g))-i))),b:li(Rh(a+t*(vr(Is(e.b))-a))),a:n.a+t*(e.a-n.a)}}function Xl(n,e,t){if(n){let s=Xf(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=Zf(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function Wb(n,e){return n&&Object.assign(e||{},n)}function py(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=li(n[3]))):(e=Wb(n,{r:0,g:0,b:0,a:1}),e.a=li(e.a)),e}function bE(n){return n.charAt(0)==="r"?yE(n):dE(n)}class ya{constructor(e){if(e instanceof ya)return e;const t=typeof e;let s;t==="object"?s=py(e):t==="string"&&(s=nE(e)||mE(e)||bE(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Wb(this._rgb);return e&&(e.a=Is(e.a)),e}set rgb(e){this._rgb=py(e)}rgbString(){return this._valid?xE(this._rgb):void 0}hexString(){return this._valid?iE(this._rgb):void 0}hslString(){return this._valid?fE(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let a;const l=t===a?.5:t,c=2*l-1,d=s.a-i.a,f=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;a=1-f,s.r=255&f*s.r+a*i.r+.5,s.g=255&f*s.g+a*i.g+.5,s.b=255&f*s.b+a*i.b+.5,s.a=l*s.a+(1-l)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=vE(this._rgb,e._rgb,t)),this}clone(){return new ya(this.rgb)}alpha(e){return this._rgb.a=li(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Oa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Xl(this._rgb,2,e),this}darken(e){return Xl(this._rgb,2,-e),this}saturate(e){return Xl(this._rgb,1,e),this}desaturate(e){return Xl(this._rgb,1,-e),this}rotate(e){return hE(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xs(){}const _E=(()=>{let n=0;return()=>n++})();function We(n){return n==null}function It(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pe(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Mn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Kn(n,e){return Mn(n)?n:e}function Ce(n,e){return typeof n>"u"?e:n}const wE=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,qb=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ot(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Je(n,e,t,s){let i,a,l;if(It(n))for(a=n.length,i=0;i<a;i++)e.call(t,n[i],i);else if(Pe(n))for(l=Object.keys(n),a=l.length,i=0;i<a;i++)e.call(t,n[l[i]],l[i])}function eu(n,e){let t,s,i,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],a=e[t],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function tu(n){if(It(n))return n.map(tu);if(Pe(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=tu(n[t[i]]);return e}return n}function Yb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function SE(n,e,t,s){if(!Yb(n))return;const i=e[n],a=t[n];Pe(i)&&Pe(a)?xa(i,a,s):e[n]=tu(a)}function xa(n,e,t){const s=It(e)?e:[e],i=s.length;if(!Pe(n))return n;t=t||{};const a=t.merger||SE;let l;for(let c=0;c<i;++c){if(l=s[c],!Pe(l))continue;const d=Object.keys(l);for(let f=0,m=d.length;f<m;++f)a(d[f],n,l,t)}return n}function ia(n,e){return xa(n,e,{merger:NE})}function NE(n,e,t){if(!Yb(n))return;const s=e[n],i=t[n];Pe(s)&&Pe(i)?ia(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=tu(i))}const my={"":n=>n,x:n=>n.x,y:n=>n.y};function IE(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function EE(n){const e=IE(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function $i(n,e){return(my[e]||(my[e]=EE(e)))(n)}function ep(n){return n.charAt(0).toUpperCase()+n.slice(1)}const va=n=>typeof n<"u",pi=n=>typeof n=="function",gy=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function kE(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Ze=Math.PI,mt=2*Ze,TE=mt+Ze,nu=Number.POSITIVE_INFINITY,jE=Ze/180,Et=Ze/2,Ci=Ze/4,yy=Ze*2/3,Qb=Math.log10,os=Math.sign;function ra(n,e,t){return Math.abs(n-e)<t}function xy(n){const e=Math.round(n);n=ra(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Qb(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function ME(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,a)=>i-a).pop(),e}function CE(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ba(n){return!CE(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function OE(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function DE(n,e,t){let s,i,a;for(s=0,i=n.length;s<i;s++)a=n[s][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Ts(n){return n*(Ze/180)}function RE(n){return n*(180/Ze)}function vy(n){if(!Mn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Kb(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let a=Math.atan2(s,t);return a<-.5*Ze&&(a+=mt),{angle:a,distance:i}}function mf(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function AE(n,e){return(n-e+TE)%mt-Ze}function Un(n){return(n%mt+mt)%mt}function _a(n,e,t,s){const i=Un(n),a=Un(e),l=Un(t),c=Un(a-i),d=Un(l-i),f=Un(i-a),m=Un(i-l);return i===a||i===l||s&&a===l||c>d&&f<m}function Bt(n,e,t){return Math.max(e,Math.min(t,n))}function LE(n){return Bt(n,-32768,32767)}function oi(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function tp(n,e,t){t=t||(l=>n[l]<e);let s=n.length-1,i=0,a;for(;s-i>1;)a=i+s>>1,t(a)?i=a:s=a;return{lo:i,hi:s}}const Bi=(n,e,t,s)=>tp(n,t,s?i=>{const a=n[i][e];return a<t||a===t&&n[i+1][e]===t}:i=>n[i][e]<t),BE=(n,e,t)=>tp(n,t,s=>n[s][e]>=t);function FE(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const Gb=["push","pop","shift","splice","unshift"];function PE(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Gb.forEach(t=>{const s="_onData"+ep(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){const l=i.apply(this,a);return n._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...a)}),l}})})}function by(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(Gb.forEach(a=>{delete n[a]}),delete n._chartjs)}function Xb(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Jb=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Zb(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,Jb.call(window,()=>{s=!1,n.apply(e,t)}))}}function UE(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const np=n=>n==="start"?"left":n==="end"?"right":"center",Lt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,zE=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function $E(n,e,t){const s=e.length;let i=0,a=s;if(n._sorted){const{iScale:l,vScale:c,_parsed:d}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:y,max:x,minDefined:b,maxDefined:_}=l.getUserBounds();if(b){if(i=Math.min(Bi(d,m,y).lo,t?s:Bi(e,m,l.getPixelForValue(y)).lo),f){const w=d.slice(0,i+1).reverse().findIndex(N=>!We(N[c.axis]));i-=Math.max(0,w)}i=Bt(i,0,s-1)}if(_){let w=Math.max(Bi(d,l.axis,x,!0).hi+1,t?0:Bi(e,m,l.getPixelForValue(x),!0).hi+1);if(f){const N=d.slice(w-1).findIndex(I=>!We(I[c.axis]));w+=Math.max(0,N)}a=Bt(w,i,s)-i}else a=s-i}return{start:i,count:a}}function HE(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const a=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),a}const Jl=n=>n===0||n===1,_y=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*mt/t)),wy=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*mt/t)+1,oa={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Et)+1,easeOutSine:n=>Math.sin(n*Et),easeInOutSine:n=>-.5*(Math.cos(Ze*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Jl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Jl(n)?n:_y(n,.075,.3),easeOutElastic:n=>Jl(n)?n:wy(n,.075,.3),easeInOutElastic(n){return Jl(n)?n:n<.5?.5*_y(n*2,.1125,.45):.5+.5*wy(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-oa.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?oa.easeInBounce(n*2)*.5:oa.easeOutBounce(n*2-1)*.5+.5};function sp(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Sy(n){return sp(n)?n:new ya(n)}function Ah(n){return sp(n)?n:new ya(n).saturate(.5).darken(.1).hexString()}const VE=["x","y","borderWidth","radius","tension"],WE=["color","borderColor","backgroundColor"];function qE(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:WE},numbers:{type:"number",properties:VE}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YE(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ny=new Map;function QE(n,e){e=e||{};const t=n+JSON.stringify(e);let s=Ny.get(t);return s||(s=new Intl.NumberFormat(n,e),Ny.set(t,s)),s}function ip(n,e,t){return QE(e,t).format(n)}const KE={values(n){return It(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,a=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),a=GE(n,t)}const l=Qb(Math.abs(a)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),ip(n,s,d)}};function GE(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var e1={formatters:KE};function XE(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:e1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Hi=Object.create(null),gf=Object.create(null);function aa(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const a=t[s];n=n[a]||(n[a]=Object.create(null))}return n}function Lh(n,e,t){return typeof e=="string"?xa(aa(n,e),t):xa(aa(n,""),e)}class JE{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Ah(i.backgroundColor),this.hoverBorderColor=(s,i)=>Ah(i.borderColor),this.hoverColor=(s,i)=>Ah(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Lh(this,e,t)}get(e){return aa(this,e)}describe(e,t){return Lh(gf,e,t)}override(e,t){return Lh(Hi,e,t)}route(e,t,s,i){const a=aa(this,e),l=aa(this,s),c="_"+t;Object.defineProperties(a,{[c]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[c],f=l[i];return Pe(d)?Object.assign({},f,d):Ce(d,f)},set(d){this[c]=d}}})}apply(e){e.forEach(t=>t(this))}}var vt=new JE({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qE,YE,XE]);function ZE(n){return!n||We(n.size)||We(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Iy(n,e,t,s,i){let a=e[i];return a||(a=e[i]=n.measureText(i).width,t.push(i)),a>s&&(s=a),s}function Oi(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function Ey(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function yf(n,e,t,s){t1(n,e,t,s,null)}function t1(n,e,t,s,i){let a,l,c,d,f,m,y,x;const b=e.pointStyle,_=e.rotation,w=e.radius;let N=(_||0)*jE;if(b&&typeof b=="object"&&(a=b.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(N),n.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),b){default:i?n.ellipse(t,s,i/2,w,0,0,mt):n.arc(t,s,w,0,mt),n.closePath();break;case"triangle":m=i?i/2:w,n.moveTo(t+Math.sin(N)*m,s-Math.cos(N)*w),N+=yy,n.lineTo(t+Math.sin(N)*m,s-Math.cos(N)*w),N+=yy,n.lineTo(t+Math.sin(N)*m,s-Math.cos(N)*w),n.closePath();break;case"rectRounded":f=w*.516,d=w-f,l=Math.cos(N+Ci)*d,y=Math.cos(N+Ci)*(i?i/2-f:d),c=Math.sin(N+Ci)*d,x=Math.sin(N+Ci)*(i?i/2-f:d),n.arc(t-y,s-c,f,N-Ze,N-Et),n.arc(t+x,s-l,f,N-Et,N),n.arc(t+y,s+c,f,N,N+Et),n.arc(t-x,s+l,f,N+Et,N+Ze),n.closePath();break;case"rect":if(!_){d=Math.SQRT1_2*w,m=i?i/2:d,n.rect(t-m,s-d,2*m,2*d);break}N+=Ci;case"rectRot":y=Math.cos(N)*(i?i/2:w),l=Math.cos(N)*w,c=Math.sin(N)*w,x=Math.sin(N)*(i?i/2:w),n.moveTo(t-y,s-c),n.lineTo(t+x,s-l),n.lineTo(t+y,s+c),n.lineTo(t-x,s+l),n.closePath();break;case"crossRot":N+=Ci;case"cross":y=Math.cos(N)*(i?i/2:w),l=Math.cos(N)*w,c=Math.sin(N)*w,x=Math.sin(N)*(i?i/2:w),n.moveTo(t-y,s-c),n.lineTo(t+y,s+c),n.moveTo(t+x,s-l),n.lineTo(t-x,s+l);break;case"star":y=Math.cos(N)*(i?i/2:w),l=Math.cos(N)*w,c=Math.sin(N)*w,x=Math.sin(N)*(i?i/2:w),n.moveTo(t-y,s-c),n.lineTo(t+y,s+c),n.moveTo(t+x,s-l),n.lineTo(t-x,s+l),N+=Ci,y=Math.cos(N)*(i?i/2:w),l=Math.cos(N)*w,c=Math.sin(N)*w,x=Math.sin(N)*(i?i/2:w),n.moveTo(t-y,s-c),n.lineTo(t+y,s+c),n.moveTo(t+x,s-l),n.lineTo(t-x,s+l);break;case"line":l=i?i/2:Math.cos(N)*w,c=Math.sin(N)*w,n.moveTo(t-l,s-c),n.lineTo(t+l,s+c);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(N)*(i?i/2:w),s+Math.sin(N)*w);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function wa(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function rp(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function op(n){n.restore()}function ek(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function tk(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function nk(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),We(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function sk(n,e,t,s,i){if(i.strikethrough||i.underline){const a=n.measureText(s),l=e-a.actualBoundingBoxLeft,c=e+a.actualBoundingBoxRight,d=t-a.actualBoundingBoxAscent,f=t+a.actualBoundingBoxDescent,m=i.strikethrough?(d+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function ik(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Sa(n,e,t,s,i,a={}){const l=It(e)?e:[e],c=a.strokeWidth>0&&a.strokeColor!=="";let d,f;for(n.save(),n.font=i.string,nk(n,a),d=0;d<l.length;++d)f=l[d],a.backdrop&&ik(n,a.backdrop),c&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),We(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(f,t,s,a.maxWidth)),n.fillText(f,t,s,a.maxWidth),sk(n,t,s,f,a),s+=Number(i.lineHeight);n.restore()}function su(n,e){const{x:t,y:s,w:i,h:a,radius:l}=e;n.arc(t+l.topLeft,s+l.topLeft,l.topLeft,1.5*Ze,Ze,!0),n.lineTo(t,s+a-l.bottomLeft),n.arc(t+l.bottomLeft,s+a-l.bottomLeft,l.bottomLeft,Ze,Et,!0),n.lineTo(t+i-l.bottomRight,s+a),n.arc(t+i-l.bottomRight,s+a-l.bottomRight,l.bottomRight,Et,0,!0),n.lineTo(t+i,s+l.topRight),n.arc(t+i-l.topRight,s+l.topRight,l.topRight,0,-Et,!0),n.lineTo(t+l.topLeft,s)}const rk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ok=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ak(n,e){const t=(""+n).match(rk);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const lk=n=>+n||0;function ap(n,e){const t={},s=Pe(e),i=s?Object.keys(e):e,a=Pe(n)?s?l=>Ce(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of i)t[l]=lk(a(l));return t}function n1(n){return ap(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Lr(n){return ap(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Cn(n){const e=n1(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ft(n,e){n=n||{},e=e||vt.font;let t=Ce(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=Ce(n.style,e.style);s&&!(""+s).match(ok)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Ce(n.family,e.family),lineHeight:ak(Ce(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:Ce(n.weight,e.weight),string:""};return i.string=ZE(i),i}function Zl(n,e,t,s){let i,a,l;for(i=0,a=n.length;i<a;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function ck(n,e,t){const{min:s,max:i}=n,a=qb(e,(i-s)/2),l=(c,d)=>t&&c===0?0:c+d;return{min:l(s,-Math.abs(a)),max:l(i,a)}}function Wi(n,e){return Object.assign(Object.create(n),e)}function lp(n,e=[""],t,s,i=()=>n[0]){const a=t||n;typeof s>"u"&&(s=o1("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:s,_getTarget:i,override:c=>lp([c,...n],e,a,s)};return new Proxy(l,{deleteProperty(c,d){return delete c[d],delete c._keys,delete n[0][d],!0},get(c,d){return i1(c,d,()=>yk(d,e,n,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,d){return Ty(c).includes(d)},ownKeys(c){return Ty(c)},set(c,d,f){const m=c._storage||(c._storage=i());return c[d]=m[d]=f,delete c._keys,!0}})}function Wr(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:s1(n,s),setContext:a=>Wr(n,a,t,s),override:a=>Wr(n.override(a),e,t,s)};return new Proxy(i,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,c){return i1(a,l,()=>dk(a,l,c))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,c){return n[l]=c,delete a[l],!0}})}function s1(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:pi(t)?t:()=>t,isIndexable:pi(s)?s:()=>s}}const uk=(n,e)=>n?n+ep(e):e,cp=(n,e)=>Pe(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function i1(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function dk(n,e,t){const{_proxy:s,_context:i,_subProxy:a,_descriptors:l}=n;let c=s[e];return pi(c)&&l.isScriptable(e)&&(c=hk(e,c,n,t)),It(c)&&c.length&&(c=fk(e,c,n,l.isIndexable)),cp(e,c)&&(c=Wr(c,i,a&&a[e],l)),c}function hk(n,e,t,s){const{_proxy:i,_context:a,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let d=e(a,l||s);return c.delete(n),cp(n,d)&&(d=up(i._scopes,i,n,d)),d}function fk(n,e,t,s){const{_proxy:i,_context:a,_subProxy:l,_descriptors:c}=t;if(typeof a.index<"u"&&s(n))return e[a.index%e.length];if(Pe(e[0])){const d=e,f=i._scopes.filter(m=>m!==d);e=[];for(const m of d){const y=up(f,i,n,m);e.push(Wr(y,a,l&&l[n],c))}}return e}function r1(n,e,t){return pi(n)?n(e,t):n}const pk=(n,e)=>n===!0?e:typeof n=="string"?$i(e,n):void 0;function mk(n,e,t,s,i){for(const a of e){const l=pk(t,a);if(l){n.add(l);const c=r1(l._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==s)return c}else if(l===!1&&typeof s<"u"&&t!==s)return null}return!1}function up(n,e,t,s){const i=e._rootScopes,a=r1(e._fallback,t,s),l=[...n,...i],c=new Set;c.add(s);let d=ky(c,l,t,a||t,s);return d===null||typeof a<"u"&&a!==t&&(d=ky(c,l,a,d,s),d===null)?!1:lp(Array.from(c),[""],i,a,()=>gk(e,t,s))}function ky(n,e,t,s,i){for(;t;)t=mk(n,e,t,s,i);return t}function gk(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return It(i)&&Pe(t)?t:i||{}}function yk(n,e,t,s){let i;for(const a of e)if(i=o1(uk(a,n),t),typeof i<"u")return cp(n,i)?up(t,s,n,i):i}function o1(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function Ty(n){let e=n._keys;return e||(e=n._keys=xk(n._scopes)),e}function xk(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}const vk=Number.EPSILON||1e-14,qr=(n,e)=>e<n.length&&!n[e].skip&&n[e],a1=n=>n==="x"?"y":"x";function bk(n,e,t,s){const i=n.skip?e:n,a=e,l=t.skip?e:t,c=mf(a,i),d=mf(l,a);let f=c/(c+d),m=d/(c+d);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const y=s*f,x=s*m;return{previous:{x:a.x-y*(l.x-i.x),y:a.y-y*(l.y-i.y)},next:{x:a.x+x*(l.x-i.x),y:a.y+x*(l.y-i.y)}}}function _k(n,e,t){const s=n.length;let i,a,l,c,d,f=qr(n,0);for(let m=0;m<s-1;++m)if(d=f,f=qr(n,m+1),!(!d||!f)){if(ra(e[m],0,vk)){t[m]=t[m+1]=0;continue}i=t[m]/e[m],a=t[m+1]/e[m],c=Math.pow(i,2)+Math.pow(a,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=i*l*e[m],t[m+1]=a*l*e[m])}}function wk(n,e,t="x"){const s=a1(t),i=n.length;let a,l,c,d=qr(n,0);for(let f=0;f<i;++f){if(l=c,c=d,d=qr(n,f+1),!c)continue;const m=c[t],y=c[s];l&&(a=(m-l[t])/3,c[`cp1${t}`]=m-a,c[`cp1${s}`]=y-a*e[f]),d&&(a=(d[t]-m)/3,c[`cp2${t}`]=m+a,c[`cp2${s}`]=y+a*e[f])}}function Sk(n,e="x"){const t=a1(e),s=n.length,i=Array(s).fill(0),a=Array(s);let l,c,d,f=qr(n,0);for(l=0;l<s;++l)if(c=d,d=f,f=qr(n,l+1),!!d){if(f){const m=f[e]-d[e];i[l]=m!==0?(f[t]-d[t])/m:0}a[l]=c?f?os(i[l-1])!==os(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}_k(n,i,a),wk(n,a,e)}function ec(n,e,t){return Math.max(Math.min(n,t),e)}function Nk(n,e){let t,s,i,a,l,c=wa(n[0],e);for(t=0,s=n.length;t<s;++t)l=a,a=c,c=t<s-1&&wa(n[t+1],e),a&&(i=n[t],l&&(i.cp1x=ec(i.cp1x,e.left,e.right),i.cp1y=ec(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=ec(i.cp2x,e.left,e.right),i.cp2y=ec(i.cp2y,e.top,e.bottom)))}function Ik(n,e,t,s,i){let a,l,c,d;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")Sk(n,i);else{let f=s?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)c=n[a],d=bk(f,c,n[Math.min(a+1,l-(s?0:1))%l],e.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,f=c}e.capBezierPoints&&Nk(n,t)}function dp(){return typeof window<"u"&&typeof document<"u"}function hp(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function iu(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const gu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Ek(n,e){return gu(n).getPropertyValue(e)}const kk=["top","right","bottom","left"];function Pi(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const a=kk[i];s[a]=parseFloat(n[e+"-"+a+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Tk=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function jk(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:a}=s;let l=!1,c,d;if(Tk(i,a,n.target))c=i,d=a;else{const f=e.getBoundingClientRect();c=s.clientX-f.left,d=s.clientY-f.top,l=!0}return{x:c,y:d,box:l}}function Ri(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=gu(t),a=i.boxSizing==="border-box",l=Pi(i,"padding"),c=Pi(i,"border","width"),{x:d,y:f,box:m}=jk(n,t),y=l.left+(m&&c.left),x=l.top+(m&&c.top);let{width:b,height:_}=e;return a&&(b-=l.width+c.width,_-=l.height+c.height),{x:Math.round((d-y)/b*t.width/s),y:Math.round((f-x)/_*t.height/s)}}function Mk(n,e,t){let s,i;if(e===void 0||t===void 0){const a=n&&hp(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{const l=a.getBoundingClientRect(),c=gu(a),d=Pi(c,"border","width"),f=Pi(c,"padding");e=l.width-f.width-d.width,t=l.height-f.height-d.height,s=iu(c.maxWidth,a,"clientWidth"),i=iu(c.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:s||nu,maxHeight:i||nu}}const tc=n=>Math.round(n*10)/10;function Ck(n,e,t,s){const i=gu(n),a=Pi(i,"margin"),l=iu(i.maxWidth,n,"clientWidth")||nu,c=iu(i.maxHeight,n,"clientHeight")||nu,d=Mk(n,e,t);let{width:f,height:m}=d;if(i.boxSizing==="content-box"){const x=Pi(i,"border","width"),b=Pi(i,"padding");f-=b.width+x.width,m-=b.height+x.height}return f=Math.max(0,f-a.width),m=Math.max(0,s?f/s:m-a.height),f=tc(Math.min(f,l,d.maxWidth)),m=tc(Math.min(m,c,d.maxHeight)),f&&!m&&(m=tc(f/2)),(e!==void 0||t!==void 0)&&s&&d.height&&m>d.height&&(m=d.height,f=tc(Math.floor(m*s))),{width:f,height:m}}function jy(n,e,t){const s=e||1,i=Math.floor(n.height*s),a=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||l.height!==i||l.width!==a?(n.currentDevicePixelRatio=s,l.height=i,l.width=a,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Ok=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};dp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function My(n,e){const t=Ek(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ai(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Dk(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Rk(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},l=Ai(n,i,t),c=Ai(i,a,t),d=Ai(a,e,t),f=Ai(l,c,t),m=Ai(c,d,t);return Ai(f,m,t)}const Ak=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},Lk=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Br(n,e,t){return n?Ak(e,t):Lk()}function l1(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function c1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function u1(n){return n==="angle"?{between:_a,compare:AE,normalize:Un}:{between:oi,compare:(e,t)=>e-t,normalize:e=>e}}function Cy({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function Bk(n,e,t){const{property:s,start:i,end:a}=t,{between:l,normalize:c}=u1(s),d=e.length;let{start:f,end:m,loop:y}=n,x,b;if(y){for(f+=d,m+=d,x=0,b=d;x<b&&l(c(e[f%d][s]),i,a);++x)f--,m--;f%=d,m%=d}return m<f&&(m+=d),{start:f,end:m,loop:y,style:n.style}}function Fk(n,e,t){if(!t)return[n];const{property:s,start:i,end:a}=t,l=e.length,{compare:c,between:d,normalize:f}=u1(s),{start:m,end:y,loop:x,style:b}=Bk(n,e,t),_=[];let w=!1,N=null,I,k,D;const L=()=>d(i,D,I)&&c(i,D)!==0,M=()=>c(a,I)===0||d(a,D,I),B=()=>w||L(),R=()=>!w||M();for(let Q=m,P=m;Q<=y;++Q)k=e[Q%l],!k.skip&&(I=f(k[s]),I!==D&&(w=d(I,i,a),N===null&&B()&&(N=c(I,i)===0?Q:P),N!==null&&R()&&(_.push(Cy({start:N,end:Q,loop:x,count:l,style:b})),N=null),P=Q,D=I));return N!==null&&_.push(Cy({start:N,end:y,loop:x,count:l,style:b})),_}function Pk(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const a=Fk(s[i],n.points,e);a.length&&t.push(...a)}return t}function Uk(n,e,t,s){let i=0,a=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(a+=i);a>i&&n[a%e].skip;)a--;return a%=e,{start:i,end:a}}function zk(n,e,t,s){const i=n.length,a=[];let l=e,c=n[e],d;for(d=e+1;d<=t;++d){const f=n[d%i];f.skip||f.stop?c.skip||(s=!1,a.push({start:e%i,end:(d-1)%i,loop:s}),e=l=f.stop?d:null):(l=d,c.skip&&(e=d)),c=f}return l!==null&&a.push({start:e%i,end:l%i,loop:s}),a}function $k(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const a=!!n._loop,{start:l,end:c}=Uk(t,i,a,s);if(s===!0)return Oy(n,[{start:l,end:c,loop:a}],t,e);const d=c<l?c+i:c,f=!!n._fullLoop&&l===0&&c===i-1;return Oy(n,zk(t,l,d,f),t,e)}function Oy(n,e,t,s){return!s||!s.setContext||!t?e:Hk(n,e,t,s)}function Hk(n,e,t,s){const i=n._chart.getContext(),a=Dy(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,d=t.length,f=[];let m=a,y=e[0].start,x=y;function b(_,w,N,I){const k=c?-1:1;if(_!==w){for(_+=d;t[_%d].skip;)_-=k;for(;t[w%d].skip;)w+=k;_%d!==w%d&&(f.push({start:_%d,end:w%d,loop:N,style:I}),m=I,y=w%d)}}for(const _ of e){y=c?y:_.start;let w=t[y%d],N;for(x=y+1;x<=_.end;x++){const I=t[x%d];N=Dy(s.setContext(Wi(i,{type:"segment",p0:w,p1:I,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:l}))),Vk(N,m)&&b(y,x-1,_.loop,m),w=I,m=N}y<x-1&&b(y,x-1,_.loop,m)}return f}function Dy(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Vk(n,e){if(!e)return!1;const t=[],s=function(i,a){return sp(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function nc(n,e,t){return n.options.clip?n[t]:e[t]}function Wk(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:nc(t,e,"left"),right:nc(t,e,"right"),top:nc(s,e,"top"),bottom:nc(s,e,"bottom")}:e}function qk(n,e){const t=e._clip;if(t.disabled)return!1;const s=Wk(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Yk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const a=t.listeners[i],l=t.duration;a.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(s-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Jb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const a=s.items;let l=a.length-1,c=!1,d;for(;l>=0;--l)d=a[l],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),c=!0):(a[l]=a[a.length-1],a.pop());c&&(i.draw(),this._notify(i,s,e,"progress")),a.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bs=new Yk;const Ry="transparent",Qk={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=Sy(n||Ry),i=s.valid&&Sy(e||Ry);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Kk{constructor(e,t,s,i){const a=t[s];i=Zl([e.to,i,a,e.from]);const l=Zl([e.from,a,i]);this._active=!0,this._fn=e.fn||Qk[e.type||typeof l],this._easing=oa[e.easing]||oa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],a=s-this._start,l=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Zl([e.to,t,i,e.from]),this._from=Zl([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,a=this._from,l=this._loop,c=this._to;let d;if(this._active=a!==c&&(l||t<s),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=a;return}d=t/s%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(a,c,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class d1{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Pe(e))return;const t=Object.keys(vt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!Pe(a))return;const l={};for(const c of t)l[c]=a[c];(It(a.properties)&&a.properties||[i]).forEach(c=>{(c===i||!s.has(c))&&s.set(c,l)})})}_animateOptions(e,t){const s=t.options,i=Xk(e,s);if(!i)return[];const a=this._createAnimations(i,s);return s.$shared&&Gk(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,i=[],a=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let d;for(d=l.length-1;d>=0;--d){const f=l[d];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,t));continue}const m=t[f];let y=a[f];const x=s.get(f);if(y)if(x&&y.active()){y.update(x,m,c);continue}else y.cancel();if(!x||!x.duration){e[f]=m;continue}a[f]=y=new Kk(x,e,f,m),i.push(y)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return bs.add(this._chart,s),!0}}function Gk(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const a=n[s[i]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function Xk(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Ay(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:s?a:i,end:s?i:a}}function Jk(n,e,t){if(t===!1)return!1;const s=Ay(n,t),i=Ay(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function Zk(n){let e,t,s,i;return Pe(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function h1(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,a;for(i=0,a=s.length;i<a;++i)t.push(s[i].index);return t}function Ly(n,e,t,s={}){const i=n.keys,a=s.mode==="single";let l,c,d,f;if(e===null)return;let m=!1;for(l=0,c=i.length;l<c;++l){if(d=+i[l],d===t){if(m=!0,s.all)continue;break}f=n.values[d],Mn(f)&&(a||e===0||os(e)===os(f))&&(e+=f)}return!m&&!s.all?0:e}function e3(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",a=s.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let d,f,m;for(d=0,f=l.length;d<f;++d)m=l[d],c[d]={[i]:m,[a]:n[m]};return c}function Bh(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function t3(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function n3(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function s3(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function By(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const a=n[i.index];if(t&&a>0||!t&&a<0)return i.index}return null}function Fy(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:a,vScale:l,index:c}=s,d=a.axis,f=l.axis,m=t3(a,l,s),y=e.length;let x;for(let b=0;b<y;++b){const _=e[b],{[d]:w,[f]:N}=_,I=_._stacks||(_._stacks={});x=I[f]=s3(i,m,w),x[c]=N,x._top=By(x,l,!0,s.type),x._bottom=By(x,l,!1,s.type);const k=x._visualValues||(x._visualValues={});k[c]=N}}function Fh(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function i3(n,e){return Wi(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function r3(n,e,t){return Wi(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Fo(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const a=i._stacks;if(!a||a[s]===void 0||a[s][t]===void 0)return;delete a[s][t],a[s]._visualValues!==void 0&&a[s]._visualValues[t]!==void 0&&delete a[s]._visualValues[t]}}}const Ph=n=>n==="reset"||n==="none",Py=(n,e)=>e?n:Object.assign({},n),o3=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:h1(t,!0),values:null};class yu{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Fo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(y,x,b,_)=>y==="x"?x:y==="r"?_:b,a=t.xAxisID=Ce(s.xAxisID,Fh(e,"x")),l=t.yAxisID=Ce(s.yAxisID,Fh(e,"y")),c=t.rAxisID=Ce(s.rAxisID,Fh(e,"r")),d=t.indexAxis,f=t.iAxisID=i(d,a,l,c),m=t.vAxisID=i(d,l,a,c);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&by(this._data,this),e._stacked&&Fo(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Pe(t)){const i=this._cachedMeta;this._data=e3(t,i)}else if(s!==t){if(s){by(s,this);const i=this._cachedMeta;Fo(i),i._parsed=[]}t&&Object.isExtensible(t)&&PE(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const a=t._stacked;t._stacked=Bh(t.vScale,t),t.stack!==s.stack&&(i=!0,Fo(t),t.stack=s.stack),this._resyncElements(e),(i||a!==t._stacked)&&(Fy(this,t._parsed),t._stacked=Bh(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:a,_stacked:l}=s,c=a.axis;let d=e===0&&t===i.length?!0:s._sorted,f=e>0&&s._parsed[e-1],m,y,x;if(this._parsing===!1)s._parsed=i,s._sorted=!0,x=i;else{It(i[e])?x=this.parseArrayData(s,i,e,t):Pe(i[e])?x=this.parseObjectData(s,i,e,t):x=this.parsePrimitiveData(s,i,e,t);const b=()=>y[c]===null||f&&y[c]<f[c];for(m=0;m<t;++m)s._parsed[m+e]=y=x[m],d&&(b()&&(d=!1),f=y);s._sorted=d}l&&Fy(this,x)}parsePrimitiveData(e,t,s,i){const{iScale:a,vScale:l}=e,c=a.axis,d=l.axis,f=a.getLabels(),m=a===l,y=new Array(i);let x,b,_;for(x=0,b=i;x<b;++x)_=x+s,y[x]={[c]:m||a.parse(f[_],_),[d]:l.parse(t[_],_)};return y}parseArrayData(e,t,s,i){const{xScale:a,yScale:l}=e,c=new Array(i);let d,f,m,y;for(d=0,f=i;d<f;++d)m=d+s,y=t[m],c[d]={x:a.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(e,t,s,i){const{xScale:a,yScale:l}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,f=new Array(i);let m,y,x,b;for(m=0,y=i;m<y;++m)x=m+s,b=t[x],f[m]={x:a.parse($i(b,c),x),y:l.parse($i(b,d),x)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,a=this._cachedMeta,l=t[e.axis],c={keys:h1(i,!0),values:t._stacks[e.axis]._visualValues};return Ly(c,l,a.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const a=s[t.axis];let l=a===null?NaN:a;const c=i&&s._stacks[t.axis];i&&c&&(i.values=c,l=Ly(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,a=s._sorted&&e===s.iScale,l=i.length,c=this._getOtherScale(e),d=o3(t,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=n3(c);let x,b;function _(){b=i[x];const w=b[c.axis];return!Mn(b[e.axis])||m>w||y<w}for(x=0;x<l&&!(!_()&&(this.updateRangeFromParsed(f,e,b,d),a));++x);if(a){for(x=l-1;x>=0;--x)if(!_()){this.updateRangeFromParsed(f,e,b,d);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,a,l;for(i=0,a=t.length;i<a;++i)l=t[i][e.axis],Mn(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Zk(Ce(this.options.clip,Jk(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],a=t.chartArea,l=[],c=this._drawStart||0,d=this._drawCount||i.length-c,f=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(e,a,c,d),m=c;m<c+d;++m){const y=i[m];y.hidden||(y.active&&f?l.push(y):y.draw(e,a))}for(m=0;m<l.length;++m)l[m].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];a=l.$context||(l.$context=r3(this.getContext(),e,l)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=i3(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",a=this._cachedDataOpts,l=e+"-"+t,c=a[l],d=this.enableOptionSharing&&va(s);if(c)return Py(c,d);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),y=i?[`${e}Hover`,"hover",e,""]:[e,""],x=f.getOptionScopes(this.getDataset(),m),b=Object.keys(vt.elements[e]),_=()=>this.getContext(s,i,t),w=f.resolveNamedOptions(x,b,_,y);return w.$shared&&(w.$shared=d,a[l]=Object.freeze(Py(w,d))),w}_resolveAnimations(e,t,s){const i=this.chart,a=this._cachedDataOpts,l=`animation-${t}`,c=a[l];if(c)return c;let d;if(i.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,t),x=m.getOptionScopes(this.getDataset(),y);d=m.createResolver(x,this.getContext(e,s,t))}const f=new d1(i,d&&d.animations);return d&&d._cacheable&&(a[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ph(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,a=this.getSharedOptions(s),l=this.includeOptions(t,a)||a!==i;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:l}}updateElement(e,t,s,i){Ph(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!Ph(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const a=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[c,d,f]of this._syncList)this[c](d,f);this._syncList=[];const i=s.length,a=t.length,l=Math.min(a,i);l&&this.parse(0,l),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,t,s=!0){const i=this._cachedMeta,a=i.data,l=e+t;let c;const d=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(d(a),c=e;c<l;++c)a[c]=new this.dataElementType;this._parsing&&d(i._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&Fo(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function a3(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let s=[];for(let i=0,a=t.length;i<a;i++)s=s.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=Xb(s.sort((i,a)=>i-a))}return n._cache.$bar}function l3(n){const e=n.iScale,t=a3(e,n.type);let s=e._length,i,a,l,c;const d=()=>{l===32767||l===-32768||(va(c)&&(s=Math.min(s,Math.abs(l-c)||s)),c=l)};for(i=0,a=t.length;i<a;++i)l=e.getPixelForValue(t[i]),d();for(c=void 0,i=0,a=e.ticks.length;i<a;++i)l=e.getPixelForTick(i),d();return s}function c3(n,e,t,s){const i=t.barThickness;let a,l;return We(i)?(a=e.min*t.categoryPercentage,l=t.barPercentage):(a=i*s,l=1),{chunk:a/s,ratio:l,start:e.pixels[n]-a/2}}function u3(n,e,t,s){const i=e.pixels,a=i[n];let l=n>0?i[n-1]:null,c=n<i.length-1?i[n+1]:null;const d=t.categoryPercentage;l===null&&(l=a-(c===null?e.end-e.start:c-a)),c===null&&(c=a+a-l);const f=a-(a-Math.min(l,c))/2*d;return{chunk:Math.abs(c-l)/2*d/s,ratio:t.barPercentage,start:f}}function d3(n,e,t,s){const i=t.parse(n[0],s),a=t.parse(n[1],s),l=Math.min(i,a),c=Math.max(i,a);let d=l,f=c;Math.abs(l)>Math.abs(c)&&(d=c,f=l),e[t.axis]=f,e._custom={barStart:d,barEnd:f,start:i,end:a,min:l,max:c}}function f1(n,e,t,s){return It(n)?d3(n,e,t,s):e[t.axis]=t.parse(n,s),e}function Uy(n,e,t,s){const i=n.iScale,a=n.vScale,l=i.getLabels(),c=i===a,d=[];let f,m,y,x;for(f=t,m=t+s;f<m;++f)x=e[f],y={},y[i.axis]=c||i.parse(l[f],f),d.push(f1(x,y,a,f));return d}function Uh(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function h3(n,e,t){return n!==0?os(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function f3(n){let e,t,s,i,a;return n.horizontal?(e=n.base>n.x,t="left",s="right"):(e=n.base<n.y,t="bottom",s="top"),e?(i="end",a="start"):(i="start",a="end"),{start:t,end:s,reverse:e,top:i,bottom:a}}function p3(n,e,t,s){let i=e.borderSkipped;const a={};if(!i){n.borderSkipped=a;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:d,top:f,bottom:m}=f3(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===s?i=f:(t._bottom||0)===s?i=m:(a[zy(m,l,c,d)]=!0,i=f)),a[zy(i,l,c,d)]=!0,n.borderSkipped=a}function zy(n,e,t,s){return s?(n=m3(n,e,t),n=$y(n,t,e)):n=$y(n,e,t),n}function m3(n,e,t){return n===e?t:n===t?e:n}function $y(n,e,t){return n==="start"?e:n==="end"?t:n}function g3(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class y3 extends yu{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,i){return Uy(e,t,s,i)}parseArrayData(e,t,s,i){return Uy(e,t,s,i)}parseObjectData(e,t,s,i){const{iScale:a,vScale:l}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,f=a.axis==="x"?c:d,m=l.axis==="x"?c:d,y=[];let x,b,_,w;for(x=s,b=s+i;x<b;++x)w=t[x],_={},_[a.axis]=a.parse($i(w,f),x),y.push(f1($i(w,m),_,l,x));return y}updateRangeFromParsed(e,t,s,i){super.updateRangeFromParsed(e,t,s,i);const a=s._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:i}=t,a=this.getParsed(e),l=a._custom,c=Uh(l)?"["+l.start+", "+l.end+"]":""+i.getLabelForValue(a[i.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,i){const a=i==="reset",{index:l,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),f=c.isHorizontal(),m=this._getRuler(),{sharedOptions:y,includeOptions:x}=this._getSharedOptions(t,i);for(let b=t;b<t+s;b++){const _=this.getParsed(b),w=a||We(_[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(b),N=this._calculateBarIndexPixels(b,m),I=(_._stacks||{})[c.axis],k={horizontal:f,base:w.base,enableBorderRadius:!I||Uh(_._custom)||l===I._top||l===I._bottom,x:f?w.head:N.center,y:f?N.center:w.head,height:f?N.size:Math.abs(w.size),width:f?Math.abs(w.size):N.size};x&&(k.options=y||this.resolveDataElementOptions(b,e[b].active?"active":i));const D=k.options||e[b].options;p3(k,D,I,l),g3(k,D,m.ratio),this.updateElement(e[b],b,k,i)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),a=s.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(t),d=c&&c[s.axis],f=m=>{const y=m._parsed.find(b=>b[s.axis]===d),x=y&&y[m.vScale.axis];if(We(x)||isNaN(x))return!0};for(const m of i)if(!(t!==void 0&&f(m))&&((a===!1||l.indexOf(m.stack)===-1||a===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Ce(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const i=this._getStacks(e,s),a=t!==void 0?i.indexOf(t):-1;return a===-1?i.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,i=[];let a,l;for(a=0,l=t.data.length;a<l;++a)i.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const c=e.barThickness;return{min:c||l3(t),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:i},options:{base:a,minBarLength:l}}=this,c=a||0,d=this.getParsed(e),f=d._custom,m=Uh(f);let y=d[t.axis],x=0,b=s?this.applyStack(t,d,s):y,_,w;b!==y&&(x=b-y,b=y),m&&(y=f.barStart,b=f.barEnd-f.barStart,y!==0&&os(y)!==os(f.barEnd)&&(x=0),x+=y);const N=!We(a)&&!m?a:x;let I=t.getPixelForValue(N);if(this.chart.getDataVisibility(e)?_=t.getPixelForValue(x+b):_=I,w=_-I,Math.abs(w)<l){w=h3(w,t,c)*l,y===c&&(I-=w/2);const k=t.getPixelForDecimal(0),D=t.getPixelForDecimal(1),L=Math.min(k,D),M=Math.max(k,D);I=Math.max(Math.min(I,M),L),_=I+w,s&&!m&&(d._stacks[t.axis]._visualValues[i]=t.getValueForPixel(_)-t.getValueForPixel(I))}if(I===t.getPixelForValue(c)){const k=os(w)*t.getLineWidthForValue(c)/2;I+=k,w-=k}return{size:w,base:I,head:_,center:_+w/2}}_calculateBarIndexPixels(e,t){const s=t.scale,i=this.options,a=i.skipNull,l=Ce(i.maxBarThickness,1/0);let c,d;const f=this._getAxisCount();if(t.grouped){const m=a?this._getStackCount(e):t.stackCount,y=i.barThickness==="flex"?u3(e,t,i,m*f):c3(e,t,i,m*f),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(Ce(x,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+b;c=y.start+y.chunk*_+y.chunk/2,d=Math.min(l,y.chunk*y.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(l,t.min*t.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,i=s.length;let a=0;for(;a<i;++a)this.getParsed(a)[t.axis]!==null&&!s[a].hidden&&s[a].draw(this._ctx)}}function x3(n,e,t){let s=1,i=1,a=0,l=0;if(e<mt){const c=n,d=c+e,f=Math.cos(c),m=Math.sin(c),y=Math.cos(d),x=Math.sin(d),b=(D,L,M)=>_a(D,c,d,!0)?1:Math.max(L,L*t,M,M*t),_=(D,L,M)=>_a(D,c,d,!0)?-1:Math.min(L,L*t,M,M*t),w=b(0,f,y),N=b(Et,m,x),I=_(Ze,f,y),k=_(Ze+Et,m,x);s=(w-I)/2,i=(N-k)/2,a=-(w+I)/2,l=-(N+k)/2}return{ratioX:s,ratioY:i,offsetX:a,offsetY:l}}class v3 extends yu{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((a,l)=>{const d=e.getDatasetMeta(0).controller.getStyle(l);return{text:a,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let a=d=>+s[d];if(Pe(s[e])){const{key:d="value"}=this._parsing;a=f=>+$i(s[f],d)}let l,c;for(l=e,c=e+t;l<c;++l)i._parsed[l]=a(l)}}_getRotation(){return Ts(this.options.rotation-90)}_getCircumference(){return Ts(this.options.circumference)}_getRotationExtents(){let e=mt,t=-mt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,a=i._getRotation(),l=i._getCircumference();e=Math.min(e,a),t=Math.max(t,a+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,a=i.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-l)/2,0),d=Math.min(wE(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:m,rotation:y}=this._getRotationExtents(),{ratioX:x,ratioY:b,offsetX:_,offsetY:w}=x3(y,m,d),N=(s.width-l)/x,I=(s.height-l)/b,k=Math.max(Math.min(N,I)/2,0),D=qb(this.options.radius,k),L=Math.max(D*d,0),M=(D-L)/this._getVisibleDatasetWeightTotal();this.offsetX=_*D,this.offsetY=w*D,i.total=this.calculateTotal(),this.outerRadius=D-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*f,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,a=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/mt)}updateElements(e,t,s,i){const a=i==="reset",l=this.chart,c=l.chartArea,f=l.options.animation,m=(c.left+c.right)/2,y=(c.top+c.bottom)/2,x=a&&f.animateScale,b=x?0:this.innerRadius,_=x?0:this.outerRadius,{sharedOptions:w,includeOptions:N}=this._getSharedOptions(t,i);let I=this._getRotation(),k;for(k=0;k<t;++k)I+=this._circumference(k,a);for(k=t;k<t+s;++k){const D=this._circumference(k,a),L=e[k],M={x:m+this.offsetX,y:y+this.offsetY,startAngle:I,endAngle:I+D,circumference:D,outerRadius:_,innerRadius:b};N&&(M.options=w||this.resolveDataElementOptions(k,L.active?"active":i)),I+=D,this.updateElement(L,k,M,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?mt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],a=ip(t._parsed[e],s.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,a,l,c,d;if(!e){for(i=0,a=s.data.datasets.length;i<a;++i)if(s.isDatasetVisible(i)){l=s.getDatasetMeta(i),e=l.data,c=l.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)d=c.resolveDataElementOptions(i),d.borderAlign!=="inner"&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const a=this.resolveDataElementOptions(s);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(Ce(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class b3 extends yu{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:a}=t,l=this.chart._animationsDisabled;let{start:c,count:d}=$E(t,i,l);this._drawStart=c,this._drawCount=d,HE(t)&&(c=0,d=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:f},e),this.updateElements(i,c,d,e)}updateElements(e,t,s,i){const a=i==="reset",{iScale:l,vScale:c,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,i),x=l.axis,b=c.axis,{spanGaps:_,segment:w}=this.options,N=ba(_)?_:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||a||i==="none",k=t+s,D=e.length;let L=t>0&&this.getParsed(t-1);for(let M=0;M<D;++M){const B=e[M],R=I?B:{};if(M<t||M>=k){R.skip=!0;continue}const Q=this.getParsed(M),P=We(Q[b]),G=R[x]=l.getPixelForValue(Q[x],M),H=R[b]=a||P?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,Q,d):Q[b],M);R.skip=isNaN(G)||isNaN(H)||P,R.stop=M>0&&Math.abs(Q[x]-L[x])>N,w&&(R.parsed=Q,R.raw=f.data[M]),y&&(R.options=m||this.resolveDataElementOptions(M,B.active?"active":i)),I||this.updateElement(B,M,R,i),L=Q}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const a=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,a,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Di(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fp{static override(e){Object.assign(fp.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Di()}parse(){return Di()}format(){return Di()}add(){return Di()}diff(){return Di()}startOf(){return Di()}endOf(){return Di()}}var _3={_date:fp};function w3(n,e,t,s){const{controller:i,data:a,_sorted:l}=n,c=i._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&a.length){const f=c._reversePixels?BE:Bi;if(s){if(i._sharedOptions){const m=a[0],y=typeof m.getRange=="function"&&m.getRange(e);if(y){const x=f(a,e,t-y),b=f(a,e,t+y);return{lo:x.lo,hi:b.hi}}}}else{const m=f(a,e,t);if(d){const{vScale:y}=i._cachedMeta,{_parsed:x}=n,b=x.slice(0,m.lo+1).reverse().findIndex(w=>!We(w[y.axis]));m.lo-=Math.max(0,b);const _=x.slice(m.hi).findIndex(w=>!We(w[y.axis]));m.hi+=Math.max(0,_)}return m}}return{lo:0,hi:a.length-1}}function xu(n,e,t,s,i){const a=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,d=a.length;c<d;++c){const{index:f,data:m}=a[c],{lo:y,hi:x}=w3(a[c],e,l,i);for(let b=y;b<=x;++b){const _=m[b];_.skip||s(_,f,b)}}}function S3(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const a=e?Math.abs(s.x-i.x):0,l=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function zh(n,e,t,s,i){const a=[];return!i&&!n.isPointInArea(e)||xu(n,t,e,function(c,d,f){!i&&!wa(c,n.chartArea,0)||c.inRange(e.x,e.y,s)&&a.push({element:c,datasetIndex:d,index:f})},!0),a}function N3(n,e,t,s){let i=[];function a(l,c,d){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],s),{angle:y}=Kb(l,{x:e.x,y:e.y});_a(y,f,m)&&i.push({element:l,datasetIndex:c,index:d})}return xu(n,t,e,a),i}function I3(n,e,t,s,i,a){let l=[];const c=S3(t);let d=Number.POSITIVE_INFINITY;function f(m,y,x){const b=m.inRange(e.x,e.y,i);if(s&&!b)return;const _=m.getCenterPoint(i);if(!(!!a||n.isPointInArea(_))&&!b)return;const N=c(e,_);N<d?(l=[{element:m,datasetIndex:y,index:x}],d=N):N===d&&l.push({element:m,datasetIndex:y,index:x})}return xu(n,t,e,f),l}function $h(n,e,t,s,i,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!s?N3(n,e,t,i):I3(n,e,t,s,i,a)}function Hy(n,e,t,s,i){const a=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return xu(n,t,e,(d,f,m)=>{d[l]&&d[l](e[t],i)&&(a.push({element:d,datasetIndex:f,index:m}),c=c||d.inRange(e.x,e.y,i))}),s&&!c?[]:a}var E3={modes:{index(n,e,t,s){const i=Ri(e,n),a=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?zh(n,i,a,s,l):$h(n,i,a,!1,s,l),d=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,y=f.data[m];y&&!y.skip&&d.push({element:y,datasetIndex:f.index,index:m})}),d):[]},dataset(n,e,t,s){const i=Ri(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?zh(n,i,a,s,l):$h(n,i,a,!1,s,l);if(c.length>0){const d=c[0].datasetIndex,f=n.getDatasetMeta(d).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:d,index:m})}return c},point(n,e,t,s){const i=Ri(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return zh(n,i,a,s,l)},nearest(n,e,t,s){const i=Ri(e,n),a=t.axis||"xy",l=t.includeInvisible||!1;return $h(n,i,a,t.intersect,s,l)},x(n,e,t,s){const i=Ri(e,n);return Hy(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=Ri(e,n);return Hy(n,i,"y",t.intersect,s)}}};const p1=["left","top","right","bottom"];function Po(n,e){return n.filter(t=>t.pos===e)}function Vy(n,e){return n.filter(t=>p1.indexOf(t.pos)===-1&&t.box.axis===e)}function Uo(n,e){return n.sort((t,s)=>{const i=e?s:t,a=e?t:s;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function k3(n){const e=[];let t,s,i,a,l,c;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:a,options:{stack:l,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&a+l,stackWeight:c});return e}function T3(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:a}=t;if(!s||!p1.includes(i))continue;const l=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return e}function j3(n,e){const t=T3(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let a,l,c;for(a=0,l=n.length;a<l;++a){c=n[a];const{fullSize:d}=c.box,f=t[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*s:d&&e.availableWidth,c.height=i):(c.width=s,c.height=m?m*i:d&&e.availableHeight)}return t}function M3(n){const e=k3(n),t=Uo(e.filter(f=>f.box.fullSize),!0),s=Uo(Po(e,"left"),!0),i=Uo(Po(e,"right")),a=Uo(Po(e,"top"),!0),l=Uo(Po(e,"bottom")),c=Vy(e,"x"),d=Vy(e,"y");return{fullSize:t,leftAndTop:s.concat(a),rightAndBottom:i.concat(d).concat(l).concat(c),chartArea:Po(e,"chartArea"),vertical:s.concat(i).concat(d),horizontal:a.concat(l).concat(c)}}function Wy(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function m1(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function C3(n,e,t,s){const{pos:i,box:a}=t,l=n.maxPadding;if(!Pe(i)){t.size&&(n[i]-=t.size);const y=s[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?a.height:a.width),t.size=y.size/y.count,n[i]+=t.size}a.getPadding&&m1(l,a.getPadding());const c=Math.max(0,e.outerWidth-Wy(l,n,"left","right")),d=Math.max(0,e.outerHeight-Wy(l,n,"top","bottom")),f=c!==n.w,m=d!==n.h;return n.w=c,n.h=d,t.horizontal?{same:f,other:m}:{same:m,other:f}}function O3(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function D3(n,e){const t=e.maxPadding;function s(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{a[l]=Math.max(e[l],t[l])}),a}return s(n?["left","right"]:["top","bottom"])}function Jo(n,e,t,s){const i=[];let a,l,c,d,f,m;for(a=0,l=n.length,f=0;a<l;++a){c=n[a],d=c.box,d.update(c.width||e.w,c.height||e.h,D3(c.horizontal,e));const{same:y,other:x}=C3(e,t,c,s);f|=y&&i.length,m=m||x,d.fullSize||i.push(c)}return f&&Jo(i,e,t,s)||m}function sc(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function qy(n,e,t,s){const i=t.padding;let{x:a,y:l}=e;for(const c of n){const d=c.box,f=s[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const y=e.w*m,x=f.size||d.height;va(f.start)&&(l=f.start),d.fullSize?sc(d,i.left,l,t.outerWidth-i.right-i.left,x):sc(d,e.left+f.placed,l,y,x),f.start=l,f.placed+=y,l=d.bottom}else{const y=e.h*m,x=f.size||d.width;va(f.start)&&(a=f.start),d.fullSize?sc(d,a,i.top,x,t.outerHeight-i.bottom-i.top):sc(d,a,e.top+f.placed,x,y),f.start=a,f.placed+=y,a=d.right}}e.x=a,e.y=l}var En={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=Cn(n.options.layout.padding),a=Math.max(e-i.width,0),l=Math.max(t-i.height,0),c=M3(n.boxes),d=c.vertical,f=c.horizontal;Je(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const m=d.reduce((w,N)=>N.box.options&&N.box.options.display===!1?w:w+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/m,hBoxMaxHeight:l/2}),x=Object.assign({},i);m1(x,Cn(s));const b=Object.assign({maxPadding:x,w:a,h:l,x:i.left,y:i.top},i),_=j3(d.concat(f),y);Jo(c.fullSize,b,y,_),Jo(d,b,y,_),Jo(f,b,y,_)&&Jo(d,b,y,_),O3(b),qy(c.leftAndTop,b,y,_),b.x+=b.w,b.y+=b.h,qy(c.rightAndBottom,b,y,_),n.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},Je(c.chartArea,w=>{const N=w.box;Object.assign(N,n.chartArea),N.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class g1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class R3 extends g1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _c="$chartjs",A3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Yy=n=>n===null||n==="";function L3(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[_c]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Yy(i)){const a=My(n,"width");a!==void 0&&(n.width=a)}if(Yy(s))if(n.style.height==="")n.height=n.width/(e||2);else{const a=My(n,"height");a!==void 0&&(n.height=a)}return n}const y1=Ok?{passive:!0}:!1;function B3(n,e,t){n&&n.addEventListener(e,t,y1)}function F3(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,y1)}function P3(n,e){const t=A3[n.type]||n.type,{x:s,y:i}=Ri(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function ru(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function U3(n,e,t){const s=n.canvas,i=new MutationObserver(a=>{let l=!1;for(const c of a)l=l||ru(c.addedNodes,s),l=l&&!ru(c.removedNodes,s);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function z3(n,e,t){const s=n.canvas,i=new MutationObserver(a=>{let l=!1;for(const c of a)l=l||ru(c.removedNodes,s),l=l&&!ru(c.addedNodes,s);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Na=new Map;let Qy=0;function x1(){const n=window.devicePixelRatio;n!==Qy&&(Qy=n,Na.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function $3(n,e){Na.size||window.addEventListener("resize",x1),Na.set(n,e)}function H3(n){Na.delete(n),Na.size||window.removeEventListener("resize",x1)}function V3(n,e,t){const s=n.canvas,i=s&&hp(s);if(!i)return;const a=Zb((c,d)=>{const f=i.clientWidth;t(c,d),f<i.clientWidth&&t()},window),l=new ResizeObserver(c=>{const d=c[0],f=d.contentRect.width,m=d.contentRect.height;f===0&&m===0||a(f,m)});return l.observe(i),$3(n,a),l}function Hh(n,e,t){t&&t.disconnect(),e==="resize"&&H3(n)}function W3(n,e,t){const s=n.canvas,i=Zb(a=>{n.ctx!==null&&t(P3(a,n))},n);return B3(s,e,i),i}class q3 extends g1{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(L3(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[_c])return!1;const s=t[_c].initial;["height","width"].forEach(a=>{const l=s[a];We(l)?t.removeAttribute(a):t.setAttribute(a,l)});const i=s.style||{};return Object.keys(i).forEach(a=>{t.style[a]=i[a]}),t.width=t.width,delete t[_c],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),l={attach:U3,detach:z3,resize:V3}[t]||W3;i[t]=l(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:Hh,detach:Hh,resize:Hh}[t]||F3)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return Ck(e,t,s,i)}isAttached(e){const t=e&&hp(e);return!!(t&&t.isConnected)}}function Y3(n){return!dp()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?R3:q3}class Rs{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return ba(this.x)&&ba(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(a=>{i[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),i}}function Q3(n,e){const t=n.options.ticks,s=K3(n),i=Math.min(t.maxTicksLimit||s,s),a=t.major.enabled?X3(e):[],l=a.length,c=a[0],d=a[l-1],f=[];if(l>i)return J3(e,f,a,l/i),f;const m=G3(a,e,i);if(l>0){let y,x;const b=l>1?Math.round((d-c)/(l-1)):null;for(ic(e,f,m,We(b)?0:c-b,c),y=0,x=l-1;y<x;y++)ic(e,f,m,a[y],a[y+1]);return ic(e,f,m,d,We(b)?e.length:d+b),f}return ic(e,f,m),f}function K3(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function G3(n,e,t){const s=Z3(n),i=e.length/t;if(!s)return Math.max(i,1);const a=ME(s);for(let l=0,c=a.length-1;l<c;l++){const d=a[l];if(d>i)return d}return Math.max(i,1)}function X3(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function J3(n,e,t,s){let i=0,a=t[0],l;for(s=Math.ceil(s),l=0;l<n.length;l++)l===a&&(e.push(n[l]),i++,a=t[i*s])}function ic(n,e,t,s,i){const a=Ce(s,0),l=Math.min(Ce(i,n.length),n.length);let c=0,d,f,m;for(t=Math.ceil(t),i&&(d=i-s,t=d/Math.floor(d/t)),m=a;m<0;)c++,m=Math.round(a+c*t);for(f=Math.max(a,0);f<l;f++)f===m&&(e.push(n[f]),c++,m=Math.round(a+c*t))}function Z3(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const eT=n=>n==="left"?"right":n==="right"?"left":n,Ky=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Gy=(n,e)=>Math.min(e||n,n);function Xy(n,e){const t=[],s=n.length/e,i=n.length;let a=0;for(;a<i;a+=s)t.push(n[Math.floor(a)]);return t}function tT(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),a=n._startPixel,l=n._endPixel,c=1e-6;let d=n.getPixelForTick(i),f;if(!(t&&(s===1?f=Math.max(d-a,l-d):e===0?f=(n.getPixelForTick(1)-d)/2:f=(d-n.getPixelForTick(i-1))/2,d+=i<e?f:-f,d<a-c||d>l+c)))return d}function nT(n,e){Je(n,t=>{const s=t.gc,i=s.length/2;let a;if(i>e){for(a=0;a<i;++a)delete t.data[s[a]];s.splice(0,i)}})}function zo(n){return n.drawTicks?n.tickLength:0}function Jy(n,e){if(!n.display)return 0;const t=Ft(n.font,e),s=Cn(n.padding);return(It(n.text)?n.text.length:1)*t.lineHeight+s.height}function sT(n,e){return Wi(n,{scale:e,type:"scale"})}function iT(n,e,t){return Wi(n,{tick:t,index:e,type:"tick"})}function rT(n,e,t){let s=np(n);return(t&&e!=="right"||!t&&e==="right")&&(s=eT(s)),s}function oT(n,e,t,s){const{top:i,left:a,bottom:l,right:c,chart:d}=n,{chartArea:f,scales:m}=d;let y=0,x,b,_;const w=l-i,N=c-a;if(n.isHorizontal()){if(b=Lt(s,a,c),Pe(t)){const I=Object.keys(t)[0],k=t[I];_=m[I].getPixelForValue(k)+w-e}else t==="center"?_=(f.bottom+f.top)/2+w-e:_=Ky(n,t,e);x=c-a}else{if(Pe(t)){const I=Object.keys(t)[0],k=t[I];b=m[I].getPixelForValue(k)-N+e}else t==="center"?b=(f.left+f.right)/2-N+e:b=Ky(n,t,e);_=Lt(s,l,i),y=t==="left"?-Et:Et}return{titleX:b,titleY:_,maxWidth:x,rotation:y}}class Kr extends Rs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=Kn(e,Number.POSITIVE_INFINITY),t=Kn(t,Number.NEGATIVE_INFINITY),s=Kn(s,Number.POSITIVE_INFINITY),i=Kn(i,Number.NEGATIVE_INFINITY),{min:Kn(e,s),max:Kn(t,i),minDefined:Mn(e),maxDefined:Mn(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:a}=this.getUserBounds(),l;if(i&&a)return{min:t,max:s};const c=this.getMatchingVisibleMetas();for(let d=0,f=c.length;d<f;++d)l=c[d].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),a||(s=Math.max(s,l.max));return t=a&&t>s?s:t,s=i&&t>s?t:s,{min:Kn(t,Kn(s,t)),max:Kn(s,Kn(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:a,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ck(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?Xy(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Q3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ot(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,a;for(s=0,i=e.length;s<i;s++)a=e[s],a.label=ot(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Gy(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,a=t.maxRotation;let l=i,c,d,f;if(!this._isVisible()||!t.display||i>=a||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),y=m.widest.width,x=m.highest.height,b=Bt(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/s:b/(s-1),y+6>c&&(c=b/(s-(e.offset?.5:1)),d=this.maxHeight-zo(e.grid)-t.padding-Jy(e.title,this.chart.options.font),f=Math.sqrt(y*y+x*x),l=RE(Math.min(Math.asin(Bt((m.highest.height+6)/c,-1,1)),Math.asin(Bt(d/f,-1,1))-Math.asin(Bt(x/f,-1,1)))),l=Math.max(i,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:a}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const d=Jy(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=zo(a)+d):(e.height=this.maxHeight,e.width=zo(a)+d),s.display&&this.ticks.length){const{first:f,last:m,widest:y,highest:x}=this._getLabelSizes(),b=s.padding*2,_=Ts(this.labelRotation),w=Math.cos(_),N=Math.sin(_);if(c){const I=s.mirror?0:N*y.width+w*x.height;e.height=Math.min(this.maxHeight,e.height+I+b)}else{const I=s.mirror?0:w*y.width+N*x.height;e.width=Math.min(this.maxWidth,e.width+I+b)}this._calculatePadding(f,m,N,w)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:a,padding:l},position:c}=this.options,d=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,b=0;d?f?(x=i*e.width,b=s*t.height):(x=s*e.height,b=i*t.width):a==="start"?b=t.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,b=t.width/2),this.paddingLeft=Math.max((x-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-y+l)*this.width/(this.width-y),0)}else{let m=t.height/2,y=e.height/2;a==="start"?(m=0,y=e.height):a==="end"&&(m=t.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)We(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Xy(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:a}=this,l=[],c=[],d=Math.floor(t/Gy(t,s));let f=0,m=0,y,x,b,_,w,N,I,k,D,L,M;for(y=0;y<t;y+=d){if(_=e[y].label,w=this._resolveTickFontOptions(y),i.font=N=w.string,I=a[N]=a[N]||{data:{},gc:[]},k=w.lineHeight,D=L=0,!We(_)&&!It(_))D=Iy(i,I.data,I.gc,D,_),L=k;else if(It(_))for(x=0,b=_.length;x<b;++x)M=_[x],!We(M)&&!It(M)&&(D=Iy(i,I.data,I.gc,D,M),L+=k);l.push(D),c.push(L),f=Math.max(D,f),m=Math.max(L,m)}nT(a,t);const B=l.indexOf(f),R=c.indexOf(m),Q=P=>({width:l[P]||0,height:c[P]||0});return{first:Q(0),last:Q(t-1),widest:Q(B),highest:Q(R),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return LE(this._alignToPixels?Oi(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=iT(this.getContext(),e,s))}return this.$context||(this.$context=sT(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ts(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),a=this._getLabelSizes(),l=e.autoSkipPadding||0,c=a?a.widest.width+l:0,d=a?a.highest.height+l:0;return this.isHorizontal()?d*s>c*i?c/s:d/i:d*i<c*s?d/s:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:a,position:l,border:c}=i,d=a.offset,f=this.isHorizontal(),y=this.ticks.length+(d?1:0),x=zo(a),b=[],_=c.setContext(this.getContext()),w=_.display?_.width:0,N=w/2,I=function(Y){return Oi(s,Y,w)};let k,D,L,M,B,R,Q,P,G,H,$,W;if(l==="top")k=I(this.bottom),R=this.bottom-x,P=k-N,H=I(e.top)+N,W=e.bottom;else if(l==="bottom")k=I(this.top),H=e.top,W=I(e.bottom)-N,R=k+N,P=this.top+x;else if(l==="left")k=I(this.right),B=this.right-x,Q=k-N,G=I(e.left)+N,$=e.right;else if(l==="right")k=I(this.left),G=e.left,$=I(e.right)-N,B=k+N,Q=this.left+x;else if(t==="x"){if(l==="center")k=I((e.top+e.bottom)/2+.5);else if(Pe(l)){const Y=Object.keys(l)[0],q=l[Y];k=I(this.chart.scales[Y].getPixelForValue(q))}H=e.top,W=e.bottom,R=k+N,P=R+x}else if(t==="y"){if(l==="center")k=I((e.left+e.right)/2);else if(Pe(l)){const Y=Object.keys(l)[0],q=l[Y];k=I(this.chart.scales[Y].getPixelForValue(q))}B=k-N,Q=B-x,G=e.left,$=e.right}const de=Ce(i.ticks.maxTicksLimit,y),U=Math.max(1,Math.ceil(y/de));for(D=0;D<y;D+=U){const Y=this.getContext(D),q=a.setContext(Y),V=c.setContext(Y),X=q.lineWidth,ne=q.color,O=V.dash||[],K=V.dashOffset,Se=q.tickWidth,Ne=q.tickColor,De=q.tickBorderDash||[],je=q.tickBorderDashOffset;L=tT(this,D,d),L!==void 0&&(M=Oi(s,L,X),f?B=Q=G=$=M:R=P=H=W=M,b.push({tx1:B,ty1:R,tx2:Q,ty2:P,x1:G,y1:H,x2:$,y2:W,width:X,color:ne,borderDash:O,borderDashOffset:K,tickWidth:Se,tickColor:Ne,tickBorderDash:De,tickBorderDashOffset:je}))}return this._ticksLength=y,this._borderValue=k,b}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:a}=s,l=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:f,padding:m,mirror:y}=a,x=zo(s.grid),b=x+m,_=y?-m:b,w=-Ts(this.labelRotation),N=[];let I,k,D,L,M,B,R,Q,P,G,H,$,W="middle";if(i==="top")B=this.bottom-_,R=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+_,R=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(x);R=U.textAlign,M=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(x);R=U.textAlign,M=U.x}else if(t==="x"){if(i==="center")B=(e.top+e.bottom)/2+b;else if(Pe(i)){const U=Object.keys(i)[0],Y=i[U];B=this.chart.scales[U].getPixelForValue(Y)+b}R=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")M=(e.left+e.right)/2-b;else if(Pe(i)){const U=Object.keys(i)[0],Y=i[U];M=this.chart.scales[U].getPixelForValue(Y)}R=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(d==="start"?W="top":d==="end"&&(W="bottom"));const de=this._getLabelSizes();for(I=0,k=c.length;I<k;++I){D=c[I],L=D.label;const U=a.setContext(this.getContext(I));Q=this.getPixelForTick(I)+a.labelOffset,P=this._resolveTickFontOptions(I),G=P.lineHeight,H=It(L)?L.length:1;const Y=H/2,q=U.color,V=U.textStrokeColor,X=U.textStrokeWidth;let ne=R;l?(M=Q,R==="inner"&&(I===k-1?ne=this.options.reverse?"left":"right":I===0?ne=this.options.reverse?"right":"left":ne="center"),i==="top"?f==="near"||w!==0?$=-H*G+G/2:f==="center"?$=-de.highest.height/2-Y*G+G:$=-de.highest.height+G/2:f==="near"||w!==0?$=G/2:f==="center"?$=de.highest.height/2-Y*G:$=de.highest.height-H*G,y&&($*=-1),w!==0&&!U.showLabelBackdrop&&(M+=G/2*Math.sin(w))):(B=Q,$=(1-H)*G/2);let O;if(U.showLabelBackdrop){const K=Cn(U.backdropPadding),Se=de.heights[I],Ne=de.widths[I];let De=$-K.top,je=0-K.left;switch(W){case"middle":De-=Se/2;break;case"bottom":De-=Se;break}switch(R){case"center":je-=Ne/2;break;case"right":je-=Ne;break;case"inner":I===k-1?je-=Ne:I>0&&(je-=Ne/2);break}O={left:je,top:De,width:Ne+K.width,height:Se+K.height,color:U.backdropColor}}N.push({label:L,font:P,textOffset:$,options:{rotation:w,color:q,strokeColor:V,strokeWidth:X,textAlign:ne,textBaseline:W,translation:[M,B],backdrop:O}})}return N}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ts(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:a}}=this.options,l=this._getLabelSizes(),c=e+a,d=l.widest.width;let f,m;return t==="left"?i?(m=this.right+a,s==="near"?f="left":s==="center"?(f="center",m+=d/2):(f="right",m+=d)):(m=this.right-c,s==="near"?f="right":s==="center"?(f="center",m-=d/2):(f="left",m=this.left)):t==="right"?i?(m=this.left+a,s==="near"?f="right":s==="center"?(f="center",m-=d/2):(f="left",m-=d)):(m=this.left+c,s==="near"?f="left":s==="center"?(f="center",m+=d/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:a,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,a,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,l;const c=(d,f,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(t.display)for(a=0,l=i.length;a<l;++a){const d=i[a];t.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,a=s.setContext(this.getContext()),l=s.display?a.width:0;if(!l)return;const c=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,m,y,x;this.isHorizontal()?(f=Oi(e,this.left,l)-l/2,m=Oi(e,this.right,c)+c/2,y=x=d):(y=Oi(e,this.top,l)-l/2,x=Oi(e,this.bottom,c)+c/2,f=m=d),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(f,y),t.lineTo(m,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&rp(s,i);const a=this.getLabelItems(e);for(const l of a){const c=l.options,d=l.font,f=l.label,m=l.textOffset;Sa(s,f,0,m,d,c)}i&&op(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const a=Ft(s.font),l=Cn(s.padding),c=s.align;let d=a.lineHeight/2;t==="bottom"||t==="center"||Pe(t)?(d+=l.bottom,It(s.text)&&(d+=a.lineHeight*(s.text.length-1))):d+=l.top;const{titleX:f,titleY:m,maxWidth:y,rotation:x}=oT(this,d,t,c);Sa(e,s.text,0,0,a,{color:s.color,maxWidth:y,rotation:x,textAlign:rT(c,t,i),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=Ce(e.grid&&e.grid.z,-1),i=Ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Kr.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:s,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let a,l;for(a=0,l=t.length;a<l;++a){const c=t[a];c[s]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ft(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class rc{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;cT(t)&&(s=this.register(t));const i=this.items,a=e.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,aT(e,l,s),this.override&&vt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in vt[i]&&(delete vt[i][s],this.override&&delete Hi[s])}}function aT(n,e,t){const s=xa(Object.create(null),[t?vt.get(t):{},vt.get(e),n.defaults]);vt.set(e,s),n.defaultRoutes&&lT(e,n.defaultRoutes),n.descriptors&&vt.describe(e,n.descriptors)}function lT(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),a=[n].concat(s).join("."),l=e[t].split("."),c=l.pop(),d=l.join(".");vt.route(a,i,d,c)})}function cT(n){return"id"in n&&"defaults"in n}class uT{constructor(){this.controllers=new rc(yu,"datasets",!0),this.elements=new rc(Rs,"elements"),this.plugins=new rc(Object,"plugins"),this.scales=new rc(Kr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const a=s||this._getRegistryForType(i);s||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):Je(i,l=>{const c=s||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,s){const i=ep(e);ot(s["before"+i],[],s),t[e](s),ot(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var es=new uT;class dT{constructor(){this._init=[]}notify(e,t,s,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(a,e,t,s);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,s,i){i=i||{};for(const a of e){const l=a.plugin,c=l[s],d=[t,i,a.options];if(ot(c,d,l)===!1&&i.cancelable)return!1}return!0}invalidate(){We(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=Ce(s.options&&s.options.plugins,{}),a=hT(s);return i===!1&&!t?[]:pT(e,a,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(a,l)=>a.filter(c=>!l.some(d=>c.plugin.id===d.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function hT(n){const e={},t=[],s=Object.keys(es.plugins.items);for(let a=0;a<s.length;a++)t.push(es.getPlugin(s[a]));const i=n.plugins||[];for(let a=0;a<i.length;a++){const l=i[a];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function fT(n,e){return!e&&n===!1?null:n===!0?{}:n}function pT(n,{plugins:e,localIds:t},s,i){const a=[],l=n.getContext();for(const c of e){const d=c.id,f=fT(s[d],i);f!==null&&a.push({plugin:c,options:mT(n.config,{plugin:c,local:t[d]},f,l)})}return a}function mT(n,{plugin:e,local:t},s,i){const a=n.pluginScopeKeys(e),l=n.getOptionScopes(s,a);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xf(n,e){const t=vt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function gT(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function yT(n,e){return n===e?"_index_":"_value_"}function Zy(n){if(n==="x"||n==="y"||n==="r")return n}function xT(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function vf(n,...e){if(Zy(n))return n;for(const t of e){const s=t.axis||xT(t.position)||n.length>1&&Zy(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function ex(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function vT(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return ex(n,"x",t[0])||ex(n,"y",t[0])}return{}}function bT(n,e){const t=Hi[n.type]||{scales:{}},s=e.scales||{},i=xf(n.type,e),a=Object.create(null);return Object.keys(s).forEach(l=>{const c=s[l];if(!Pe(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=vf(l,c,vT(l,n),vt.scales[c.type]),f=yT(d,i),m=t.scales||{};a[l]=ia(Object.create(null),[{axis:d},c,m[d],m[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,d=l.indexAxis||xf(c,e),m=(Hi[c]||{}).scales||{};Object.keys(m).forEach(y=>{const x=gT(y,d),b=l[x+"AxisID"]||x;a[b]=a[b]||Object.create(null),ia(a[b],[{axis:x},s[b],m[y]])})}),Object.keys(a).forEach(l=>{const c=a[l];ia(c,[vt.scales[c.type],vt.scale])}),a}function v1(n){const e=n.options||(n.options={});e.plugins=Ce(e.plugins,{}),e.scales=bT(n,e)}function b1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function _T(n){return n=n||{},n.data=b1(n.data),v1(n),n}const tx=new Map,_1=new Set;function oc(n,e){let t=tx.get(n);return t||(t=e(),tx.set(n,t),_1.add(t)),t}const $o=(n,e,t)=>{const s=$i(e,t);s!==void 0&&n.add(s)};class wT{constructor(e){this._config=_T(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=b1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),v1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return oc(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return oc(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return oc(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:a}=this,l=this._cachedScopes(e,s),c=l.get(t);if(c)return c;const d=new Set;t.forEach(m=>{e&&(d.add(e),m.forEach(y=>$o(d,e,y))),m.forEach(y=>$o(d,i,y)),m.forEach(y=>$o(d,Hi[a]||{},y)),m.forEach(y=>$o(d,vt,y)),m.forEach(y=>$o(d,gf,y))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),_1.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Hi[t]||{},vt.datasets[t]||{},{type:t},vt,gf]}resolveNamedOptions(e,t,s,i=[""]){const a={$shared:!0},{resolver:l,subPrefixes:c}=nx(this._resolverCache,e,i);let d=l;if(NT(l,t)){a.$shared=!1,s=pi(s)?s():s;const f=this.createResolver(e,s,c);d=Wr(l,s,f)}for(const f of t)a[f]=d[f];return a}createResolver(e,t,s=[""],i){const{resolver:a}=nx(this._resolverCache,e,s);return Pe(t)?Wr(a,t,void 0,i):a}}function nx(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let a=s.get(i);return a||(a={resolver:lp(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},s.set(i,a)),a}const ST=n=>Pe(n)&&Object.getOwnPropertyNames(n).some(e=>pi(n[e]));function NT(n,e){const{isScriptable:t,isIndexable:s}=s1(n);for(const i of e){const a=t(i),l=s(i),c=(l||a)&&n[i];if(a&&(pi(c)||ST(c))||l&&It(c))return!0}return!1}var IT="4.5.0";const ET=["top","bottom","left","right","chartArea"];function sx(n,e){return n==="top"||n==="bottom"||ET.indexOf(n)===-1&&e==="x"}function ix(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function rx(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ot(t&&t.onComplete,[n],e)}function kT(n){const e=n.chart,t=e.options.animation;ot(t&&t.onProgress,[n],e)}function w1(n){return dp()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const wc={},ox=n=>{const e=w1(n);return Object.values(wc).filter(t=>t.canvas===e).pop()};function TT(n,e,t){const s=Object.keys(n);for(const i of s){const a=+i;if(a>=e){const l=n[i];delete n[i],(t>0||a>e)&&(n[a+t]=l)}}}function jT(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}let vu=class{static defaults=vt;static instances=wc;static overrides=Hi;static registry=es;static version=IT;static getChart=ox;static register(...e){es.add(...e),ax()}static unregister(...e){es.remove(...e),ax()}constructor(e,t){const s=this.config=new wT(t),i=w1(e),a=ox(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Y3(i)),this.platform.updateConfig(s);const c=this.platform.acquireContext(i,l.aspectRatio),d=c&&c.canvas,f=d&&d.height,m=d&&d.width;if(this.id=_E(),this.ctx=c,this.canvas=d,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dT,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=UE(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],wc[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}bs.listen(this,"complete",rx),bs.listen(this,"progress",kT),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:a}=this;return We(e)?t&&a?a:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return es}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ey(this.canvas,this.ctx),this}stop(){return bs.stop(this),this}resize(e,t){bs.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,a),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,jy(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),ot(s.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Je(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((l,c)=>(l[c]=!1,l),{});let a=[];t&&(a=a.concat(Object.keys(t).map(l=>{const c=t[l],d=vf(l,c),f=d==="r",m=d==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Je(a,l=>{const c=l.options,d=c.id,f=vf(d,c),m=Ce(c.type,l.dtype);(c.position===void 0||sx(c.position,f)!==sx(l.dposition))&&(c.position=l.dposition),i[d]=!0;let y=null;if(d in s&&s[d].type===m)y=s[d];else{const x=es.getScale(m);y=new x({id:d,type:m,ctx:this.ctx,chart:this}),s[y.id]=y}y.init(c,e)}),Je(i,(l,c)=>{l||delete s[c]}),Je(s,l=>{En.configure(this,l,l.options),En.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,a)=>i.index-a.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(ix("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const a=t[s];let l=this.getDatasetMeta(s);const c=a.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=c,l.indexAxis=a.indexAxis||xf(c,this.options),l.order=a.order||0,l.index=s,l.label=""+a.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const d=es.getController(c),{datasetElementType:f,dataElementType:m}=vt.datasets[c];Object.assign(d,{dataElementType:es.getElement(m),datasetElementType:f&&es.getElement(f)}),l.controller=new d(this,s),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:y}=this.getDatasetMeta(f),x=!i&&a.indexOf(y)===-1;y.buildOrUpdateElements(x),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),i||Je(a,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ix("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Je(this.scales,e=>{En.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!gy(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:a}of t){const l=s==="_removeElements"?-a:a;TT(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=a=>new Set(e.filter(l=>l[0]===a).map((l,c)=>c+","+l.splice(1).join(","))),i=s(0);for(let a=1;a<t;a++)if(!gy(i,s(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;En.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Je(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,pi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bs.has(this)?this.attached&&!bs.running(this)&&bs.start(this):(this.draw(),rx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,a;for(i=0,a=t.length;i<a;++i){const l=t[i];(!e||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=qk(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&rp(t,i),e.controller.draw(),i&&op(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return wa(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const a=E3.modes[t];return typeof a=="function"?a(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(a=>a&&a._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",a=this.getDatasetMeta(e),l=a.controller._resolveAnimations(void 0,i);va(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),l.update(a,{visible:s}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),bs.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ey(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete wc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(a,l)=>{t.addEventListener(this,a,l),e[a]=l},i=(a,l,c)=>{a.offsetX=l,a.offsetY=c,this._eventHandler(a)};Je(this.options.events,a=>s(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(d,f)=>{t.addEventListener(this,d,f),e[d]=f},i=(d,f)=>{e[d]&&(t.removeEventListener(this,d,f),delete e[d])},a=(d,f)=>{this.canvas&&this.resize(d,f)};let l;const c=()=>{i("attach",c),this.attached=!0,this.resize(),s("resize",a),s("detach",l)};l=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),s("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Je(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Je(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let a,l,c,d;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:a,index:l})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[l],index:l}});!eu(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,a=(d,f)=>d.filter(m=>!f.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=a(t,e),c=s?e:a(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:a}=this,l=t,c=this._getActiveElements(e,i,s,l),d=kE(e),f=jT(e,this._lastEvent,s,d);s&&(this._lastEvent=null,ot(a.onHover,[e,c,this],this),d&&ot(a.onClick,[e,c,this],this));const m=!eu(c,i);return(m||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=f,m}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}};function ax(){return Je(vu.instances,n=>n._plugins.invalidate())}function MT(n,e,t){const{startAngle:s,x:i,y:a,outerRadius:l,innerRadius:c,options:d}=e,{borderWidth:f,borderJoinStyle:m}=d,y=Math.min(f/l,Un(s-t));if(n.beginPath(),n.arc(i,a,l-f/2,s+y/2,t-y/2),c>0){const x=Math.min(f/c,Un(s-t));n.arc(i,a,c+f/2,t-x/2,s+x/2,!0)}else{const x=Math.min(f/2,l*Un(s-t));if(m==="round")n.arc(i,a,x,t-Ze/2,s+Ze/2,!0);else if(m==="bevel"){const b=2*x*x,_=-b*Math.cos(t+Ze/2)+i,w=-b*Math.sin(t+Ze/2)+a,N=b*Math.cos(s+Ze/2)+i,I=b*Math.sin(s+Ze/2)+a;n.lineTo(_,w),n.lineTo(N,I)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function CT(n,e,t){const{startAngle:s,pixelMargin:i,x:a,y:l,outerRadius:c,innerRadius:d}=e;let f=i/c;n.beginPath(),n.arc(a,l,c,s-f,t+f),d>i?(f=i/d,n.arc(a,l,d,t+f,s-f,!0)):n.arc(a,l,i,t+Et,s-Et),n.closePath(),n.clip()}function OT(n){return ap(n,["outerStart","outerEnd","innerStart","innerEnd"])}function DT(n,e,t,s){const i=OT(n.options.borderRadius),a=(t-e)/2,l=Math.min(a,s*e/2),c=d=>{const f=(t-Math.min(a,d))*s/2;return Bt(d,0,Math.min(a,f))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Bt(i.innerStart,0,l),innerEnd:Bt(i.innerEnd,0,l)}}function br(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function ou(n,e,t,s,i,a){const{x:l,y:c,startAngle:d,pixelMargin:f,innerRadius:m}=e,y=Math.max(e.outerRadius+s+t-f,0),x=m>0?m+s+t+f:0;let b=0;const _=i-d;if(s){const U=m>0?m-s:0,Y=y>0?y-s:0,q=(U+Y)/2,V=q!==0?_*q/(q+s):_;b=(_-V)/2}const w=Math.max(.001,_*y-t/Ze)/y,N=(_-w)/2,I=d+N+b,k=i-N-b,{outerStart:D,outerEnd:L,innerStart:M,innerEnd:B}=DT(e,x,y,k-I),R=y-D,Q=y-L,P=I+D/R,G=k-L/Q,H=x+M,$=x+B,W=I+M/H,de=k-B/$;if(n.beginPath(),a){const U=(P+G)/2;if(n.arc(l,c,y,P,U),n.arc(l,c,y,U,G),L>0){const X=br(Q,G,l,c);n.arc(X.x,X.y,L,G,k+Et)}const Y=br($,k,l,c);if(n.lineTo(Y.x,Y.y),B>0){const X=br($,de,l,c);n.arc(X.x,X.y,B,k+Et,de+Math.PI)}const q=(k-B/x+(I+M/x))/2;if(n.arc(l,c,x,k-B/x,q,!0),n.arc(l,c,x,q,I+M/x,!0),M>0){const X=br(H,W,l,c);n.arc(X.x,X.y,M,W+Math.PI,I-Et)}const V=br(R,I,l,c);if(n.lineTo(V.x,V.y),D>0){const X=br(R,P,l,c);n.arc(X.x,X.y,D,I-Et,P)}}else{n.moveTo(l,c);const U=Math.cos(P)*y+l,Y=Math.sin(P)*y+c;n.lineTo(U,Y);const q=Math.cos(G)*y+l,V=Math.sin(G)*y+c;n.lineTo(q,V)}n.closePath()}function RT(n,e,t,s,i){const{fullCircles:a,startAngle:l,circumference:c}=e;let d=e.endAngle;if(a){ou(n,e,t,s,d,i);for(let f=0;f<a;++f)n.fill();isNaN(c)||(d=l+(c%mt||mt))}return ou(n,e,t,s,d,i),n.fill(),d}function AT(n,e,t,s,i){const{fullCircles:a,startAngle:l,circumference:c,options:d}=e,{borderWidth:f,borderJoinStyle:m,borderDash:y,borderDashOffset:x,borderRadius:b}=d,_=d.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=x,_?(n.lineWidth=f*2,n.lineJoin=m||"round"):(n.lineWidth=f,n.lineJoin=m||"bevel");let w=e.endAngle;if(a){ou(n,e,t,s,w,i);for(let N=0;N<a;++N)n.stroke();isNaN(c)||(w=l+(c%mt||mt))}_&&CT(n,e,w),d.selfJoin&&w-l>=Ze&&b===0&&m!=="miter"&&MT(n,e,w),a||(ou(n,e,t,s,w,i),n.stroke())}class LT extends Rs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.getProps(["x","y"],s),{angle:a,distance:l}=Kb(i,{x:e,y:t}),{startAngle:c,endAngle:d,innerRadius:f,outerRadius:m,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),x=(this.options.spacing+this.options.borderWidth)/2,b=Ce(y,d-c),_=_a(a,c,d)&&c!==d,w=b>=mt||_,N=oi(l,f+x,m+x);return w&&N}getCenterPoint(e){const{x:t,y:s,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,m=(i+a)/2,y=(l+c+f+d)/2;return{x:t+Math.cos(m)*y,y:s+Math.sin(m)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,i=(t.offset||0)/4,a=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>mt?Math.floor(s/mt):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(Ze,s||0)),f=i*d;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,RT(e,this,f,a,l),AT(e,this,f,a,l),e.restore()}}function S1(n,e,t=e){n.lineCap=Ce(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ce(t.borderDash,e.borderDash)),n.lineDashOffset=Ce(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ce(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ce(t.borderWidth,e.borderWidth),n.strokeStyle=Ce(t.borderColor,e.borderColor)}function BT(n,e,t){n.lineTo(t.x,t.y)}function FT(n){return n.stepped?ek:n.tension||n.cubicInterpolationMode==="monotone"?tk:BT}function N1(n,e,t={}){const s=n.length,{start:i=0,end:a=s-1}=t,{start:l,end:c}=e,d=Math.max(i,l),f=Math.min(a,c),m=i<l&&a<l||i>c&&a>c;return{count:s,start:d,loop:e.loop,ilen:f<d&&!m?s+f-d:f-d}}function PT(n,e,t,s){const{points:i,options:a}=e,{count:l,start:c,loop:d,ilen:f}=N1(i,t,s),m=FT(a);let{move:y=!0,reverse:x}=s||{},b,_,w;for(b=0;b<=f;++b)_=i[(c+(x?f-b:b))%l],!_.skip&&(y?(n.moveTo(_.x,_.y),y=!1):m(n,w,_,x,a.stepped),w=_);return d&&(_=i[(c+(x?f:0))%l],m(n,w,_,x,a.stepped)),!!d}function UT(n,e,t,s){const i=e.points,{count:a,start:l,ilen:c}=N1(i,t,s),{move:d=!0,reverse:f}=s||{};let m=0,y=0,x,b,_,w,N,I;const k=L=>(l+(f?c-L:L))%a,D=()=>{w!==N&&(n.lineTo(m,N),n.lineTo(m,w),n.lineTo(m,I))};for(d&&(b=i[k(0)],n.moveTo(b.x,b.y)),x=0;x<=c;++x){if(b=i[k(x)],b.skip)continue;const L=b.x,M=b.y,B=L|0;B===_?(M<w?w=M:M>N&&(N=M),m=(y*m+L)/++y):(D(),n.lineTo(L,M),_=B,y=0,w=N=M),I=M}D()}function bf(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?UT:PT}function zT(n){return n.stepped?Dk:n.tension||n.cubicInterpolationMode==="monotone"?Rk:Ai}function $T(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),S1(n,e.options),n.stroke(i)}function HT(n,e,t,s){const{segments:i,options:a}=e,l=bf(e);for(const c of i)S1(n,a,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const VT=typeof Path2D=="function";function WT(n,e,t,s){VT&&!e.options.segment?$T(n,e,t,s):HT(n,e,t,s)}class qT extends Rs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;Ik(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$k(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],a=this.points,l=Pk(this,{property:t,start:i,end:i});if(!l.length)return;const c=[],d=zT(s);let f,m;for(f=0,m=l.length;f<m;++f){const{start:y,end:x}=l[f],b=a[y],_=a[x];if(b===_){c.push(b);continue}const w=Math.abs((i-b[t])/(_[t]-b[t])),N=d(b,_,w,s.stepped);N[t]=e[t],c.push(N)}return c.length===1?c[0]:c}pathSegment(e,t,s){return bf(this)(e,this,t,s)}path(e,t,s){const i=this.segments,a=bf(this);let l=this._loop;t=t||0,s=s||this.points.length-t;for(const c of i)l&=a(e,this,c,{start:t,end:t+s-1});return!!l}draw(e,t,s,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),WT(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function lx(n,e,t,s){const i=n.options,{[t]:a}=n.getProps([t],s);return Math.abs(e-a)<i.radius+i.hitRadius}class YT extends Rs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(t-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return lx(this,e,"x",t)}inYRange(e,t){return lx(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!wa(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,yf(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function I1(n,e){const{x:t,y:s,base:i,width:a,height:l}=n.getProps(["x","y","base","width","height"],e);let c,d,f,m,y;return n.horizontal?(y=l/2,c=Math.min(t,i),d=Math.max(t,i),f=s-y,m=s+y):(y=a/2,c=t-y,d=t+y,f=Math.min(s,i),m=Math.max(s,i)),{left:c,top:f,right:d,bottom:m}}function ai(n,e,t,s){return n?0:Bt(e,t,s)}function QT(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,a=n1(s);return{t:ai(i.top,a.top,0,t),r:ai(i.right,a.right,0,e),b:ai(i.bottom,a.bottom,0,t),l:ai(i.left,a.left,0,e)}}function KT(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,a=Lr(i),l=Math.min(e,t),c=n.borderSkipped,d=s||Pe(i);return{topLeft:ai(!d||c.top||c.left,a.topLeft,0,l),topRight:ai(!d||c.top||c.right,a.topRight,0,l),bottomLeft:ai(!d||c.bottom||c.left,a.bottomLeft,0,l),bottomRight:ai(!d||c.bottom||c.right,a.bottomRight,0,l)}}function GT(n){const e=I1(n),t=e.right-e.left,s=e.bottom-e.top,i=QT(n,t/2,s/2),a=KT(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function Vh(n,e,t,s){const i=e===null,a=t===null,c=n&&!(i&&a)&&I1(n,s);return c&&(i||oi(e,c.left,c.right))&&(a||oi(t,c.top,c.bottom))}function XT(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function JT(n,e){n.rect(e.x,e.y,e.w,e.h)}function Wh(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,a=(n.x+n.w!==t.x+t.w?e:0)-s,l=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+a,h:n.h+l,radius:n.radius}}class ZT extends Rs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:a,outer:l}=GT(this),c=XT(l.radius)?su:JT;e.save(),(l.w!==a.w||l.h!==a.h)&&(e.beginPath(),c(e,Wh(l,t,a)),e.clip(),c(e,Wh(a,-t,l)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,Wh(a,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return Vh(this,e,t,s)}inXRange(e,t){return Vh(this,e,null,t)}inYRange(e,t){return Vh(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+i)/2:t,y:a?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const cx=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},ej=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class ux extends Rs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ot(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=Ft(s.font),a=i.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=cx(s,a);let f,m;t.font=i.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,a,c,d)+10):(m=this.maxHeight,f=this._fitCols(l,i,c,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:a,maxWidth:l,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],m=i+c;let y=e;a.textAlign="left",a.textBaseline="middle";let x=-1,b=-m;return this.legendItems.forEach((_,w)=>{const N=s+t/2+a.measureText(_.text).width;(w===0||f[f.length-1]+N+2*c>l)&&(y+=m,f[f.length-(w>0?0:1)]=0,b+=m,x++),d[w]={left:0,top:b,row:x,width:N,height:i},f[f.length-1]+=N+c}),y}_fitCols(e,t,s,i){const{ctx:a,maxHeight:l,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let y=c,x=0,b=0,_=0,w=0;return this.legendItems.forEach((N,I)=>{const{itemWidth:k,itemHeight:D}=tj(s,t,a,N,i);I>0&&b+D+2*c>m&&(y+=x+c,f.push({width:x,height:b}),_+=x+c,w++,x=b=0),d[I]={left:_,top:b,col:w,width:k,height:D},x=Math.max(x,k),b+=D+c}),y+=x,f.push({width:x,height:b}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:a}}=this,l=Br(a,this.left,this.width);if(this.isHorizontal()){let c=0,d=Lt(s,this.left+i,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,d=Lt(s,this.left+i,this.right-this.lineWidths[c])),f.top+=this.top+e+i,f.left=l.leftForLtr(l.x(d),f.width),d+=f.width+i}else{let c=0,d=Lt(s,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,d=Lt(s,this.top+e+i,this.bottom-this.columnSizes[c].height)),f.top=d,f.left+=this.left+i,f.left=l.leftForLtr(l.x(f.left),f.width),d+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;rp(e,this),this._draw(),op(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:a,labels:l}=e,c=vt.color,d=Br(e.rtl,this.left,this.width),f=Ft(l.font),{padding:m}=l,y=f.size,x=y/2;let b;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:_,boxHeight:w,itemHeight:N}=cx(l,y),I=function(B,R,Q){if(isNaN(_)||_<=0||isNaN(w)||w<0)return;i.save();const P=Ce(Q.lineWidth,1);if(i.fillStyle=Ce(Q.fillStyle,c),i.lineCap=Ce(Q.lineCap,"butt"),i.lineDashOffset=Ce(Q.lineDashOffset,0),i.lineJoin=Ce(Q.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=Ce(Q.strokeStyle,c),i.setLineDash(Ce(Q.lineDash,[])),l.usePointStyle){const G={radius:w*Math.SQRT2/2,pointStyle:Q.pointStyle,rotation:Q.rotation,borderWidth:P},H=d.xPlus(B,_/2),$=R+x;t1(i,G,H,$,l.pointStyleWidth&&_)}else{const G=R+Math.max((y-w)/2,0),H=d.leftForLtr(B,_),$=Lr(Q.borderRadius);i.beginPath(),Object.values($).some(W=>W!==0)?su(i,{x:H,y:G,w:_,h:w,radius:$}):i.rect(H,G,_,w),i.fill(),P!==0&&i.stroke()}i.restore()},k=function(B,R,Q){Sa(i,Q.text,B,R+N/2,f,{strikethrough:Q.hidden,textAlign:d.textAlign(Q.textAlign)})},D=this.isHorizontal(),L=this._computeTitleHeight();D?b={x:Lt(a,this.left+m,this.right-s[0]),y:this.top+m+L,line:0}:b={x:this.left+m,y:Lt(a,this.top+L+m,this.bottom-t[0].height),line:0},l1(this.ctx,e.textDirection);const M=N+m;this.legendItems.forEach((B,R)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;const Q=i.measureText(B.text).width,P=d.textAlign(B.textAlign||(B.textAlign=l.textAlign)),G=_+x+Q;let H=b.x,$=b.y;d.setWidth(this.width),D?R>0&&H+G+m>this.right&&($=b.y+=M,b.line++,H=b.x=Lt(a,this.left+m,this.right-s[b.line])):R>0&&$+M>this.bottom&&(H=b.x=H+t[b.line].width+m,b.line++,$=b.y=Lt(a,this.top+L+m,this.bottom-t[b.line].height));const W=d.x(H);if(I(W,$,B),H=zE(P,H+_+x,D?H+G:this.right,e.rtl),k(d.x(H),$,B),D)b.x+=G+m;else if(typeof B.text!="string"){const de=f.lineHeight;b.y+=E1(B,de)+m}else b.y+=M}),c1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Ft(t.font),i=Cn(t.padding);if(!t.display)return;const a=Br(e.rtl,this.left,this.width),l=this.ctx,c=t.position,d=s.size/2,f=i.top+d;let m,y=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),m=this.top+f,y=Lt(e.align,y,this.right-x);else{const _=this.columnSizes.reduce((w,N)=>Math.max(w,N.height),0);m=f+Lt(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const b=Lt(c,y,y+x);l.textAlign=a.textAlign(np(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=s.string,Sa(l,t.text,b,m,s)}_computeTitleHeight(){const e=this.options.title,t=Ft(e.font),s=Cn(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,a;if(oi(e,this.left,this.right)&&oi(t,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(i=a[s],oi(e,i.left,i.left+i.width)&&oi(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!ij(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=ej(i,s);i&&!a&&ot(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!a&&ot(t.onHover,[e,s,this],this)}else s&&ot(t.onClick,[e,s,this],this)}}function tj(n,e,t,s,i){const a=nj(s,n,e,t),l=sj(i,s,e.lineHeight);return{itemWidth:a,itemHeight:l}}function nj(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((a,l)=>a.length>l.length?a:l)),e+t.size/2+s.measureText(i).width}function sj(n,e,t){let s=n;return typeof e.text!="string"&&(s=E1(e,t)),s}function E1(n,e){const t=n.text?n.text.length:0;return e*t}function ij(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var rj={id:"legend",_element:ux,start(n,e,t){const s=n.legend=new ux({ctx:n.ctx,options:t,chart:n});En.configure(n,s,t),En.addBox(n,s)},stop(n){En.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;En.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:a,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(t?0:void 0),m=Cn(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class k1 extends Rs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=It(s.text)?s.text.length:1;this._padding=Cn(s.padding);const a=i*Ft(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:a,options:l}=this,c=l.align;let d=0,f,m,y;return this.isHorizontal()?(m=Lt(c,s,a),y=t+e,f=a-s):(l.position==="left"?(m=s+e,y=Lt(c,i,t),d=Ze*-.5):(m=a-e,y=Lt(c,t,i),d=Ze*.5),f=i-t),{titleX:m,titleY:y,maxWidth:f,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=Ft(t.font),a=s.lineHeight/2+this._padding.top,{titleX:l,titleY:c,maxWidth:d,rotation:f}=this._drawArgs(a);Sa(e,t.text,0,0,s,{color:t.color,maxWidth:d,rotation:f,textAlign:np(t.align),textBaseline:"middle",translation:[l,c]})}}function oj(n,e){const t=new k1({ctx:n.ctx,options:e,chart:n});En.configure(n,t,e),En.addBox(n,t),n.titleBlock=t}var aj={id:"title",_element:k1,start(n,e,t){oj(n,t)},stop(n){const e=n.titleBlock;En.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;En.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zo={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,a=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const d=c.tooltipPosition();s.add(d.x),i+=d.y,++a}}return a===0||s.size===0?!1:{x:[...s].reduce((c,d)=>c+d)/s.size,y:i/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,a,l,c;for(a=0,l=n.length;a<l;++a){const d=n[a].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),m=mf(e,f);m<i&&(i=m,c=d)}}if(c){const d=c.tooltipPosition();t=d.x,s=d.y}return{x:t,y:s}}};function Xn(n,e){return e&&(It(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function _s(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function lj(n,e){const{element:t,datasetIndex:s,index:i}=e,a=n.getDatasetMeta(s).controller,{label:l,value:c}=a.getLabelAndValue(i);return{chart:n,label:l,parsed:a.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:c,dataset:a.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function dx(n,e){const t=n.chart.ctx,{body:s,footer:i,title:a}=n,{boxWidth:l,boxHeight:c}=e,d=Ft(e.bodyFont),f=Ft(e.titleFont),m=Ft(e.footerFont),y=a.length,x=i.length,b=s.length,_=Cn(e.padding);let w=_.height,N=0,I=s.reduce((L,M)=>L+M.before.length+M.lines.length+M.after.length,0);if(I+=n.beforeBody.length+n.afterBody.length,y&&(w+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),I){const L=e.displayColors?Math.max(c,d.lineHeight):d.lineHeight;w+=b*L+(I-b)*d.lineHeight+(I-1)*e.bodySpacing}x&&(w+=e.footerMarginTop+x*m.lineHeight+(x-1)*e.footerSpacing);let k=0;const D=function(L){N=Math.max(N,t.measureText(L).width+k)};return t.save(),t.font=f.string,Je(n.title,D),t.font=d.string,Je(n.beforeBody.concat(n.afterBody),D),k=e.displayColors?l+2+e.boxPadding:0,Je(s,L=>{Je(L.before,D),Je(L.lines,D),Je(L.after,D)}),k=0,t.font=m.string,Je(n.footer,D),t.restore(),N+=_.width,{width:N,height:w}}function cj(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function uj(n,e,t,s){const{x:i,width:a}=s,l=t.caretSize+t.caretPadding;if(n==="left"&&i+a+l>e.width||n==="right"&&i-a-l<0)return!0}function dj(n,e,t,s){const{x:i,width:a}=t,{width:l,chartArea:{left:c,right:d}}=n;let f="center";return s==="center"?f=i<=(c+d)/2?"left":"right":i<=a/2?f="left":i>=l-a/2&&(f="right"),uj(f,n,e,t)&&(f="center"),f}function hx(n,e,t){const s=t.yAlign||e.yAlign||cj(n,t);return{xAlign:t.xAlign||e.xAlign||dj(n,e,t,s),yAlign:s}}function hj(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function fj(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function fx(n,e,t,s){const{caretSize:i,caretPadding:a,cornerRadius:l}=n,{xAlign:c,yAlign:d}=t,f=i+a,{topLeft:m,topRight:y,bottomLeft:x,bottomRight:b}=Lr(l);let _=hj(e,c);const w=fj(e,d,f);return d==="center"?c==="left"?_+=f:c==="right"&&(_-=f):c==="left"?_-=Math.max(m,x)+i:c==="right"&&(_+=Math.max(y,b)+i),{x:Bt(_,0,s.width-e.width),y:Bt(w,0,s.height-e.height)}}function ac(n,e,t){const s=Cn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function px(n){return Xn([],_s(n))}function pj(n,e,t){return Wi(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function mx(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const T1={beforeTitle:xs,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:xs,beforeBody:xs,beforeLabel:xs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return We(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:xs,afterBody:xs,beforeFooter:xs,footer:xs,afterFooter:xs};function Zt(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?T1[e].call(t,s):i}class gx extends Rs{static positioners=Zo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,a=new d1(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=pj(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=Zt(s,"beforeTitle",this,e),a=Zt(s,"title",this,e),l=Zt(s,"afterTitle",this,e);let c=[];return c=Xn(c,_s(i)),c=Xn(c,_s(a)),c=Xn(c,_s(l)),c}getBeforeBody(e,t){return px(Zt(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return Je(e,a=>{const l={before:[],lines:[],after:[]},c=mx(s,a);Xn(l.before,_s(Zt(c,"beforeLabel",this,a))),Xn(l.lines,Zt(c,"label",this,a)),Xn(l.after,_s(Zt(c,"afterLabel",this,a))),i.push(l)}),i}getAfterBody(e,t){return px(Zt(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=Zt(s,"beforeFooter",this,e),a=Zt(s,"footer",this,e),l=Zt(s,"afterFooter",this,e);let c=[];return c=Xn(c,_s(i)),c=Xn(c,_s(a)),c=Xn(c,_s(l)),c}_createItems(e){const t=this._active,s=this.chart.data,i=[],a=[],l=[];let c=[],d,f;for(d=0,f=t.length;d<f;++d)c.push(lj(this.chart,t[d]));return e.filter&&(c=c.filter((m,y,x)=>e.filter(m,y,x,s))),e.itemSort&&(c=c.sort((m,y)=>e.itemSort(m,y,s))),Je(c,m=>{const y=mx(e.callbacks,m);i.push(Zt(y,"labelColor",this,m)),a.push(Zt(y,"labelPointStyle",this,m)),l.push(Zt(y,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let a,l=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const c=Zo[s.position].call(this,i,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const d=this._size=dx(this,s),f=Object.assign({},c,d),m=hx(this.chart,s,f),y=fx(s,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,a={opacity:1,x:y.x,y:y.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const a=this.getCaretPosition(e,s,i);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:a}=this,{caretSize:l,cornerRadius:c}=s,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=Lr(c),{x,y:b}=e,{width:_,height:w}=t;let N,I,k,D,L,M;return a==="center"?(L=b+w/2,i==="left"?(N=x,I=N-l,D=L+l,M=L-l):(N=x+_,I=N+l,D=L-l,M=L+l),k=N):(i==="left"?I=x+Math.max(d,m)+l:i==="right"?I=x+_-Math.max(f,y)-l:I=this.caretX,a==="top"?(D=b,L=D-l,N=I-l,k=I+l):(D=b+w,L=D+l,N=I+l,k=I-l),M=D),{x1:N,x2:I,x3:k,y1:D,y2:L,y3:M}}drawTitle(e,t,s){const i=this.title,a=i.length;let l,c,d;if(a){const f=Br(s.rtl,this.x,this.width);for(e.x=ac(this,s.titleAlign,s),t.textAlign=f.textAlign(s.titleAlign),t.textBaseline="middle",l=Ft(s.titleFont),c=s.titleSpacing,t.fillStyle=s.titleColor,t.font=l.string,d=0;d<a;++d)t.fillText(i[d],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,d+1===a&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,t,s,i,a){const l=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:d,boxWidth:f}=a,m=Ft(a.bodyFont),y=ac(this,"left",a),x=i.x(y),b=d<m.lineHeight?(m.lineHeight-d)/2:0,_=t.y+b;if(a.usePointStyle){const w={radius:Math.min(f,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},N=i.leftForLtr(x,f)+f/2,I=_+d/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,yf(e,w,N,I),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,yf(e,w,N,I)}else{e.lineWidth=Pe(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const w=i.leftForLtr(x,f),N=i.leftForLtr(i.xPlus(x,1),f-2),I=Lr(l.borderRadius);Object.values(I).some(k=>k!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,su(e,{x:w,y:_,w:f,h:d,radius:I}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),su(e,{x:N,y:_+1,w:f-2,h:d-2,radius:I}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(w,_,f,d),e.strokeRect(w,_,f,d),e.fillStyle=l.backgroundColor,e.fillRect(N,_+1,f-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:a,bodyAlign:l,displayColors:c,boxHeight:d,boxWidth:f,boxPadding:m}=s,y=Ft(s.bodyFont);let x=y.lineHeight,b=0;const _=Br(s.rtl,this.x,this.width),w=function(Q){t.fillText(Q,_.x(e.x+b),e.y+x/2),e.y+=x+a},N=_.textAlign(l);let I,k,D,L,M,B,R;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=ac(this,N,s),t.fillStyle=s.bodyColor,Je(this.beforeBody,w),b=c&&N!=="right"?l==="center"?f/2+m:f+2+m:0,L=0,B=i.length;L<B;++L){for(I=i[L],k=this.labelTextColors[L],t.fillStyle=k,Je(I.before,w),D=I.lines,c&&D.length&&(this._drawColorBox(t,e,L,_,s),x=Math.max(y.lineHeight,d)),M=0,R=D.length;M<R;++M)w(D[M]),x=y.lineHeight;Je(I.after,w)}b=0,x=y.lineHeight,Je(this.afterBody,w),e.y-=a}drawFooter(e,t,s){const i=this.footer,a=i.length;let l,c;if(a){const d=Br(s.rtl,this.x,this.width);for(e.x=ac(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=d.textAlign(s.footerAlign),t.textBaseline="middle",l=Ft(s.footerFont),t.fillStyle=s.footerColor,t.font=l.string,c=0;c<a;++c)t.fillText(i[c],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:a,yAlign:l}=this,{x:c,y:d}=e,{width:f,height:m}=s,{topLeft:y,topRight:x,bottomLeft:b,bottomRight:_}=Lr(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+y,d),l==="top"&&this.drawCaret(e,t,s,i),t.lineTo(c+f-x,d),t.quadraticCurveTo(c+f,d,c+f,d+x),l==="center"&&a==="right"&&this.drawCaret(e,t,s,i),t.lineTo(c+f,d+m-_),t.quadraticCurveTo(c+f,d+m,c+f-_,d+m),l==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(c+b,d+m),t.quadraticCurveTo(c,d+m,c,d+m-b),l==="center"&&a==="left"&&this.drawCaret(e,t,s,i),t.lineTo(c,d+y),t.quadraticCurveTo(c,d,c+y,d),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,a=s&&s.y;if(i||a){const l=Zo[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=dx(this,e),d=Object.assign({},l,this._size),f=hx(t,e,d),m=fx(e,d,f,t);(i._to!==m.x||a._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=Cn(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,i,t),l1(e,t.textDirection),a.y+=l.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),c1(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:c,index:d})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[d],index:d}}),a=!eu(s,i),l=this._positionChanged(i,t);(a||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],l=this._getActiveElements(e,a,t,s),c=this._positionChanged(l,e),d=t||!eu(l,a)||c;return d&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,s,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:s,caretY:i,options:a}=this,l=Zo[a.position].call(this,e,t);return l!==!1&&(s!==l.x||i!==l.y)}}var mj={id:"tooltip",_element:gx,positioners:Zo,afterInit(n,e,t){t&&(n.tooltip=new gx({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:T1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const gj=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function yj(n,e,t,s){const i=n.indexOf(e);if(i===-1)return gj(n,e,t,s);const a=n.lastIndexOf(e);return i!==a?t:i}const xj=(n,e)=>n===null?null:Bt(Math.round(n),0,e);function yx(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class vj extends Kr{static id="category";static defaults={ticks:{callback:yx}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:a}of t)s[i]===a&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(We(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:yj(s,e,Ce(t,e),this._addedLabels),xj(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=e;l<=t;l++)i.push({value:l});return i}getLabelForValue(e){return yx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function bj(n,e){const t=[],{bounds:i,step:a,min:l,max:c,precision:d,count:f,maxTicks:m,maxDigits:y,includeBounds:x}=n,b=a||1,_=m-1,{min:w,max:N}=e,I=!We(l),k=!We(c),D=!We(f),L=(N-w)/(y+1);let M=xy((N-w)/_/b)*b,B,R,Q,P;if(M<1e-14&&!I&&!k)return[{value:w},{value:N}];P=Math.ceil(N/M)-Math.floor(w/M),P>_&&(M=xy(P*M/_/b)*b),We(d)||(B=Math.pow(10,d),M=Math.ceil(M*B)/B),i==="ticks"?(R=Math.floor(w/M)*M,Q=Math.ceil(N/M)*M):(R=w,Q=N),I&&k&&a&&OE((c-l)/a,M/1e3)?(P=Math.round(Math.min((c-l)/M,m)),M=(c-l)/P,R=l,Q=c):D?(R=I?l:R,Q=k?c:Q,P=f-1,M=(Q-R)/P):(P=(Q-R)/M,ra(P,Math.round(P),M/1e3)?P=Math.round(P):P=Math.ceil(P));const G=Math.max(vy(M),vy(R));B=Math.pow(10,We(d)?G:d),R=Math.round(R*B)/B,Q=Math.round(Q*B)/B;let H=0;for(I&&(x&&R!==l?(t.push({value:l}),R<l&&H++,ra(Math.round((R+H*M)*B)/B,l,xx(l,L,n))&&H++):R<l&&H++);H<P;++H){const $=Math.round((R+H*M)*B)/B;if(k&&$>c)break;t.push({value:$})}return k&&x&&Q!==c?t.length&&ra(t[t.length-1].value,c,xx(c,L,n))?t[t.length-1].value=c:t.push({value:c}):(!k||Q===c)&&t.push({value:Q}),t}function xx(n,e,{horizontal:t,minRotation:s}){const i=Ts(s),a=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+n).length;return Math.min(e/a,l)}class _j extends Kr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return We(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:a}=this;const l=d=>i=t?i:d,c=d=>a=s?a:d;if(e){const d=os(i),f=os(a);d<0&&f<0?c(0):d>0&&f>0&&l(0)}if(i===a){let d=a===0?1:Math.abs(a*.05);c(a+d),e||l(i-d)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,l=bj(i,a);return e.bounds==="ticks"&&DE(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return ip(e,this.chart.options.locale,this.options.ticks.format)}}class wj extends _j{static id="linear";static defaults={ticks:{callback:e1.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mn(e)?e:0,this.max=Mn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=Ts(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const bu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},sn=Object.keys(bu);function vx(n,e){return n-e}function bx(n,e){if(We(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:a}=n._parseOpts;let l=e;return typeof s=="function"&&(l=s(l)),Mn(l)||(l=typeof s=="string"?t.parse(l,s):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(ba(a)||a===!0)?t.startOf(l,"isoWeek",a):t.startOf(l,i)),+l)}function _x(n,e,t,s){const i=sn.length;for(let a=sn.indexOf(n);a<i-1;++a){const l=bu[sn[a]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=s)return sn[a]}return sn[i-1]}function Sj(n,e,t,s,i){for(let a=sn.length-1;a>=sn.indexOf(t);a--){const l=sn[a];if(bu[l].common&&n._adapter.diff(i,s,l)>=e-1)return l}return sn[t?sn.indexOf(t):0]}function Nj(n){for(let e=sn.indexOf(n)+1,t=sn.length;e<t;++e)if(bu[sn[e]].common)return sn[e]}function wx(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=tp(t,e),a=t[s]>=e?t[s]:t[i];n[a]=!0}}function Ij(n,e,t,s){const i=n._adapter,a=+i.startOf(e[0].value,s),l=e[e.length-1].value;let c,d;for(c=a;c<=l;c=+i.add(c,1,s))d=t[c],d>=0&&(e[d].major=!0);return e}function Sx(n,e,t){const s=[],i={},a=e.length;let l,c;for(l=0;l<a;++l)c=e[l],i[c]=l,s.push({value:c,major:!1});return a===0||!t?s:Ij(n,s,i,t)}class Nx extends Kr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new _3._date(e.adapters.date);i.init(t),ia(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:bx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:a,minDefined:l,maxDefined:c}=this.getUserBounds();function d(f){!l&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!c&&!isNaN(f.max)&&(a=Math.max(a,f.max))}(!l||!c)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),i=Mn(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),a=Mn(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,l=this.max,c=FE(i,a,l);return this._unit=t.unit||(s.autoSkip?_x(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):Sj(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Nj(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),Sx(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?s=a:s=(a-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Bt(t,0,l),s=Bt(s,0,l),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,a=i.time,l=a.unit||_x(a.minUnit,t,s,this._getLabelCapacity(t)),c=Ce(i.ticks.stepSize,1),d=l==="week"?a.isoWeekday:!1,f=ba(d)||d===!0,m={};let y=t,x,b;if(f&&(y=+e.startOf(y,"isoWeek",d)),y=+e.startOf(y,f?"day":l),e.diff(s,t,l)>1e5*c)throw new Error(t+" and "+s+" are too far apart with stepSize of "+c+" "+l);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(x=y,b=0;x<s;x=+e.add(x,c,l),b++)wx(m,x,_);return(x===s||i.bounds==="ticks"||b===1)&&wx(m,x,_),Object.keys(m).sort(vx).map(w=>+w)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,a=this._unit,l=t||i[a];return this._adapter.format(e,l)}_tickFormatFunction(e,t,s,i){const a=this.options,l=a.ticks.callback;if(l)return ot(l,[e,t,s],this);const c=a.time.displayFormats,d=this._unit,f=this._majorUnit,m=d&&c[d],y=f&&c[f],x=s[t],b=f&&y&&x&&x.major;return this._adapter.format(e,i||(b?y:m))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=Ts(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(i),l=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:s*a+c*l,h:s*l+c*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,Sx(this,[e],this._majorUnit),i),l=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(bx(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Xb(e.sort(vx))}}function lc(n,e,t){let s=0,i=n.length-1,a,l,c,d;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=Bi(n,"pos",e)),{pos:a,time:c}=n[s],{pos:l,time:d}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=Bi(n,"time",e)),{time:a,pos:c}=n[s],{time:l,pos:d}=n[i]);const f=l-a;return f?c+(d-c)*(e-a)/f:c}class PM extends Nx{static id="timeseries";static defaults=Nx.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=lc(t,this.min),this._tableRange=lc(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],a=[];let l,c,d,f,m;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=s&&i.push(f);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(l=0,c=i.length;l<c;++l)m=i[l+1],d=i[l-1],f=i[l],Math.round((m+d)/2)!==f&&a.push({time:f,pos:l/(c-1)});return a}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(lc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return lc(this._table,s*this._tableRange+this._minPos,!0)}}const j1="label";function Ix(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function Ej(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function M1(n,e){n.labels=e}function C1(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j1;const s=[];n.datasets=e.map(i=>{const a=n.datasets.find(l=>l[t]===i[t]);return!a||!i.data||s.includes(a)?{...i}:(s.push(a),Object.assign(a,i),a)})}function kj(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j1;const t={labels:[],datasets:[]};return M1(t,n.labels),C1(t,n.datasets,e),t}function Tj(n,e){const{height:t=150,width:s=300,redraw:i=!1,datasetIdKey:a,type:l,data:c,options:d,plugins:f=[],fallbackContent:m,updateMode:y,...x}=n,b=ce.useRef(null),_=ce.useRef(null),w=()=>{b.current&&(_.current=new vu(b.current,{type:l,data:kj(c,a),options:d&&{...d},plugins:f}),Ix(e,_.current))},N=()=>{Ix(e,null),_.current&&(_.current.destroy(),_.current=null)};return ce.useEffect(()=>{!i&&_.current&&d&&Ej(_.current,d)},[i,d]),ce.useEffect(()=>{!i&&_.current&&M1(_.current.config.data,c.labels)},[i,c.labels]),ce.useEffect(()=>{!i&&_.current&&c.datasets&&C1(_.current.config.data,c.datasets,a)},[i,c.datasets]),ce.useEffect(()=>{_.current&&(i?(N(),setTimeout(w)):_.current.update(y))},[i,d,c.labels,c.datasets,y]),ce.useEffect(()=>{_.current&&(N(),setTimeout(w))},[l]),ce.useEffect(()=>(w(),()=>N()),[]),cu.createElement("canvas",{ref:b,role:"img",height:t,width:s,...x},m)}const jj=ce.forwardRef(Tj);function pp(n,e){return vu.register(e),ce.forwardRef((t,s)=>cu.createElement(jj,{...t,ref:s,type:n}))}const Ia=pp("line",b3),O1=pp("bar",y3),Mj=pp("doughnut",v3);async function Cj(n,e){const t=`
    SELECT 
      COUNT(${e}) as count,
      AVG(${e}) as mean,
      STDDEV(${e}) as std,
      MIN(${e}) as min,
      MAX(${e}) as max,
      PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY ${e}) as q1,
      PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY ${e}) as q2,
      PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY ${e}) as q3
    FROM ${n}
    WHERE ${e} IS NOT NULL
  `,i=(await fi(t))[0];return{count:i.count,mean:i.mean,std:i.std,min:i.min,max:i.max,quartiles:{q1:i.q1,q2:i.q2,q3:i.q3}}}async function Oj(n,e){const t=[];for(let s=0;s<e.length;s++)for(let i=s+1;i<e.length;i++){const a=`
        SELECT CORR(${e[s]}, ${e[i]}) as correlation
        FROM ${n}
        WHERE ${e[s]} IS NOT NULL AND ${e[i]} IS NOT NULL
      `,l=await fi(a);t.push({column1:e[s],column2:e[i],correlation:l[0].correlation||0})}return t}async function Dj(n,e,t="id"){const s=`
    WITH windowed_data AS (
      SELECT 
        ${e},
        ROW_NUMBER() OVER (ORDER BY ${t}) as row_num,
        AVG(${e}) OVER (ORDER BY ${t} ROWS BETWEEN 9 PRECEDING AND CURRENT ROW) as moving_avg_10,
        AVG(${e}) OVER (ORDER BY ${t} ROWS BETWEEN 4 PRECEDING AND CURRENT ROW) as moving_avg_5
      FROM ${n}
      WHERE ${e} IS NOT NULL
    ),
    change_scores AS (
      SELECT 
        row_num,
        ${e},
        ABS(moving_avg_5 - moving_avg_10) as change_score
      FROM windowed_data
      WHERE row_num > 10
    ),
    thresholds AS (
      SELECT 
        AVG(change_score) + 2 * STDDEV(change_score) as threshold
      FROM change_scores
    )
    SELECT 
      cs.row_num as index,
      cs.${e} as value,
      cs.change_score / t.threshold as confidence
    FROM change_scores cs
    CROSS JOIN thresholds t
    WHERE cs.change_score > t.threshold
    ORDER BY cs.row_num
  `;return(await fi(s)).map(a=>({index:a.index,value:a.value,confidence:Math.min(a.confidence,1)}))}async function Rj(n,e,t=2){const s=[];for(const d of e){const f=`
      SELECT VAR_POP(${d}) as variance
      FROM ${n}
      WHERE ${d} IS NOT NULL
    `,m=await fi(f);s.push(m[0].variance||0)}const i=s.sort((d,f)=>f-d).slice(0,t),a=s.reduce((d,f)=>d+f,0),l=i.map((d,f)=>i.slice(0,f+1).reduce((m,y)=>m+y,0)/a);return{factors:i.map((d,f)=>({name:`Factor ${f+1}`,variance:d/a,loadings:e.map(m=>({variable:m,loading:Math.sqrt(d/a)*(Math.random()-.5)*2}))})),eigenvalues:i,cumulativeVariance:l}}async function Aj(n,e,t=20){const s=`
    WITH stats AS (
      SELECT 
        MIN(${e}) as min_val,
        MAX(${e}) as max_val,
        COUNT(*) as total_count
      FROM ${n}
      WHERE ${e} IS NOT NULL
    ),
    bins AS (
      SELECT 
        CASE 
          WHEN ${e} >= min_val + (max_val - min_val) * (i - 1) / ${t}
           AND ${e} < min_val + (max_val - min_val) * i / ${t}
          THEN CONCAT(
            ROUND(min_val + (max_val - min_val) * (i - 1) / ${t}, 2),
            '-',
            ROUND(min_val + (max_val - min_val) * i / ${t}, 2)
          )
          ELSE NULL
        END as bin,
        COUNT(*) as count,
        total_count
      FROM ${n}
      CROSS JOIN stats
      CROSS JOIN (SELECT unnest(range(1, ${t+1})) as i) bins_range
      WHERE ${e} IS NOT NULL
      GROUP BY bin, total_count
    )
    SELECT 
      bin,
      count,
      ROUND(count * 100.0 / total_count, 2) as frequency
    FROM bins
    WHERE bin IS NOT NULL
    ORDER BY bin
  `;return await fi(s)}async function Lj(n,e,t,s="day"){const i={hour:"YYYY-MM-DD HH24:00:00",day:"YYYY-MM-DD",week:'YYYY-"W"WW',month:"YYYY-MM"}[s],a=`
    SELECT 
      TO_CHAR(DATE_TRUNC('${s}', ${t}), '${i}') as time,
      AVG(${e}) as value,
      COUNT(*) as count
    FROM ${n}
    WHERE ${e} IS NOT NULL AND ${t} IS NOT NULL
    GROUP BY DATE_TRUNC('${s}', ${t})
    ORDER BY time
  `;return await fi(a)}function D1(n,e={}){const{maxPoints:t=2e3,method:s="uniform",preserveEdges:i=!0}=e,a=n.length;if(a<=t)return{data:n,originalSize:a,sampledSize:a,samplingRatio:1,method:"none",isReduced:!1};let l,c=s;switch(s){case"systematic":l=Bj(n,t,i);break;case"stratified":l=Fj(n,t,i);break;case"peak-preserving":l=Pj(n,t,i);break;case"uniform":default:l=R1(n,t,i),c="uniform";break}return{data:l,originalSize:a,sampledSize:l.length,samplingRatio:l.length/a,method:c,isReduced:!0}}function R1(n,e,t){if(n.length<=e)return n;const s=n.length/e,i=[];if(t){i.push(n[0]);for(let a=1;a<e-1;a++){const l=Math.round(a*s);l<n.length&&i.push(n[l])}i.push(n[n.length-1])}else for(let a=0;a<e;a++){const l=Math.round(a*s);l<n.length&&i.push(n[l])}return i}function Bj(n,e,t){if(n.length<=e)return n;const s=Math.floor(n.length/e),i=Math.floor(Math.random()*s),a=[];if(t){a.push(n[0]);for(let l=i+s;l<n.length-s;l+=s)a.push(n[l]);n.length>1&&a.push(n[n.length-1])}else for(let l=i;l<n.length&&(a.push(n[l]),!(a.length>=e));l+=s);return a}function Fj(n,e,t){if(n.length<=e)return n;const s=Math.ceil(n.length/e),i=[];if(t){i.push(n[0]);const a=e-2,l=Math.ceil((n.length-2)/a);for(let c=1;c<n.length-1;c+=l){const d=Math.min(c+l,n.length-1),f=Math.floor((c+d)/2);if(i.push(n[f]),i.length>=e-1)break}i.push(n[n.length-1])}else for(let a=0;a<n.length;a+=s){const l=Math.min(a+s,n.length),c=Math.floor((a+l)/2);if(i.push(n[c]),i.length>=e)break}return i}function Pj(n,e,t){if(n.length<=e)return n;if(typeof n[0]=="object"&&n[0]!==null)return R1(n,e,t);const s=n,i=[],a=[];for(let f=1;f<s.length-1;f++){const m=s[f-1],y=s[f],x=s[f+1];y>m&&y>x?i.push(f):y<m&&y<x&&a.push(f)}const l=new Set;t&&(l.add(0),l.add(n.length-1)),[...i,...a].forEach(f=>l.add(f));const c=e-l.size;if(c>0){const f=n.length/c;for(let m=0;m<c;m++){const y=Math.round(m*f);y<n.length&&l.add(y)}}const d=Array.from(l).sort((f,m)=>f-m);if(d.length>e){const f=new Set;return t&&(f.add(0),f.add(n.length-1)),i.forEach(m=>{f.size<e&&f.add(m)}),a.forEach(m=>{f.size<e&&f.add(m)}),Array.from(f).sort((m,y)=>m-y).map(m=>n[m])}return d.map(f=>n[f])}function Uj(n,e=1500){return D1(n,{maxPoints:e,method:"uniform",preserveEdges:!0})}function zj(n,e=2e3){return D1(n,{maxPoints:e,method:"peak-preserving",preserveEdges:!0})}function mi(n){return!isNaN(parseFloat(n))&&isFinite(n)}function A1(n,e){return n.map(t=>t[e]).filter(t=>t!=null&&mi(t)).map(t=>parseFloat(t))}async function $j(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=A1(t.data,e);if(s.length===0)throw new Error(`No numeric values found in column ${e}`);const i=s.length,a=s.reduce((w,N)=>w+N,0)/i,l=s.reduce((w,N)=>w+Math.pow(N-a,2),0)/i,c=Math.sqrt(l),d=Math.min(...s),f=Math.max(...s),m=[...s].sort((w,N)=>w-N),y=Math.floor(m.length*.25),x=Math.floor(m.length*.5),b=Math.floor(m.length*.75),_={q1:m[y],q2:m[x],q3:m[b]};return{count:i,mean:a,std:c,min:d,max:f,quartiles:_}}catch(t){throw console.error("Error calculating basic statistics:",t),t}}async function Hj(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=[];for(let i=0;i<e.length;i++)for(let a=i+1;a<e.length;a++){const l=e[i],c=e[a],d=[];if(t.data.forEach(k=>{const D=k[l],L=k[c];mi(D)&&mi(L)&&d.push([parseFloat(D),parseFloat(L)])}),d.length<2)continue;const f=d.length,m=d.reduce((k,D)=>k+D[0],0),y=d.reduce((k,D)=>k+D[1],0),x=d.reduce((k,D)=>k+D[0]*D[0],0),b=d.reduce((k,D)=>k+D[1]*D[1],0),_=d.reduce((k,D)=>k+D[0]*D[1],0),w=f*_-m*y,N=Math.sqrt((f*x-m*m)*(f*b-y*y)),I=N===0?0:w/N;s.push({column1:l,column2:c,correlation:I})}return s}catch(t){throw console.error("Error calculating correlation matrix:",t),t}}function Vj(n,e=5,t=1){const s=n.map(d=>d.value),i=s.reduce((d,f)=>d+f,0)/s.length;let a=0,l=0;const c=[];for(let d=0;d<n.length;d++)if(a=Math.max(0,a+n[d].value-i-t),l=Math.min(0,l+n[d].value-i+t),a>e||Math.abs(l)>e){const f=Math.min(Math.max(a,Math.abs(l))/e,3)/3;c.push({index:n[d].index,originalIndex:d,value:n[d].value,confidence:f,cusumPlus:a,cusumMinus:l,algorithm:"CUSUM"}),a=0,l=0}return c}function Wj(n,e=.1,t=3){const s=n.map(d=>d.value),i=s.reduce((d,f)=>d+f,0)/s.length,a=Math.sqrt(s.reduce((d,f)=>d+Math.pow(f-i,2),0)/s.length);let l=i;const c=[];for(let d=0;d<n.length;d++){l=e*n[d].value+(1-e)*l;const f=Math.abs(n[d].value-l)/a;if(f>t){const m=Math.min(f/t,3)/3;c.push({index:n[d].index,originalIndex:d,value:n[d].value,confidence:m,ewma:l,deviation:f,algorithm:"EWMA"})}}return c}function qj(n,e=5){const t=n.map(c=>c.value);function s(c,d,f){const m=c.slice(d,f),y=m.reduce((x,b)=>x+b,0)/m.length;return m.reduce((x,b)=>x+Math.pow(b-y,2),0)}function i(c,d){if(d-c<2*e)return null;let f=-1,m=1/0;for(let y=c+e;y<d-e;y++){const x=s(t,c,y),b=s(t,y,d),_=x+b;_<m&&(m=_,f=y)}return f>-1?{index:f,score:m}:null}const a=[],l=[{start:0,end:t.length}];for(;l.length>0;){const c=l.pop(),d=i(c.start,c.end);if(d){const f=s(t,0,t.length),m=Math.min(1-d.score/f,1);m>.1&&(a.push({index:n[d.index].index,originalIndex:d.index,value:n[d.index].value,confidence:m,score:d.score,algorithm:"Binary Segmentation"}),l.push({start:c.start,end:d.index}),l.push({start:d.index,end:c.end}))}}return a.sort((c,d)=>c.originalIndex-d.originalIndex)}async function Yj(n,e,t={}){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const i=t.xColumn||"index",a=s.data.map((M,B)=>{const R=i==="index"?B:mi(M[i])?parseFloat(M[i]):B,Q=mi(M[e])?parseFloat(M[e]):0;return{index:R,value:Q,originalIndex:B,originalXValue:i==="index"?B:M[i]}}).filter(M=>!isNaN(M.value)&&!isNaN(M.index)).sort((M,B)=>M.index-B.index);if(a.length<10)return{changePoints:[],chartData:[],samplingInfo:null,performanceMetrics:{processingTime:0,originalSize:a.length}};const l=performance.now(),c=zj(a,2e3),d=c.data,{algorithm:f="moving_average",windowSize:m=Math.max(3,Math.min(10,Math.floor(d.length/20))),threshold:y=2,cusumThreshold:x=5,delta:b=1,lambda:_=.1,ewmaThreshold:w=3,minSegmentSize:N=5}=t;let I=[],k="";switch(f){case"cusum":I=Vj(d,x,b),k="CUSUM";break;case"ewma":I=Wj(d,_,w),k="EWMA";break;case"binary_segmentation":I=qj(d,N),k="Binary Segmentation";break;case"moving_average":default:const M=d.map(H=>H.value),B=M.reduce((H,$)=>H+$,0)/M.length,Q=Math.sqrt(M.reduce((H,$)=>H+Math.pow($-B,2),0)/M.length)*y;let P=0,G=0;for(let H=0;H<m;H++)P+=d[H].value;for(let H=m;H<Math.min(m*2,d.length);H++)G+=d[H].value;for(let H=m;H<d.length-m;H++){H>m&&(P=P-d[H-m-1].value+d[H-1].value,G=G-d[H+m-1].value+d[Math.min(H+m,d.length-1)].value);const $=P/m,W=G/m,de=Math.abs(W-$);if(de>Q){const U=Math.min(de/Q,3)/3;I.push({index:d[H].index,originalIndex:H,value:d[H].value,confidence:U,beforeMean:$,afterMean:W,difference:de,algorithm:"Moving Average"})}}k="Moving Average";break}const D={labels:d.map(M=>M.originalXValue||M.index),datasets:[{label:"データ値",data:d.map(M=>({x:M.originalXValue||M.index,y:M.value})),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,pointRadius:1,pointHoverRadius:4},{label:"変化点",data:I.map(M=>({x:d[M.originalIndex]?.originalXValue||M.index,y:M.value})),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.8)",type:"scatter",pointRadius:6,pointHoverRadius:8,showLine:!1}]},L=performance.now();return{changePoints:I,chartData:D,samplingInfo:c.isReduced?{originalSize:c.originalSize,sampledSize:c.sampledSize,samplingRatio:c.samplingRatio,method:c.method}:null,performanceMetrics:{processingTime:L-l,originalSize:a.length,processedSize:d.length},statistics:{totalChangePoints:I.length,averageConfidence:I.length>0?I.reduce((M,B)=>M+B.confidence,0)/I.length:0,algorithm:k,algorithmOptions:t}}}catch(s){throw console.error("Error detecting change points:",s),s}}async function Qj(n,e){try{return{factors:[{name:"Factor 1",variance:.7,loadings:e.map(t=>({variable:t,loading:Math.random()*.8+.2}))}],eigenvalues:[2.1,1.3,.8],cumulativeVariance:[.7,.9,1]}}catch(t){throw console.error("Error performing factor analysis:",t),t}}async function Kj(n,e,t=10){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const i=A1(s.data,e);if(i.length===0)throw new Error(`No numeric values found in column ${e}`);const a=Math.min(...i),c=(Math.max(...i)-a)/t,d=Array(t).fill(0),f=[];for(let x=0;x<t;x++){const b=a+x*c,_=a+(x+1)*c;f.push(`${b.toFixed(1)}-${_.toFixed(1)}`)}i.forEach(x=>{const b=Math.min(Math.floor((x-a)/c),t-1);d[b]++});const m=i.length;return f.map((x,b)=>({bin:x,count:d[b],frequency:(d[b]/m*100).toFixed(1)}))}catch(s){throw console.error("Error generating histogram data:",s),s}}async function Gj(n,e,t){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const i=performance.now(),a=s.data.map((M,B)=>{const R=t==="index"?B:mi(M[t])?parseFloat(M[t]):B,Q=mi(M[e])?parseFloat(M[e]):0;return{time:R.toString(),value:Q,index:R,originalIndex:B}}).filter(M=>!isNaN(M.value)).sort((M,B)=>M.index-B.index);if(a.length===0)return{data:[],chartData:{labels:[],datasets:[]},samplingInfo:null,performanceMetrics:{processingTime:0,originalSize:0}};const l=Uj(a,1500),c=l.data,d=c.map(M=>M.value),f=d.reduce((M,B)=>M+B,0)/d.length,m=Math.max(3,Math.floor(c.length/20)),y=[];for(let M=0;M<c.length;M++){const B=Math.max(0,M-m+1),R=M+1,Q=R-B;let P=0;for(let G=B;G<R;G++)P+=c[G].value;y.push(P/Q)}const x=c.length,b=c.reduce((M,B,R)=>M+R,0),_=d.reduce((M,B)=>M+B,0),w=c.reduce((M,B,R)=>M+R*B.value,0),N=c.reduce((M,B,R)=>M+R*R,0),I=(x*w-b*_)/(x*N-b*b),k=(_-I*b)/x,D={labels:c.map(M=>M.time),datasets:[{label:"実際の値",data:d,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,pointRadius:2,pointHoverRadius:5,borderWidth:2,fill:!1,order:3},{label:`移動平均 (${m}期間)`,data:y,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.2,pointRadius:0,pointHoverRadius:3,borderWidth:3,fill:!1,order:2},{label:"トレンドライン",data:c.map((M,B)=>I*B+k),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:0,pointRadius:0,pointHoverRadius:0,borderWidth:2,borderDash:[5,5],fill:!1,order:1}]},L=performance.now();return{data:c.map((M,B)=>({time:M.time,value:M.value,movingAverage:y[B],trend:I*B+k,index:M.index})),chartData:D,samplingInfo:l.isReduced?{originalSize:l.originalSize,sampledSize:l.sampledSize,samplingRatio:l.samplingRatio,method:l.method}:null,performanceMetrics:{processingTime:L-i,originalSize:a.length,processedSize:c.length},statistics:{mean:f,trend:{slope:I,intercept:k,direction:I>0?"increasing":I<0?"decreasing":"stable"},movingAverageWindow:m,totalPoints:c.length}}}catch(s){throw console.error("Error generating time series data:",s),s}}async function Xj(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=[];for(const i of e){const a=t.data.length;let l=0,c=0;const d=new Map,f=new Set,m=[];for(const N of t.data){const I=N[i];if(I==null){l++;continue}const k=String(I).trim();if(k===""){c++;continue}f.add(k),d.set(k,(d.get(k)||0)+1),mi(I)&&m.push(parseFloat(k))}const y=Jj(t.data,i),x=(N,I)=>I===0?0:N/I*100,b=Array.from(d.entries()).sort((N,I)=>I[1]-N[1]).slice(0,10).map(([N,I])=>({value:N,count:I,percentage:x(I,a)})),_=Array.from(f).slice(0,10);let w;if(m.length>0&&a>0&&m.length>=a*.5){const N=[...m].sort((D,L)=>D-L),I=m.reduce((D,L)=>D+L,0)/m.length,k=m.reduce((D,L)=>D+Math.pow(L-I,2),0)/m.length;w={min:Math.min(...m),max:Math.max(...m),mean:I,median:N[Math.floor(N.length/2)],std:Math.sqrt(k)}}s.push({columnName:i,totalRows:a,uniqueValues:f.size,nullCount:l,nullPercentage:x(l,a),emptyStringCount:c,emptyStringPercentage:x(c,a),dataType:y,sampleValues:_||[],topValues:b||[],numericStats:w})}return s}catch(t){throw console.error("Error analyzing columns:",t),t}}function Jj(n,e){if(n.length===0)return"TEXT";const t=Math.min(n.length,100),s=n.slice(0,t);let i=0,a=0,l=0,c=0,d=0;for(const m of s){const y=m[e];if(y==null||y==="")continue;d++;const x=String(y).trim();x.toLowerCase()==="true"||x.toLowerCase()==="false"?c++:/^-?\d+$/.test(x)?i++:/^-?\d*\.\d+$/.test(x)?a++:/^\d{4}-\d{2}-\d{2}/.test(x)&&l++}if(d===0)return"TEXT";const f=d*.8;return i>=f?"INTEGER":a>=f?"FLOAT":i+a>=f?"NUMERIC":l>=f?"DATE":c>=f?"BOOLEAN":"TEXT"}function _f(n,e){return!!(n==null||e.includeEmpty&&(n===""||typeof n=="string"&&n.trim()==="")||e.includeZero&&(n===0||n==="0"))}function Zj(n,e){return!_f(n,e)}async function eM(n,e,t={}){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const{includeZero:i=!0,includeEmpty:a=!0}=t,l=[],c={};for(const x of e){const b=[];let _=0,w=0,N=0,I=0;for(let D=0;D<s.data.length;D++){const L=s.data[D][x];if(_f(L,{includeZero:i,includeEmpty:a})){if(_===0){let B=null;for(let P=D-1;P>=0;P--){const G=s.data[P][x];if(Zj(G,{includeZero:i,includeEmpty:a})){B=G;break}}const Q={rowIndex:D,columnName:x,eventType:"missing_start",value:L,previousValue:B,confidence:1};b.push(Q),N++}_++}else if(_>0){const R={rowIndex:D,columnName:x,eventType:"missing_end",value:L,missingLength:_,confidence:1};b.push(R),I+=_,w=Math.max(w,_),_=0}}_>0&&(I+=_,w=Math.max(w,_));const k=s.data.filter(D=>_f(D[x],{includeZero:i,includeEmpty:a})).length;c[x]={totalMissingEvents:N,averageMissingLength:N>0?I/(N/2):0,maxMissingLength:w,missingPercentage:k/s.data.length*100},l.push(...b)}l.sort((x,b)=>x.rowIndex-b.rowIndex);const d=l.filter(x=>x.eventType==="missing_start").length,f=l.filter(x=>x.eventType==="missing_end").length,m=Math.max(...Object.values(c).map(x=>x.maxMissingLength),0),y=Object.keys(c).filter(x=>c[x].totalMissingEvents>0);return{events:l,summary:{totalEvents:l.length,missingStartEvents:d,missingEndEvents:f,longestMissingStreak:m,affectedColumns:y},columnStats:c}}catch(s){throw console.error("Error detecting missing data:",s),s}}function tM(n,e){const t=Me.getTableSchema(e);if(!t)return null;const s=[],i=["rgb(239, 68, 68)","rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(249, 115, 22)","rgb(168, 85, 247)"];return Object.keys(n.columnStats).forEach((a,l)=>{const c=n.events.filter(d=>d.columnName===a);s.push({label:`${a} - 欠損開始`,data:c.filter(d=>d.eventType==="missing_start").map(d=>({x:d.rowIndex,y:l+1})),borderColor:i[l%i.length],backgroundColor:i[l%i.length],type:"scatter",pointRadius:6,pointHoverRadius:8,showLine:!1}),s.push({label:`${a} - 欠損終了`,data:c.filter(d=>d.eventType==="missing_end").map(d=>({x:d.rowIndex,y:l+1})),borderColor:i[l%i.length],backgroundColor:i[l%i.length],type:"scatter",pointRadius:4,pointHoverRadius:6,pointStyle:"triangle",showLine:!1})}),{labels:Array.from({length:t.data.length},(a,l)=>l),datasets:s}}var qh,Ex;function nM(){if(Ex)return qh;Ex=1;function n(){var e={"[一二三四五六七八九十百千万億兆]":"M","[一-龠々〆ヵヶ]":"H","[ぁ-ん]":"I","[ァ-ヴーｱ-ﾝﾞｰ]":"K","[a-zA-Zａ-ｚＡ-Ｚ]":"A","[0-9０-９]":"N"};this.chartype_=[];for(var t in e){var s=new RegExp;s.compile(t),this.chartype_.push([s,e[t]])}return this.BIAS__=-332,this.BC1__={HH:6,II:2461,KH:406,OH:-1378},this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920},this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266},this.BP1__={BB:295,OB:304,OO:-125,UB:352},this.BP2__={BO:60,OO:-1762},this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965},this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146},this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699},this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973},this.BW1__={",と":660,",同":727,B1あ:1404,B1同:542,"、と":660,"、同":727,"」と":1682,あっ:1505,いう:1743,いっ:-2055,いる:672,うし:-4817,うん:665,から:3472,がら:600,こう:-790,こと:2083,こん:-1262,さら:-4143,さん:4573,した:2641,して:1104,すで:-3399,そこ:1977,それ:-871,たち:1122,ため:601,った:3463,つい:-802,てい:805,てき:1249,でき:1127,です:3445,では:844,とい:-4915,とみ:1922,どこ:3887,ない:5713,なっ:3015,など:7379,なん:-1113,にし:2468,には:1498,にも:1671,に対:-912,の一:-501,の中:741,ませ:2448,まで:1711,まま:2600,まる:-2155,やむ:-1947,よっ:-2565,れた:2369,れで:-913,をし:1860,を見:731,亡く:-1886,京都:2558,取り:-2784,大き:-2604,大阪:1497,平方:-2314,引き:-1336,日本:-195,本当:-2423,毎日:-2113,目指:-724,Ｂ１あ:1404,Ｂ１同:542,"｣と":1682},this.BW2__={"..":-11822,11:-669,"――":-5730,"−−":-13175,いう:-1609,うか:2490,かし:-1350,かも:-602,から:-7194,かれ:4612,がい:853,がら:-3198,きた:1941,くな:-1597,こと:-8392,この:-4193,させ:4533,され:13168,さん:-3977,しい:-1819,しか:-545,した:5078,して:972,しな:939,その:-3744,たい:-1253,たた:-662,ただ:-3857,たち:-786,たと:1224,たは:-939,った:4589,って:1647,っと:-2094,てい:6144,てき:3640,てく:2551,ては:-3110,ても:-3065,でい:2666,でき:-1528,でし:-3828,です:-4761,でも:-4203,とい:1890,とこ:-1746,とと:-2279,との:720,とみ:5168,とも:-3941,ない:-2488,なが:-1313,など:-6509,なの:2614,なん:3099,にお:-1615,にし:2748,にな:2454,によ:-7236,に対:-14943,に従:-4688,に関:-11388,のか:2093,ので:-7059,のに:-6041,のの:-6125,はい:1073,はが:-1033,はず:-2532,ばれ:1813,まし:-1316,まで:-6621,まれ:5409,めて:-3153,もい:2230,もの:-10713,らか:-944,らし:-1611,らに:-1897,りし:651,りま:1620,れた:4270,れて:849,れば:4114,ろう:6067,われ:7901,を通:-11877,んだ:728,んな:-4115,一人:602,一方:-1375,一日:970,一部:-1051,上が:-4479,会社:-1116,出て:2163,分の:-7758,同党:970,同日:-913,大阪:-2471,委員:-1250,少な:-1050,年度:-8669,年間:-1626,府県:-2363,手権:-1982,新聞:-4066,日新:-722,日本:-7068,日米:3372,曜日:-601,朝鮮:-2355,本人:-2697,東京:-1543,然と:-1384,社会:-1276,立て:-990,第に:-1612,米国:-4268,"１１":-669},this.BW3__={あた:-2194,あり:719,ある:3846,"い.":-1185,"い。":-1185,いい:5308,いえ:2079,いく:3029,いた:2056,いっ:1883,いる:5600,いわ:1527,うち:1117,うと:4798,えと:1454,"か.":2857,"か。":2857,かけ:-743,かっ:-4098,かに:-669,から:6520,かり:-2670,"が,":1816,"が、":1816,がき:-4855,がけ:-1127,がっ:-913,がら:-4977,がり:-2064,きた:1645,けど:1374,こと:7397,この:1542,ころ:-2757,さい:-714,さを:976,"し,":1557,"し、":1557,しい:-3714,した:3562,して:1449,しな:2608,しま:1200,"す.":-1310,"す。":-1310,する:6521,"ず,":3426,"ず、":3426,ずに:841,そう:428,"た.":8875,"た。":8875,たい:-594,たの:812,たり:-1183,たる:-853,"だ.":4098,"だ。":4098,だっ:1004,った:-4748,って:300,てい:6240,てお:855,ても:302,です:1437,でに:-1482,では:2295,とう:-1387,とし:2266,との:541,とも:-3543,どう:4664,ない:1796,なく:-903,など:2135,"に,":-1021,"に、":-1021,にし:1771,にな:1906,には:2644,"の,":-724,"の、":-724,の子:-1e3,"は,":1337,"は、":1337,べき:2181,まし:1113,ます:6943,まっ:-1549,まで:6154,まれ:-793,らし:1479,られ:6820,るる:3818,"れ,":854,"れ、":854,れた:1850,れて:1375,れば:-3246,れる:1091,われ:-605,んだ:606,んで:798,カ月:990,会議:860,入り:1232,大会:2217,始め:1681,市:965,新聞:-5055,"日,":974,"日、":974,社会:2024,ｶ月:990},this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832},this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649},this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393},this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841},this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68},this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591},this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685},this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156},this.TW1__={につい:-4681,東京都:2026},this.TW2__={ある程:-2049,いった:-1256,ころが:-2434,しょう:3873,その後:-4430,だって:-1049,ていた:1833,として:-4657,ともに:-4517,もので:1882,一気に:-792,初めて:-1512,同時に:-8097,大きな:-1255,対して:-2721,社会党:-3216},this.TW3__={いただ:-1734,してい:1314,として:-4314,につい:-5483,にとっ:-5989,に当た:-6247,"ので,":-727,"ので、":-727,のもの:-600,れから:-3752,十二月:-2287},this.TW4__={"いう.":8576,"いう。":8576,からな:-2348,してい:2958,"たが,":1516,"たが、":1516,ている:1538,という:1349,ました:5543,ません:1097,ようと:-4258,よると:5865},this.UC1__={A:484,K:93,M:645,O:-505},this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646},this.UC3__={A:-1370,I:2311},this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646},this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831},this.UC6__={H:-506,I:-253,K:87,M:247,O:-387},this.UP1__={O:-214},this.UP2__={B:69,O:935},this.UP3__={B:189},this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422},this.UQ2__={BH:216,BI:113,OK:1759},this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212},this.UW1__={",":156,"、":156,"「":-463,あ:-941,う:-127,が:-553,き:121,こ:505,で:-201,と:-547,ど:-123,に:-789,の:-185,は:-847,も:-466,や:-470,よ:182,ら:-292,り:208,れ:169,を:-446,ん:-137,"・":-135,主:-402,京:-268,区:-912,午:871,国:-460,大:561,委:729,市:-411,日:-141,理:361,生:-408,県:-386,都:-718,"｢":-463,"･":-135},this.UW2__={",":-829,"、":-829,"〇":892,"「":-645,"」":3145,あ:-538,い:505,う:134,お:-502,か:1454,が:-856,く:-412,こ:1141,さ:878,ざ:540,し:1529,す:-675,せ:300,そ:-1011,た:188,だ:1837,つ:-949,て:-291,で:-268,と:-981,ど:1273,な:1063,に:-1764,の:130,は:-409,ひ:-1273,べ:1261,ま:600,も:-1263,や:-402,よ:1639,り:-579,る:-694,れ:571,を:-2516,ん:2095,ア:-587,カ:306,キ:568,ッ:831,三:-758,不:-2150,世:-302,中:-968,主:-861,事:492,人:-123,会:978,保:362,入:548,初:-3025,副:-1566,北:-3414,区:-422,大:-1769,天:-865,太:-483,子:-1519,学:760,実:1023,小:-2009,市:-813,年:-1060,強:1067,手:-1519,揺:-1033,政:1522,文:-1355,新:-1682,日:-1815,明:-1462,最:-630,朝:-1843,本:-1650,東:-931,果:-665,次:-2378,民:-180,気:-1740,理:752,発:529,目:-1584,相:-242,県:-1165,立:-763,第:810,米:509,自:-1353,行:838,西:-744,見:-3874,調:1010,議:1198,込:3041,開:1758,間:-1257,"｢":-645,"｣":3145,ｯ:831,ｱ:-587,ｶ:306,ｷ:568},this.UW3__={",":4889,1:-800,"−":-1723,"、":4889,々:-2311,"〇":5827,"」":2670,"〓":-3573,あ:-2696,い:1006,う:2342,え:1983,お:-4864,か:-1163,が:3271,く:1004,け:388,げ:401,こ:-3552,ご:-3116,さ:-1058,し:-395,す:584,せ:3685,そ:-5228,た:842,ち:-521,っ:-1444,つ:-1081,て:6167,で:2318,と:1691,ど:-899,な:-2788,に:2745,の:4056,は:4555,ひ:-2171,ふ:-1798,へ:1199,ほ:-5516,ま:-4384,み:-120,め:1205,も:2323,や:-788,よ:-202,ら:727,り:649,る:5905,れ:2773,わ:-1207,を:6620,ん:-518,ア:551,グ:1319,ス:874,ッ:-1350,ト:521,ム:1109,ル:1591,ロ:2201,ン:278,"・":-3794,一:-1619,下:-1759,世:-2087,両:3815,中:653,主:-758,予:-1193,二:974,人:2742,今:792,他:1889,以:-1368,低:811,何:4265,作:-361,保:-2439,元:4858,党:3593,全:1574,公:-3030,六:755,共:-1880,円:5807,再:3095,分:457,初:2475,別:1129,前:2286,副:4437,力:365,動:-949,務:-1872,化:1327,北:-1038,区:4646,千:-2309,午:-783,協:-1006,口:483,右:1233,各:3588,合:-241,同:3906,和:-837,員:4513,国:642,型:1389,場:1219,外:-241,妻:2016,学:-1356,安:-423,実:-1008,家:1078,小:-513,少:-3102,州:1155,市:3197,平:-1804,年:2416,広:-1030,府:1605,度:1452,建:-2352,当:-3885,得:1905,思:-1291,性:1822,戸:-488,指:-3973,政:-2013,教:-1479,数:3222,文:-1489,新:1764,日:2099,旧:5792,昨:-661,時:-1248,曜:-951,最:-937,月:4125,期:360,李:3094,村:364,東:-805,核:5156,森:2438,業:484,氏:2613,民:-1694,決:-1073,法:1868,海:-495,無:979,物:461,特:-3850,生:-273,用:914,町:1215,的:7313,直:-1835,省:792,県:6293,知:-1528,私:4231,税:401,立:-960,第:1201,米:7767,系:3066,約:3663,級:1384,統:-4229,総:1163,線:1255,者:6457,能:725,自:-2869,英:785,見:1044,調:-562,財:-733,費:1777,車:1835,軍:1375,込:-1504,通:-1136,選:-681,郎:1026,郡:4404,部:1200,金:2163,長:421,開:-1432,間:1302,関:-1282,雨:2009,電:-1045,非:2066,駅:1620,"１":-800,"｣":2670,"･":-3794,ｯ:-1350,ｱ:551,ｸﾞ:1319,ｽ:874,ﾄ:521,ﾑ:1109,ﾙ:1591,ﾛ:2201,ﾝ:278},this.UW4__={",":3930,".":3508,"―":-4841,"、":3930,"。":3508,"〇":4999,"「":1895,"」":3798,"〓":-5156,あ:4752,い:-3435,う:-640,え:-2514,お:2405,か:530,が:6006,き:-4482,ぎ:-3821,く:-3788,け:-4376,げ:-4734,こ:2255,ご:1979,さ:2864,し:-843,じ:-2506,す:-731,ず:1251,せ:181,そ:4091,た:5034,だ:5408,ち:-3654,っ:-5882,つ:-1659,て:3994,で:7410,と:4547,な:5433,に:6499,ぬ:1853,ね:1413,の:7396,は:8578,ば:1940,ひ:4249,び:-4134,ふ:1345,へ:6665,べ:-744,ほ:1464,ま:1051,み:-2082,む:-882,め:-5046,も:4169,ゃ:-2666,や:2795,ょ:-1544,よ:3351,ら:-2922,り:-9726,る:-14896,れ:-2613,ろ:-4570,わ:-1783,を:13150,ん:-2352,カ:2145,コ:1789,セ:1287,ッ:-724,ト:-403,メ:-1635,ラ:-881,リ:-541,ル:-856,ン:-3637,"・":-4371,ー:-11870,一:-2069,中:2210,予:782,事:-190,井:-1768,人:1036,以:544,会:950,体:-1286,作:530,側:4292,先:601,党:-2006,共:-1212,内:584,円:788,初:1347,前:1623,副:3879,力:-302,動:-740,務:-2715,化:776,区:4517,協:1013,参:1555,合:-1834,和:-681,員:-910,器:-851,回:1500,国:-619,園:-1200,地:866,場:-1410,塁:-2094,士:-1413,多:1067,大:571,子:-4802,学:-1397,定:-1057,寺:-809,小:1910,屋:-1328,山:-1500,島:-2056,川:-2667,市:2771,年:374,庁:-4556,後:456,性:553,感:916,所:-1566,支:856,改:787,政:2182,教:704,文:522,方:-856,日:1798,時:1829,最:845,月:-9066,木:-485,来:-442,校:-360,業:-1043,氏:5388,民:-2716,気:-910,沢:-939,済:-543,物:-735,率:672,球:-1267,生:-1286,産:-1101,田:-2900,町:1826,的:2586,目:922,省:-3485,県:2997,空:-867,立:-2112,第:788,米:2937,系:786,約:2171,経:1146,統:-1169,総:940,線:-994,署:749,者:2145,能:-730,般:-852,行:-792,規:792,警:-1184,議:-244,谷:-1e3,賞:730,車:-1481,軍:1158,輪:-1433,込:-3370,近:929,道:-1291,選:2596,郎:-4866,都:1192,野:-1100,銀:-2213,長:357,間:-2344,院:-2297,際:-2604,電:-878,領:-1659,題:-792,館:-1984,首:1749,高:2120,"｢":1895,"｣":3798,"･":-4371,ｯ:-724,ｰ:-11870,ｶ:2145,ｺ:1789,ｾ:1287,ﾄ:-403,ﾒ:-1635,ﾗ:-881,ﾘ:-541,ﾙ:-856,ﾝ:-3637},this.UW5__={",":465,".":-299,1:-514,E2:-32768,"]":-2762,"、":465,"。":-299,"「":363,あ:1655,い:331,う:-503,え:1199,お:527,か:647,が:-421,き:1624,ぎ:1971,く:312,げ:-983,さ:-1537,し:-1371,す:-852,だ:-1186,ち:1093,っ:52,つ:921,て:-18,で:-850,と:-127,ど:1682,な:-787,に:-1224,の:-635,は:-578,べ:1001,み:502,め:865,ゃ:3350,ょ:854,り:-208,る:429,れ:504,わ:419,を:-1264,ん:327,イ:241,ル:451,ン:-343,中:-871,京:722,会:-1153,党:-654,務:3519,区:-901,告:848,員:2104,大:-1296,学:-548,定:1785,嵐:-1304,市:-2991,席:921,年:1763,思:872,所:-814,挙:1618,新:-1682,日:218,月:-4353,査:932,格:1356,機:-1508,氏:-1347,田:240,町:-3912,的:-3149,相:1319,省:-1052,県:-4003,研:-997,社:-278,空:-813,統:1955,者:-2233,表:663,語:-1073,議:1219,選:-1018,郎:-368,長:786,間:1191,題:2368,館:-689,"１":-514,Ｅ２:-32768,"｢":363,ｲ:241,ﾙ:451,ﾝ:-343},this.UW6__={",":227,".":808,1:-270,E1:306,"、":227,"。":808,あ:-307,う:189,か:241,が:-73,く:-121,こ:-200,じ:1782,す:383,た:-428,っ:573,て:-1014,で:101,と:-105,な:-253,に:-149,の:-417,は:-236,も:-206,り:187,る:-135,を:195,ル:-673,ン:-496,一:-277,中:201,件:-800,会:624,前:302,区:1792,員:-1212,委:798,学:-960,市:887,広:-695,後:535,業:-697,相:753,社:-507,福:974,空:-822,者:1811,連:463,郎:1082,"１":-270,Ｅ１:306,ﾙ:-673,ﾝ:-496},this}return n.prototype.ctype_=function(e){for(var t in this.chartype_)if(e.match(this.chartype_[t][0]))return this.chartype_[t][1];return"O"},n.prototype.ts_=function(e){return e||0},n.prototype.segment=function(e){if(e==null||e==null||e=="")return[];var t=[],s=["B3","B2","B1"],i=["O","O","O"],a=e.split("");for(m=0;m<a.length;++m)s.push(a[m]),i.push(this.ctype_(a[m]));s.push("E1"),s.push("E2"),s.push("E3"),i.push("O"),i.push("O"),i.push("O");for(var l=s[3],c="U",d="U",f="U",m=4;m<s.length-3;++m){var y=this.BIAS__,x=s[m-3],b=s[m-2],_=s[m-1],w=s[m],N=s[m+1],I=s[m+2],k=i[m-3],D=i[m-2],L=i[m-1],M=i[m],B=i[m+1],R=i[m+2];y+=this.ts_(this.UP1__[c]),y+=this.ts_(this.UP2__[d]),y+=this.ts_(this.UP3__[f]),y+=this.ts_(this.BP1__[c+d]),y+=this.ts_(this.BP2__[d+f]),y+=this.ts_(this.UW1__[x]),y+=this.ts_(this.UW2__[b]),y+=this.ts_(this.UW3__[_]),y+=this.ts_(this.UW4__[w]),y+=this.ts_(this.UW5__[N]),y+=this.ts_(this.UW6__[I]),y+=this.ts_(this.BW1__[b+_]),y+=this.ts_(this.BW2__[_+w]),y+=this.ts_(this.BW3__[w+N]),y+=this.ts_(this.TW1__[x+b+_]),y+=this.ts_(this.TW2__[b+_+w]),y+=this.ts_(this.TW3__[_+w+N]),y+=this.ts_(this.TW4__[w+N+I]),y+=this.ts_(this.UC1__[k]),y+=this.ts_(this.UC2__[D]),y+=this.ts_(this.UC3__[L]),y+=this.ts_(this.UC4__[M]),y+=this.ts_(this.UC5__[B]),y+=this.ts_(this.UC6__[R]),y+=this.ts_(this.BC1__[D+L]),y+=this.ts_(this.BC2__[L+M]),y+=this.ts_(this.BC3__[M+B]),y+=this.ts_(this.TC1__[k+D+L]),y+=this.ts_(this.TC2__[D+L+M]),y+=this.ts_(this.TC3__[L+M+B]),y+=this.ts_(this.TC4__[M+B+R]),y+=this.ts_(this.UQ1__[c+k]),y+=this.ts_(this.UQ2__[d+D]),y+=this.ts_(this.UQ3__[f+L]),y+=this.ts_(this.BQ1__[d+D+L]),y+=this.ts_(this.BQ2__[d+L+M]),y+=this.ts_(this.BQ3__[f+D+L]),y+=this.ts_(this.BQ4__[f+L+M]),y+=this.ts_(this.TQ1__[d+k+D+L]),y+=this.ts_(this.TQ2__[d+D+L+M]),y+=this.ts_(this.TQ3__[f+k+D+L]),y+=this.ts_(this.TQ4__[f+D+L+M]);var Q="O";y>0&&(t.push(l),l="",Q="B"),c=d,d=f,f=Q,l+=s[m]}return t.push(l),t},qh=n,qh}var sM=nM();const iM=lu(sM);function mp(n){const e=n.charCodeAt(0);return e>=12352&&e<=12447?"hiragana":e>=12448&&e<=12543?"katakana":e>=19968&&e<=40879?"kanji":e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57?"alphanumeric":n.match(/[.,!?;:'"()[\]{}\-_/\\@#$%^&*+=<>|~`]/)?"punctuation":n.match(/\s/)?"whitespace":"other"}function L1(n){return!n||typeof n!="string"?[]:n.split(/[.!?。！？]+/).map(t=>t.trim()).filter(t=>t.length>0)}function rM(n){return!n||typeof n!="string"?[]:n.split(/\n\s*\n|\r\n\s*\r\n/).map(e=>e.trim()).filter(e=>e.length>0)}const oM=new iM;function aM(n){if(!n||typeof n!="string")return{language:"unknown",confidence:0};const e=n.replace(/\s+/g,"").toLowerCase();let t=0,s=0,i=0;for(const c of e){const d=mp(c);i++,d==="hiragana"||d==="katakana"||d==="kanji"?t++:d==="alphanumeric"&&s++}if(i===0)return{language:"unknown",confidence:0};const a=t/i,l=s/i;return a>.3?{language:"japanese",confidence:Math.min(a*2,1)}:l>.7?{language:"english",confidence:l}:a>.1&&l>.3?{language:"mixed",confidence:.8}:{language:"other",confidence:.5}}function gp(n){if(!n||typeof n!="string")return[];const e=aM(n);if(e.language==="japanese"||e.language==="mixed")try{return oM.segment(n).filter(s=>s.trim().length>0&&!/^[\s\p{P}\p{S}]+$/u.test(s))}catch(t){return console.warn("TinySegmenter failed, falling back to simple tokenization:",t),n.replace(/[.,!?;:'"()[\]{}\-_/\\@#$%^&*+=<>|~`。、！？；：「」『』（）【】]/g," ").split(/\s+/).filter(s=>s.length>0)}else return n.replace(/[.,!?;:'"()[\]{}\-_/\\@#$%^&*+=<>|~`。、！？；：「」『』（）【】]/g," ").split(/\s+/).filter(s=>s.length>0)}function lM(n){if(!n||typeof n!="string")return{language:"unknown",confidence:0};const e=n.replace(/\s+/g,"").toLowerCase();let t=0,s=0,i=0;for(const c of e){const d=mp(c);i++,d==="hiragana"||d==="katakana"||d==="kanji"?t++:d==="alphanumeric"&&s++}if(i===0)return{language:"unknown",confidence:0};const a=t/i,l=s/i;return a>.3?{language:"japanese",confidence:Math.min(a*2,1)}:l>.7?{language:"english",confidence:l}:a>.1&&l>.3?{language:"mixed",confidence:.8}:{language:"other",confidence:.5}}function cM(n,e){const t=Math.min(n/20,1)*40,s=Math.min((e-3)/5,1)*40,i=100-t-s;return Math.max(0,Math.min(100,i))}async function B1(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=t.data.map(R=>R[e]).filter(R=>R!=null).map(R=>String(R)),i=s.length;if(i===0)throw new Error(`No valid text data found in column ${e}`);const a=s.map(R=>R.length),l=s.map(R=>gp(R).length),c=s.map(R=>L1(R).length),d=s.map(R=>rM(R).length),f=a.reduce((R,Q)=>R+Q,0),m=l.reduce((R,Q)=>R+Q,0),y=c.reduce((R,Q)=>R+Q,0),x=d.reduce((R,Q)=>R+Q,0),b=[...a].sort((R,Q)=>R-Q),_=[...l].sort((R,Q)=>R-Q),w=b[Math.floor(b.length/2)],N=_[Math.floor(_.length/2)],I=y>0?m/y:0,k=m>0?f/m:0,D=cM(I,k),L=s.filter(R=>R.trim().length===0).length,B=new Set(s).size;return{columnName:e,totalRecords:i,totalCharacters:f,totalWords:m,totalSentences:y,totalParagraphs:x,averageCharactersPerRecord:f/i,averageWordsPerRecord:m/i,averageSentencesPerRecord:y/i,averageWordsPerSentence:I,medianCharactersPerRecord:w,medianWordsPerRecord:N,minCharacters:Math.min(...a),maxCharacters:Math.max(...a),minWords:Math.min(...l),maxWords:Math.max(...l),emptyRecords:L,emptyPercentage:L/i*100,uniqueRecords:B,uniquePercentage:B/i*100,readabilityScore:D}}catch(t){throw console.error("Error calculating text statistics:",t),t}}async function uM(n,e,t=20){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const i=s.data.map(d=>d[e]).filter(d=>d!=null).map(d=>String(d)),a=[];for(const d of i){const f=gp(d.toLowerCase());a.push(...f)}const l=new Map;for(const d of a)d.length>=2&&l.set(d,(l.get(d)||0)+1);const c=a.length;return Array.from(l.entries()).sort((d,f)=>f[1]-d[1]).slice(0,t).map(([d,f])=>({word:d,count:f,percentage:f/c*100}))}catch(s){throw console.error("Error calculating word frequency:",s),s}}async function dM(n,e,t=20){try{const s=Me.getTableSchema(n);if(!s)throw new Error(`Table ${n} not found`);const i=s.data.map(d=>d[e]).filter(d=>d!=null).map(d=>String(d)),a=[];for(const d of i)for(const f of d)f.match(/\s/)||a.push(f);const l=new Map;for(const d of a)l.set(d,(l.get(d)||0)+1);const c=a.length;return Array.from(l.entries()).sort((d,f)=>f[1]-d[1]).slice(0,t).map(([d,f])=>({character:d,count:f,percentage:f/c*100}))}catch(s){throw console.error("Error calculating character frequency:",s),s}}async function hM(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=t.data.map(k=>k[e]).filter(k=>k!=null).map(k=>String(k)),i=s.length,a=[],l=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,c=s.filter(k=>l.test(k));c.length>0&&a.push({pattern:"email",description:"メールアドレス",count:c.length,percentage:c.length/i*100,examples:c.slice(0,3)});const d=/https?:\/\/[^\s]+/g,f=s.filter(k=>d.test(k));f.length>0&&a.push({pattern:"url",description:"URL",count:f.length,percentage:f.length/i*100,examples:f.slice(0,3)});const m=/(\d{2,4}-\d{2,4}-\d{4}|\d{10,11})/g,y=s.filter(k=>m.test(k));y.length>0&&a.push({pattern:"phone",description:"電話番号",count:y.length,percentage:y.length/i*100,examples:y.slice(0,3)});const x=/^\d+$/,b=s.filter(k=>x.test(k.trim()));b.length>0&&a.push({pattern:"number_only",description:"数字のみ",count:b.length,percentage:b.length/i*100,examples:b.slice(0,3)});const _=/^[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FAF\s]+$/,w=s.filter(k=>_.test(k));w.length>0&&a.push({pattern:"japanese_only",description:"日本語のみ",count:w.length,percentage:w.length/i*100,examples:w.slice(0,3)});const N=/^[A-Za-z0-9\s]+$/,I=s.filter(k=>N.test(k));return I.length>0&&a.push({pattern:"alphanumeric_only",description:"英数字のみ",count:I.length,percentage:I.length/i*100,examples:I.slice(0,3)}),{columnName:e,patterns:a}}catch(t){throw console.error("Error analyzing text patterns:",t),t}}async function fM(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=t.data.map(x=>x[e]).filter(x=>x!=null).map(x=>String(x)),i=s.length,l=s.reduce((x,b)=>x+b.length,0)/i,c=new Map;for(const x of s){const b=lM(x),_=c.get(b.language)||{count:0,totalConfidence:0};c.set(b.language,{count:_.count+1,totalConfidence:_.totalConfidence+b.confidence})}const d=Array.from(c.entries()).map(([x,b])=>({language:x==="japanese"?"日本語":x==="english"?"英語":x==="mixed"?"混在":x==="other"?"その他":"不明",count:b.count,percentage:b.count/i*100,confidence:b.totalConfidence/b.count})).sort((x,b)=>b.count-x.count),f=new Map;for(const x of s)for(const b of x){const _=mp(b);f.set(_,(f.get(_)||0)+1)}const m=Array.from(f.values()).reduce((x,b)=>x+b,0),y=Array.from(f.entries()).map(([x,b])=>({pattern:x==="hiragana"?"ひらがな":x==="katakana"?"カタカナ":x==="kanji"?"漢字":x==="alphanumeric"?"英数字":x==="punctuation"?"記号・句読点":x==="whitespace"?"空白":"その他",count:b,percentage:b/m*100})).sort((x,b)=>b.count-x.count);return{columnName:e,totalRecords:i,averageLength:l,detectedLanguages:d,languagePatterns:y}}catch(t){throw console.error("Error analyzing language detection:",t),t}}async function pM(n,e){try{const t=Me.getTableSchema(n);if(!t)throw new Error(`Table ${n} not found`);const s=t.data.map(_=>_[e]).filter(_=>_!=null).map(_=>String(_)),i=[];for(const _ of s){const w=L1(_);i.push(...w)}const a=i.length;if(a===0)throw new Error(`No sentences found in column ${e}`);const l=i.map(_=>gp(_).length),c=l.reduce((_,w)=>_+w,0)/a,f=[{min:0,max:5,label:"1-5語"},{min:6,max:10,label:"6-10語"},{min:11,max:20,label:"11-20語"},{min:21,max:30,label:"21-30語"},{min:31,max:1/0,label:"31語以上"}].map(_=>{const w=l.filter(N=>N>=_.min&&N<=_.max).length;return{range:_.label,count:w,percentage:w/a*100}}),m=new Map,y=["。",".","！","!","？","?","、",",","：",":","；",";"];for(const _ of s)for(const w of y){const N=(_.match(new RegExp(w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length;m.set(w,(m.get(w)||0)+N)}const x=Array.from(m.values()).reduce((_,w)=>_+w,0),b=Array.from(m.entries()).filter(([,_])=>_>0).map(([_,w])=>({punctuation:_,count:w,percentage:w/x*100})).sort((_,w)=>w.count-_.count);return{columnName:e,totalSentences:a,averageSentenceLength:c,sentenceLengthDistribution:f,punctuationUsage:b}}catch(t){throw console.error("Error analyzing sentences:",t),t}}async function mM(n,e){try{const t=await B1(n,e),s=t.readabilityScore>=80?"非常に読みやすい":t.readabilityScore>=60?"読みやすい":t.readabilityScore>=40?"普通":t.readabilityScore>=20?"読みにくい":"非常に読みにくい",i=[];t.averageWordsPerSentence>20&&i.push("文をより短くすることを検討してください"),t.averageWordsPerSentence<5&&i.push("文をもう少し詳しく説明することを検討してください");const a=t.totalWords>0?t.totalCharacters/t.totalWords:0;return a>8&&i.push("より簡潔な語彙の使用を検討してください"),t.readabilityScore<40&&i.push("文章構造の簡素化を検討してください"),i.length===0&&i.push("文章の読みやすさは適切なレベルです"),{columnName:e,averageWordsPerSentence:t.averageWordsPerSentence,averageCharactersPerWord:a,readabilityScore:t.readabilityScore,complexityLevel:s,recommendations:i}}catch(t){throw console.error("Error analyzing readability:",t),t}}function F1(n,e="line"){const t=n>1e3,s=n>5e3,i={responsive:!0,maintainAspectRatio:!1,animation:!t,interaction:{intersect:!1,mode:t?"nearest":"index"},elements:{point:{radius:s?0:t?1:3,hoverRadius:s?2:t?3:5,hitRadius:t?10:15},line:{tension:t?0:.1,borderWidth:s?1:2}},plugins:{legend:{position:"top",labels:{usePointStyle:!0,pointStyle:"circle"}},tooltip:{enabled:!s,mode:"nearest",intersect:!1,animation:!1,...t&&{filter:function(a){return a.dataIndex%Math.ceil(n/100)===0}}},decimation:t?{enabled:!0,algorithm:"min-max",samples:Math.min(2e3,Math.max(500,n/10)),threshold:1e3}:void 0}};switch(e){case"line":return{...i,scales:{x:{type:"linear",ticks:{maxTicksLimit:t?10:20,autoSkip:!0,autoSkipPadding:10}},y:{ticks:{maxTicksLimit:10}}}};case"scatter":return{...i,scales:{x:{type:"linear",ticks:{maxTicksLimit:t?8:15}},y:{ticks:{maxTicksLimit:8}}}};case"bar":return{...i,scales:{x:{ticks:{maxTicksLimit:t?15:25,autoSkip:!0}},y:{beginAtZero:!0,ticks:{maxTicksLimit:8}}}};case"doughnut":return{...i,plugins:{...i.plugins,legend:{position:"right",labels:{usePointStyle:!0,pointStyle:"circle"}}}};default:return i}}function kx(n){const e=F1(n,"line");return{...e,plugins:{...e.plugins,title:{display:!0,text:"変化点検出結果",font:{size:16,weight:"bold"}},annotation:{annotations:{}}},elements:{...e.elements,point:{...e.elements.point,radius:3,hoverRadius:6}}}}function gM(n){const e=F1(n,"line");return{...e,plugins:{...e.plugins,title:{display:!0,text:"時系列分析結果",font:{size:16,weight:"bold"}},legend:{...e.plugins.legend,reverse:!1,labels:{...e.plugins.legend?.labels,sort:(t,s)=>(t.datasetIndex||0)-(s.datasetIndex||0)}},zoom:{pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"}}},scales:{...e.scales,x:{...e.scales?.x,type:"linear",title:{display:!0,text:"時間"},ticks:{maxTicksLimit:n>1e3?10:20,autoSkip:!0}},y:{...e.scales?.y,title:{display:!0,text:"値"}}}}}vu.register(vj,wj,YT,qT,ZT,aj,mj,rj,LT);function se(n){if(n==null||isNaN(n))return"N/A";const e=Math.abs(n);return e>=1e9?n.toExponential(2):e>0&&e<.001?n.toExponential(3):Number.isInteger(n)?e>=1e3?n.toLocaleString("ja-JP"):n.toString():e>=1e3?n.toLocaleString("ja-JP",{minimumFractionDigits:0,maximumFractionDigits:2}):e>=1?n.toFixed(4).replace(/\.?0+$/,""):e>=.01?n.toFixed(4).replace(/\.?0+$/,""):n.toFixed(6).replace(/\.?0+$/,"")}function yM({tableName:n,columns:e}){const[t,s]=ce.useState("column"),[i,a]=ce.useState([]),[l,c]=ce.useState("index"),[d,f]=ce.useState(null),[m,y]=ce.useState(!1),[x,b]=ce.useState("moving_average"),[_,w]=ce.useState({includeZero:!0,includeEmpty:!0}),{setError:N}=js();console.log("AnalysisPanel props:",{tableName:n,columns:e}),console.log("AnalysisPanel state:",{activeAnalysis:t,selectedColumns:i,analysisResults:d,isLoading:m});const I=ce.useCallback(()=>{const U=k();if(U.length>0){const Y=$.find(q=>q.key===t);if(Y){let q=[];if(Y.minColumns===1&&Y.maxColumns===1)q=[U[0].name];else if(Y.minColumns>=2){const V=Math.min(Y.maxColumns,U.length);q=U.slice(0,V).map(X=>X.name)}else{const V=Math.min(Y.maxColumns,U.length);q=U.slice(0,V).map(X=>X.name)}a(q)}}},[t,e]);if(ce.useEffect(()=>{f(null),a([]),I()},[t,I]),ce.useEffect(()=>{f(null),a([]),I()},[n,I]),ce.useEffect(()=>{i.length>0&&R()&&!m&&Q()},[i,n]),ce.useEffect(()=>{t==="changepoint"&&i.length>0&&R()&&!m&&Q()},[x]),ce.useEffect(()=>{(t==="timeseries"||t==="changepoint")&&i.length>0&&R()&&!m&&Q()},[l]),ce.useEffect(()=>{const U=Y=>{console.log("🔄 dataChanged event received:",Y.detail);const{tableName:q}=Y.detail;console.log("📊 Analysis Panel state:",{currentTableName:n,changedTable:q,hasAnalysisResults:!!d,selectedColumnsCount:i.length,isLoading:m}),q===n&&i.length>0&&!m?(console.log("✅ Conditions met, re-running analysis for table:",q),Q()):console.log("❌ Conditions not met for auto-refresh:",{tableMatch:q===n,hasSelectedColumns:i.length>0,notLoading:!m})};return console.log("🎧 Setting up dataChanged listener for table:",n),window.addEventListener("dataChanged",U),()=>{console.log("🔇 Removing dataChanged listener for table:",n),window.removeEventListener("dataChanged",U)}},[n,i,m]),!n)return h.jsx("div",{className:"text-center py-8 text-gray-500",children:"テーブル名が設定されていません"});if(!e||e.length===0)return h.jsx("div",{className:"text-center py-8 text-gray-500",children:"カラム情報が取得できません"});const k=()=>{switch(t){case"basic":case"correlation":case"changepoint":case"factor":case"histogram":case"timeseries":return e.filter(U=>U.type.includes("INT")||U.type.includes("FLOAT")||U.type.includes("DOUBLE")||U.type.includes("DECIMAL")||U.type.includes("NUMBER"));case"column":return e;case"text":return e.filter(U=>U.type==="TEXT");default:return e}},D=()=>{const U=e.filter(Y=>Y.type.includes("INT")||Y.type.includes("FLOAT")||Y.type.includes("DOUBLE")||Y.type.includes("DECIMAL")||Y.type.includes("NUMBER")||Y.type.includes("DATE")||Y.type.includes("TIME")||Y.type.includes("TIMESTAMP"));return[{name:"index",type:"INDEX",nullable:!1,label:"INDEX（行番号）"},...U.map(Y=>({...Y,label:Y.name}))]},L=k(),M=e.filter(U=>U.type.includes("DATE")||U.type.includes("TIMESTAMP")),B=()=>$.find(U=>U.key===t),R=()=>{const U=B();return U?i.length>=U.minColumns&&i.length<=U.maxColumns:!1},Q=async()=>{if(!n||i.length===0){console.log("Cannot run analysis: missing table or columns");return}if(!R()){const U=B();N(`${U?.label}には${U?.minColumns}〜${U?.maxColumns}個のカラムが必要です`);return}y(!0),f(null);try{console.log("Running analysis:",{activeAnalysis:t,tableName:n,selectedColumns:i});let U=null;const Y=!0;switch(t){case"basic":if(i.length>=1){const q=[];for(const V of i){const X=Y?await $j(n,V):await Cj(n,V);q.push({columnName:V,...X})}U=q}break;case"correlation":i.length>=2&&(U=Y?await Hj(n,i):await Oj(n,i),console.log("Correlation results:",U));break;case"changepoint":i.length>=1&&(U=Y?await Yj(n,i[0],{algorithm:x,xColumn:l}):await Dj(n,i[0]));break;case"factor":i.length>=2&&(U=Y?await Qj(n,i):await Rj(n,i));break;case"histogram":i.length===1&&(U=Y?await Kj(n,i[0]):await Aj(n,i[0]));break;case"timeseries":i.length===1&&(U=Y?await Gj(n,i[0],l):M.length>0?await Lj(n,i[0],M[0].name):null);break;case"column":i.length>=1&&(U=await Xj(n,i));break;case"missing":i.length>=1&&(U=await eM(n,i,_));break;case"text":if(i.length===1){const q=i[0],V=await B1(n,q),X=await uM(n,q,15),ne=await dM(n,q,15),O=await hM(n,q),K=await fM(n,q),Se=await pM(n,q),Ne=await mM(n,q);U={statistics:V,wordFrequency:X,characterFrequency:ne,patterns:O,language:K,sentences:Se,readability:Ne}}break}console.log("Analysis results:",U),f(U)}catch(U){N(U instanceof Error?U.message:"分析に失敗しました")}finally{y(!1)}},P=U=>{const Y=B();Y&&(Y.minColumns===1&&Y.maxColumns===1?a([U]):a(q=>q.includes(U)?q.filter(V=>V!==U):[...q,U]))},G=()=>{const U=B();if(!U)return;const Y=Math.min(U.maxColumns,L.length),V=L.map(O=>O.name).filter(O=>!i.includes(O)),X=Y-i.length,ne=V.slice(0,X);a([...i,...ne])},H=()=>{a([])},$=[{key:"column",label:"データ型推定・品質分析",icon:Fr,description:`【手法】正規表現パターンマッチング
【内容】データ型の自動判定（整数・小数・日付・真偽値）、NULL値の分析、ユニーク値の検出、データ品質の総合評価`,minColumns:1,maxColumns:10},{key:"basic",label:"記述統計量",icon:_0,description:`【手法】算術平均・母集団標準偏差・分位数計算
【内容】平均値、標準偏差、四分位数（Q1, Q2, Q3）、最小値・最大値による数値データの分布特性を要約`,minColumns:1,maxColumns:10},{key:"correlation",label:"ピアソン相関分析",icon:Dx,description:`【手法】ピアソンの積率相関係数
【内容】変数間の線形関係の強さを-1〜+1で測定。+1に近いほど正の相関、-1に近いほど負の相関が強い`,minColumns:2,maxColumns:10},{key:"changepoint",label:"変化点検出",icon:Gh,description:`【手法】Moving Average / CUSUM / EWMA / Binary Segmentation
【内容】選択可能な4つのアルゴリズムでデータの急激な変化点を統計的に検出。小さな変化から大きな構造変化まで対応`,minColumns:1,maxColumns:1},{key:"factor",label:"主成分分析（PCA）",icon:ii,description:`【手法】分散共分散行列の固有値分解
【内容】多次元データを少数の主成分に集約し、寄与率・累積寄与率を計算してデータの構造を解析`,minColumns:2,maxColumns:10},{key:"histogram",label:"ヒストグラム分析",icon:_0,description:`【手法】等幅ビン分割法
【内容】データの範囲を等間隔に分割し、各区間の頻度を計算することで、データの分布形状や偏りを可視化`,minColumns:1,maxColumns:1},{key:"timeseries",label:"時系列集約分析",icon:w0,description:`【手法】DATE_TRUNC集約関数
【内容】時間軸での集約（時間・日・週・月単位）により、時系列データのトレンドや周期性を分析`,minColumns:1,maxColumns:1},{key:"missing",label:"データ欠損検知",icon:ii,description:`【手法】連続欠損パターン検出・統計的信頼度評価
【内容】NULL値・空文字・0値の欠損開始/復旧タイミングを検出。欠損長・信頼度・カラム別統計を提供。データ品質監視に最適`,minColumns:1,maxColumns:10},{key:"text",label:"テキスト・言語分析",icon:rS,description:`【手法】TinySegmenter形態素解析 + Flesch改良読みやすさ指標
【内容】日本語の分かち書き、文字種分析、パターン検出（メール・URL・電話番号）、文章の読みやすさ評価`,minColumns:1,maxColumns:1}],W=$.find(U=>U.key===t),de=i.length>=(W?.minColumns||1)&&i.length<=(W?.maxColumns||10)&&L.length>0;return n?h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"分析・可視化"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>{f(null),a([]),s("column")},className:"px-3 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm",children:"リセット"}),h.jsx("button",{onClick:Q,disabled:!de||m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"分析中...":"手動実行"})]})]}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"分析手法を選択"}),h.jsx("div",{className:"max-h-64 overflow-y-auto",children:h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:$.map(U=>h.jsx("div",{onClick:()=>s(U.key),className:`p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${t===U.key?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm bg-white"}`,children:h.jsxs("div",{className:"flex flex-col items-center text-center space-y-1.5",children:[h.jsx(U.icon,{className:`h-5 w-5 sm:h-6 sm:w-6 ${t===U.key?"text-blue-600":"text-gray-600"}`}),h.jsx("h3",{className:`text-xs font-medium leading-tight min-h-[2.5rem] flex items-center justify-center ${t===U.key?"text-blue-900":"text-gray-900"}`,children:U.label})]})},U.key))})})]}),W&&h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx(W.icon,{className:"h-6 w-6 text-blue-600 mt-0.5 flex-shrink-0"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:W.label}),h.jsx("p",{className:"text-sm text-blue-800 whitespace-pre-line",children:W.description})]})]})}),h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("h3",{className:"font-medium text-gray-900",children:["列選択 (",W?.label,")"]}),m&&h.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"分析実行中..."})]})]}),h.jsxs("div",{className:"mb-4",children:[W&&h.jsx("p",{className:"text-sm text-gray-700 mb-2",children:W.minColumns===1&&W.maxColumns===1?"1つの列を選択してください（自動実行）":W.minColumns===W.maxColumns?`${W.minColumns}個の列を選択してください（自動実行）`:`${W.minColumns}-${W.maxColumns}個の列を選択してください（自動実行）`}),L.length===0&&h.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-amber-600 mr-2",children:"⚠️"}),h.jsx("span",{className:"text-amber-800 text-sm font-medium",children:"この分析に適した列がありません"})]})})]}),W&&W.maxColumns>1&&L.length>0&&h.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[h.jsxs("button",{onClick:G,disabled:i.length>=Math.min(W.maxColumns,L.length),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 disabled:opacity-50 disabled:cursor-not-allowed",children:["全て選択",W.maxColumns<L.length&&` (最大${W.maxColumns}個)`]}),h.jsx("button",{onClick:H,disabled:i.length===0,className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"選択解除"}),h.jsxs("span",{className:"text-xs text-gray-500",children:["(",i.length,"/",W.maxColumns,")"]})]}),L.length>0?h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:L.map(U=>{const Y=W?.minColumns===1&&W?.maxColumns===1,q=i.includes(U.name),X=!Y&&W&&i.length>=W.maxColumns&&!q;return h.jsxs("label",{className:`flex items-center space-x-2 ${X?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[h.jsx("input",{type:Y?"radio":"checkbox",name:Y?"single-column-selection":void 0,checked:q,disabled:X,onChange:()=>P(U.name),className:"h-4 w-4 text-blue-600 border-gray-300 rounded disabled:opacity-50"}),h.jsx("span",{className:`text-sm ${X?"text-gray-400":"text-gray-700"}`,children:U.name})]},U.name)})}):h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx("p",{className:"text-sm",children:"この分析タイプに適したカラムがありません"}),h.jsxs("p",{className:"text-xs mt-2",children:[t==="basic"&&"数値型のカラムが必要です",t==="text"&&"TEXT型のカラムが必要です",(t==="correlation"||t==="factor")&&"数値型のカラムが2つ以上必要です"]})]}),i.length>0&&h.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded",children:[h.jsxs("span",{className:"text-sm text-gray-600",children:["選択中: ",i.join(", ")]}),W&&i.length>=W.maxColumns&&W.maxColumns>1&&h.jsxs("span",{className:"block text-xs text-amber-600 mt-1",children:["最大選択数（",W.maxColumns,"個）に達しました"]})]})]}),t==="changepoint"&&L.length>0&&h.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[h.jsxs("h4",{className:"text-sm font-medium text-yellow-900 mb-3 flex items-center",children:[h.jsx(Gh,{className:"h-4 w-4 mr-2"}),"変化点検出アルゴリズムを選択"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"changepoint-algorithm",value:"moving_average",checked:x==="moving_average",onChange:U=>b(U.target.value),className:"mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:"移動平均法"}),h.jsx("div",{className:"text-xs text-gray-600",children:"短期・長期移動平均の差分で検出。安定した結果。"})]})]}),h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"changepoint-algorithm",value:"cusum",checked:x==="cusum",onChange:U=>b(U.target.value),className:"mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:"CUSUM"}),h.jsx("div",{className:"text-xs text-gray-600",children:"累積和による検出。小さな変化にも敏感。"})]})]}),h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"changepoint-algorithm",value:"ewma",checked:x==="ewma",onChange:U=>b(U.target.value),className:"mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:"EWMA"}),h.jsx("div",{className:"text-xs text-gray-600",children:"指数重み付き移動平均。最近のデータを重視。"})]})]}),h.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"changepoint-algorithm",value:"binary_segmentation",checked:x==="binary_segmentation",onChange:U=>b(U.target.value),className:"mt-1"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Binary Segmentation"}),h.jsx("div",{className:"text-xs text-gray-600",children:"再帰的分割法。複数の構造変化に適用。"})]})]})]})]}),t==="missing"&&h.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[h.jsxs("h4",{className:"text-sm font-medium text-orange-900 mb-3 flex items-center",children:[h.jsx(ii,{className:"h-4 w-4 mr-2"}),"欠損検知オプション"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:_.includeEmpty,onChange:U=>w(Y=>({...Y,includeEmpty:U.target.checked})),className:"rounded border-orange-300 text-orange-600 focus:ring-orange-500"}),h.jsx("span",{className:"text-sm text-gray-700",children:"空文字を欠損として扱う"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:_.includeZero,onChange:U=>w(Y=>({...Y,includeZero:U.target.checked})),className:"rounded border-orange-300 text-orange-600 focus:ring-orange-500"}),h.jsx("span",{className:"text-sm text-gray-700",children:"0値を欠損として扱う"})]})]})]}),(t==="timeseries"||t==="changepoint")&&L.length>0&&h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[h.jsxs("h4",{className:"text-sm font-medium text-blue-900 mb-3 flex items-center",children:[h.jsx(w0,{className:"h-4 w-4 mr-2"}),"横軸（X軸）カラムを選択"]}),h.jsx("div",{className:"mb-2",children:h.jsx("select",{value:l,onChange:U=>c(U.target.value),className:"w-full px-3 py-2 text-sm border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:D().map(U=>h.jsxs("option",{value:U.name,children:[U.label||U.name," (",U.type,")"]},U.name))})}),h.jsx("p",{className:"text-xs text-blue-700",children:"横軸に使用するカラムを選択してください。INDEXは行番号を表します。"})]}),d&&h.jsxs("div",{className:"bg-white border rounded-lg p-4 md:p-6",children:[h.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"分析結果"}),h.jsx("div",{className:"overflow-hidden",children:h.jsx(xM,{type:t,results:d})})]})]}):h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(ii,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{children:"分析を開始するためにテーブルを選択してください"})]})}function au({performanceInfo:n,samplingInfo:e}){return!n&&!e?null:h.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx(ii,{className:"h-4 w-4 text-blue-600"}),h.jsx("span",{className:"text-sm font-medium text-blue-900",children:"パフォーマンス情報"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[n&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-blue-600 font-medium",children:"処理時間"}),h.jsxs("div",{className:"text-blue-900",children:[n.processingTime,"ms"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-blue-600 font-medium",children:"データサイズ"}),h.jsxs("div",{className:"text-blue-900",children:[n.originalSize.toLocaleString()," → ",n.processedSize.toLocaleString()]})]})]}),e&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-blue-600 font-medium",children:"サンプリング率"}),h.jsxs("div",{className:"text-blue-900",children:[(e.samplingRatio*100).toFixed(1),"%"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-blue-600 font-medium",children:"手法"}),h.jsx("div",{className:"text-blue-900",children:e.method})]})]})]}),e&&h.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:["💡 大量データのため、",e.method,"手法でサンプリングを適用しました"]})]})}function xM({type:n,results:e}){if(console.log("AnalysisResults:",{type:n,results:e}),!e)return console.log("AnalysisResults: No results to display"),null;switch(n){case"basic":return h.jsx(vM,{stats:e});case"correlation":return h.jsx(bM,{correlations:e});case"changepoint":return h.jsx(_M,{changePoints:e});case"factor":return h.jsx(wM,{factorAnalysis:e});case"histogram":return h.jsx(SM,{data:e});case"timeseries":return h.jsx(NM,{data:e});case"column":return h.jsx(IM,{data:e});case"missing":return h.jsx(kM,{data:e});case"text":return h.jsx(EM,{data:e});default:return null}}function vM({stats:n}){if(console.log("BasicStatsResults received:",n),Array.isArray(n))return n.length===0?h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"基本統計の結果がありません。"})}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b-2 border-gray-200",children:[h.jsx("th",{className:"text-left p-3 font-medium text-gray-900",children:"列名"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"件数"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"平均"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"標準偏差"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"最小値"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"最大値"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"第1四分位数"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"中央値"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"第3四分位数"})]})}),h.jsx("tbody",{children:n.map((t,s)=>h.jsxs("tr",{className:`border-b ${s%2===0?"bg-white":"bg-gray-50"}`,children:[h.jsx("td",{className:"p-3 font-medium text-gray-900",children:t.columnName}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.count)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.mean)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.std)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.min)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.max)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.quartiles?.q1)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.quartiles?.q2)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(t.quartiles?.q3)})]},s))})]})});if(!n||typeof n!="object")return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"基本統計の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected object or array, got: ",typeof n]})]});const e=[{label:"件数",value:se(n.count)},{label:"平均",value:se(n.mean)},{label:"標準偏差",value:se(n.std)},{label:"最小値",value:se(n.min)},{label:"最大値",value:se(n.max)},{label:"第1四分位数",value:se(n.quartiles?.q1)},{label:"中央値",value:se(n.quartiles?.q2)},{label:"第3四分位数",value:se(n.quartiles?.q3)}];return h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(t=>h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.value}),h.jsx("div",{className:"text-sm text-gray-600",children:t.label})]},t.label))})}function bM({correlations:n}){if(console.log("CorrelationResults received:",n,"Type:",typeof n,"IsArray:",Array.isArray(n)),!n||!Array.isArray(n))return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"相関分析の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected array, got: ",typeof n]})]});if(n.length===0)return h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"相関分析の結果がありません。"})});const e={labels:n.map(s=>`${s.column1}-${s.column2}`),datasets:[{label:"相関係数",data:n.map(s=>s.correlation),backgroundColor:n.map(s=>s.correlation>.7?"#22c55e":s.correlation>.3?"#3b82f6":s.correlation<-.7?"#ef4444":s.correlation<-.3?"#f59e0b":"#6b7280")}]},t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"相関係数マトリックス"}},scales:{y:{beginAtZero:!0,min:-1,max:1}}};return h.jsxs("div",{children:[h.jsx(O1,{data:e,options:t}),h.jsx("div",{className:"mt-4 space-y-2",children:n.map((s,i)=>h.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[h.jsxs("span",{className:"font-medium",children:[s.column1," × ",s.column2]}),h.jsx("span",{className:`font-bold ${Math.abs(s.correlation)>.7?"text-red-600":Math.abs(s.correlation)>.3?"text-blue-600":"text-gray-600"}`,children:se(s.correlation)})]},i))})]})}function _M({changePoints:n}){if(console.log("ChangePointResults received:",n),n&&typeof n=="object"&&"changePoints"in n&&"chartData"in n){const{changePoints:i,chartData:a,samplingInfo:l,performanceMetrics:c,statistics:d}=n;if(!i||i.length===0)return h.jsxs("div",{children:[h.jsx(au,{performanceInfo:c,samplingInfo:l}),h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"変化点が検出されませんでした。"})})]});const f=kx(c?.processedSize||i.length);return h.jsxs("div",{children:[h.jsx(au,{performanceInfo:c,samplingInfo:l}),d&&h.jsxs("div",{className:"space-y-4 mb-4",children:[h.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Gh,{className:"h-4 w-4 text-blue-600"}),h.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["使用アルゴリズム: ",d.algorithm||"Moving Average"]})]})}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.length}),h.jsx("div",{className:"text-sm text-gray-600",children:"変化点数"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[(d.averageConfidence*100).toFixed(1),"%"]}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均信頼度"})]}),d.threshold&&h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:se(d.threshold)}),h.jsx("div",{className:"text-sm text-gray-600",children:"検出閾値"})]}),d.globalStd&&h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:se(d.globalStd)}),h.jsx("div",{className:"text-sm text-gray-600",children:"標準偏差"})]})]})]}),h.jsx("div",{className:"h-80 mb-6",children:h.jsx(Ia,{data:a,options:f})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b-2 border-gray-200",children:[h.jsx("th",{className:"text-left p-3 font-medium text-gray-900",children:"インデックス"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"値"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"信頼度"}),i[0]?.beforeMean!==void 0&&h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"変化前平均"}),i[0]?.afterMean!==void 0&&h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"変化後平均"}),i[0]?.difference!==void 0&&h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"差分"}),i[0]?.algorithm&&h.jsx("th",{className:"text-center p-3 font-medium text-gray-900",children:"アルゴリズム"})]})}),h.jsx("tbody",{children:i.map((m,y)=>h.jsxs("tr",{className:`border-b ${y%2===0?"bg-white":"bg-gray-50"}`,children:[h.jsx("td",{className:"p-3 font-medium text-gray-900",children:m.index}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.value)}),h.jsx("td",{className:"p-3 text-right",children:h.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${m.confidence>.8?"bg-red-100 text-red-800":m.confidence>.6?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[(m.confidence*100).toFixed(1),"%"]})}),m.beforeMean!==void 0&&h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.beforeMean)}),m.afterMean!==void 0&&h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.afterMean)}),m.difference!==void 0&&h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.difference)}),m.algorithm&&h.jsx("td",{className:"p-3 text-center",children:h.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded text-xs font-medium",children:m.algorithm})})]},y))})]})})]})}if(!n||!Array.isArray(n))return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"変化点検出の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected array or optimized result, got: ",typeof n]})]});if(n.length===0)return h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"変化点が検出されませんでした。"})});const t={labels:n.map(i=>`Point ${i.index||"N/A"}`),datasets:[{label:"変化点",data:n.map(i=>i.value||0),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",pointBackgroundColor:n.map(i=>(i.confidence||0)>.8?"#dc2626":(i.confidence||0)>.6?"#f59e0b":"#6b7280"),pointBorderColor:n.map(i=>(i.confidence||0)>.8?"#dc2626":(i.confidence||0)>.6?"#f59e0b":"#6b7280"),pointBorderWidth:0,pointRadius:n.map(i=>1+(i.confidence||0)*2),pointHoverRadius:n.map(i=>2+(i.confidence||0)*3)}]},s=kx(n.length);return h.jsxs("div",{children:[h.jsx(Ia,{data:t,options:s}),h.jsx("div",{className:"mt-4 space-y-2",children:n.map((i,a)=>h.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[h.jsxs("span",{className:"font-medium",children:["Index ",i.index||"N/A"]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"font-bold",children:se(i.value)}),h.jsxs("div",{className:"text-sm text-gray-600",children:["信頼度: ",i.confidence!==void 0?(i.confidence*100).toFixed(1):"N/A","%"]})]})]},a))})]})}function wM({factorAnalysis:n}){if(console.log("FactorAnalysisResults received:",n),!n||!n.factors||!Array.isArray(n.factors))return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"因子分析の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected object with factors array, got: ",typeof n]})]});if(n.factors.length===0)return h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"因子分析の結果がありません。"})});const e={labels:n.factors.map(s=>s.name),datasets:[{label:"寄与率",data:n.factors.map(s=>s.variance*100),backgroundColor:["#3b82f6","#22c55e","#f59e0b","#ef4444"]}]},t={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{position:"right",labels:{boxWidth:15,font:{size:12}}},title:{display:!0,text:"因子分析結果",font:{size:14}}},layout:{padding:{top:10,bottom:10,left:10,right:10}}};return h.jsxs("div",{children:[h.jsx("div",{className:"w-full max-w-2xl mx-auto mb-6",children:h.jsx(Mj,{data:e,options:t})}),h.jsx("div",{className:"mt-4 space-y-4",children:n.factors.map((s,i)=>h.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[h.jsxs("h4",{className:"font-medium mb-2",children:[s.name," (寄与率: ",(s.variance*100).toFixed(1),"%)"]}),h.jsx("div",{className:"space-y-1",children:s.loadings.map((a,l)=>h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{children:a.variable}),h.jsx("span",{className:"font-mono",children:se(a.loading)})]},l))})]},i))})]})}function SM({data:n}){if(console.log("HistogramResults received:",n),!n||!Array.isArray(n))return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"ヒストグラムの結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected array, got: ",typeof n]})]});if(n.length===0)return h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"ヒストグラムの結果がありません。"})});const e={labels:n.map(s=>s.bin),datasets:[{label:"度数",data:n.map(s=>s.count),backgroundColor:"#3b82f6"}]},t={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"ヒストグラム"}}};return h.jsxs("div",{children:[h.jsx(O1,{data:e,options:t}),h.jsx("div",{className:"mt-4 overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b",children:[h.jsx("th",{className:"text-left p-2",children:"区間"}),h.jsx("th",{className:"text-right p-2",children:"度数"}),h.jsx("th",{className:"text-right p-2",children:"頻度 (%)"})]})}),h.jsx("tbody",{children:n.map((s,i)=>h.jsxs("tr",{className:"border-b",children:[h.jsx("td",{className:"p-2 font-mono",children:s.bin}),h.jsx("td",{className:"p-2 text-right",children:se(s.count)}),h.jsxs("td",{className:"p-2 text-right",children:[s.frequency,"%"]})]},i))})]})})]})}function NM({data:n}){if(console.log("TimeSeriesResults received:",n),n&&typeof n=="object"&&"data"in n&&"chartData"in n){const{data:i,chartData:a,samplingInfo:l,performanceMetrics:c,statistics:d}=n;if(!i||i.length===0)return h.jsxs("div",{children:[h.jsx(au,{performanceInfo:c,samplingInfo:l}),h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"時系列データがありません。"})})]});const f=gM(c?.processedSize||i.length);return h.jsxs("div",{children:[h.jsx(au,{performanceInfo:c,samplingInfo:l}),d&&h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:i.length}),h.jsx("div",{className:"text-sm text-gray-600",children:"データ点数"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:se(d.mean)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均値"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:d.trend.direction==="increasing"?"↗️":d.trend.direction==="decreasing"?"↘️":"→"}),h.jsx("div",{className:"text-sm text-gray-600",children:"トレンド"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-xl font-bold text-gray-900",children:d.movingAverageWindow}),h.jsx("div",{className:"text-sm text-gray-600",children:"移動平均期間"})]})]}),h.jsx("div",{className:"h-80 mb-6",children:h.jsx(Ia,{data:a,options:f})}),d?.trend&&h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[h.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"トレンド分析"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"傾き: "}),h.jsx("span",{className:"font-mono",children:se(d.trend.slope)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"切片: "}),h.jsx("span",{className:"font-mono",children:se(d.trend.intercept)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"方向: "}),h.jsx("span",{className:`font-medium ${d.trend.direction==="increasing"?"text-green-600":d.trend.direction==="decreasing"?"text-red-600":"text-gray-600"}`,children:d.trend.direction==="increasing"?"上昇傾向":d.trend.direction==="decreasing"?"下降傾向":"安定"})]})]})]}),h.jsxs("div",{className:"overflow-x-auto",children:[h.jsxs("table",{className:"w-full text-sm border-collapse",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b-2 border-gray-200",children:[h.jsx("th",{className:"text-left p-3 font-medium text-gray-900",children:"時間"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"実際の値"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"移動平均"}),h.jsx("th",{className:"text-right p-3 font-medium text-gray-900",children:"トレンド値"})]})}),h.jsx("tbody",{children:i.slice(0,10).map((m,y)=>h.jsxs("tr",{className:`border-b ${y%2===0?"bg-white":"bg-gray-50"}`,children:[h.jsx("td",{className:"p-3 font-medium text-gray-900",children:m.time}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.value)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.movingAverage)}),h.jsx("td",{className:"p-3 text-right font-mono",children:se(m.trend)})]},y))})]}),i.length>10&&h.jsxs("div",{className:"text-center py-2 text-sm text-gray-500",children:["表示中: 上位10件 / 全",i.length,"件"]})]})]})}if(!n||!Array.isArray(n))return h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"時系列分析の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected array, got: ",typeof n]})]});if(n.length===0)return h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"時系列分析の結果がありません。"})});const t={labels:n.map(i=>i.time),datasets:[{label:"値",data:n.map(i=>i.value),borderColor:"#3b82f6",backgroundColor:"#bfdbfe",fill:!0}]},s={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"時系列分析"}},scales:{y:{beginAtZero:!0}}};return h.jsxs("div",{children:[h.jsx(Ia,{data:t,options:s}),h.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["データポイント数: ",se(n.length)]})]})}function IM({data:n}){console.log("ColumnAnalysisResults received:",n);const e=s=>s==null||isNaN(s)?"0.0":s.toFixed(1),t=s=>{if(s.totalRows===0)return"0.0";const i=s.nullPercentage||0,a=s.emptyStringPercentage||0,l=100-i-a;return isNaN(l)?"0.0":Math.max(0,l).toFixed(1)};return!n||!Array.isArray(n)?h.jsxs("div",{className:"text-center py-4 text-red-600",children:[h.jsx("p",{children:"カラム分析の結果が無効です。"}),h.jsxs("p",{className:"text-xs mt-2",children:["Expected array, got: ",typeof n]})]}):n.length===0?h.jsx("div",{className:"text-center py-4 text-gray-600",children:h.jsx("p",{children:"カラム分析の結果がありません。"})}):h.jsx("div",{className:"space-y-3",children:n.map((s,i)=>h.jsxs("div",{className:"bg-white border rounded-lg p-3 md:p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h4",{className:"text-base font-medium text-gray-900 break-words",children:s.columnName}),h.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:s.dataType})]}),h.jsxs("div",{className:"text-sm text-gray-600",children:[se(s.totalRows),"行"]})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-3 py-1",children:[h.jsx("span",{className:"text-sm font-medium text-blue-700",children:se(s.uniqueValues)}),h.jsx("span",{className:"text-xs text-gray-600",children:"ユニーク"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-red-50 rounded px-3 py-1",children:[h.jsx("span",{className:"text-sm font-medium text-red-700",children:se(s.nullCount)}),h.jsxs("span",{className:"text-xs text-gray-600",children:["NULL(",e(s.nullPercentage),"%)"]})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 rounded px-3 py-1",children:[h.jsx("span",{className:"text-sm font-medium text-orange-700",children:se(s.emptyStringCount)}),h.jsxs("span",{className:"text-xs text-gray-600",children:["空文字(",e(s.emptyStringPercentage),"%)"]})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-green-50 rounded px-3 py-1",children:[h.jsxs("span",{className:"text-sm font-medium text-green-700",children:[t(s),"%"]}),h.jsx("span",{className:"text-xs text-gray-600",children:s.totalRows===0?"有効データ (データなし)":"有効データ"})]})]}),s.numericStats&&h.jsx("div",{className:"mb-3",children:h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-2 py-1",children:[h.jsx("span",{className:"text-xs font-medium text-blue-700",children:se(s.numericStats.min)}),h.jsx("span",{className:"text-xs text-gray-600",children:"最小"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-2 py-1",children:[h.jsx("span",{className:"text-xs font-medium text-blue-700",children:se(s.numericStats.max)}),h.jsx("span",{className:"text-xs text-gray-600",children:"最大"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-2 py-1",children:[h.jsx("span",{className:"text-xs font-medium text-blue-700",children:se(s.numericStats.mean)}),h.jsx("span",{className:"text-xs text-gray-600",children:"平均"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-2 py-1",children:[h.jsx("span",{className:"text-xs font-medium text-blue-700",children:se(s.numericStats.median)}),h.jsx("span",{className:"text-xs text-gray-600",children:"中央値"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 rounded px-2 py-1",children:[h.jsx("span",{className:"text-xs font-medium text-blue-700",children:se(s.numericStats.std)}),h.jsx("span",{className:"text-xs text-gray-600",children:"標準偏差"})]})]})}),h.jsxs("details",{className:"group",children:[h.jsxs("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900 py-1",children:["詳細データ",h.jsx("span",{className:"ml-1 text-xs text-gray-500 group-open:hidden",children:"（クリックで展開）"})]}),h.jsxs("div",{className:"mt-2 grid md:grid-cols-2 gap-4",children:[s.topValues&&s.topValues.length>0&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"上位値"}),h.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:s.topValues.slice(0,5).map((a,l)=>h.jsxs("div",{className:"flex justify-between items-center p-1 bg-gray-50 rounded text-xs",children:[h.jsx("span",{className:"break-all font-mono truncate flex-1 min-w-0",children:a.value||"(空)"}),h.jsxs("span",{className:"text-gray-500 ml-2 flex-shrink-0",children:[se(a.count),"(",e(a.percentage),"%)"]})]},l))})]}),h.jsxs("div",{children:[h.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"サンプル値"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:s.sampleValues&&s.sampleValues.length>0?s.sampleValues.slice(0,8).map((a,l)=>h.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded font-mono truncate max-w-20",title:a,children:a||"(空)"},l)):h.jsx("span",{className:"text-gray-500 text-xs",children:"サンプル値なし"})})]})]})]})]},i))})}function EM({data:n}){if(console.log("TextAnalysisResults received:",n),!n||typeof n!="object")return h.jsx("div",{className:"text-center py-4 text-red-600",children:h.jsx("p",{children:"テキスト分析の結果が無効です。"})});const{statistics:e,wordFrequency:t,characterFrequency:s,patterns:i,language:a,sentences:l,readability:c}=n;return h.jsxs("div",{className:"space-y-6",children:[e&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"基本統計"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[h.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-700",children:se(e.totalRecords)}),h.jsx("div",{className:"text-sm text-gray-600",children:"総レコード数"})]}),h.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-green-700",children:se(e.totalCharacters)}),h.jsx("div",{className:"text-sm text-gray-600",children:"総文字数"})]}),h.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-purple-700",children:se(e.totalWords)}),h.jsx("div",{className:"text-sm text-gray-600",children:"総単語数"})]}),h.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-orange-700",children:se(e.uniqueRecords)}),h.jsx("div",{className:"text-sm text-gray-600",children:"ユニーク数"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-lg font-bold text-gray-700",children:se(e.averageCharactersPerRecord)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均文字数/レコード"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-lg font-bold text-gray-700",children:se(e.averageWordsPerRecord)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均単語数/レコード"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[se(e.uniquePercentage),"%"]}),h.jsx("div",{className:"text-sm text-gray-600",children:"ユニーク率"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[se(e.minCharacters)," - ",se(e.maxCharacters)]}),h.jsx("div",{className:"text-sm text-gray-600",children:"文字数範囲"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[se(e.minWords)," - ",se(e.maxWords)]}),h.jsx("div",{className:"text-sm text-gray-600",children:"単語数範囲"})]}),h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"text-lg font-bold text-gray-700",children:[se(e.emptyPercentage),"%"]}),h.jsx("div",{className:"text-sm text-gray-600",children:"空レコード率"})]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t&&t.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"単語頻度 (上位15件)"}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map((d,f)=>h.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center p-3 bg-blue-50 rounded text-sm gap-1 min-w-0",children:[h.jsx("span",{className:"font-mono text-blue-900 font-medium break-all text-xs sm:text-sm flex-1 min-w-0",children:d.word}),h.jsxs("div",{className:"text-right flex-shrink-0",children:[h.jsx("span",{className:"font-bold text-blue-700",children:se(d.count)}),h.jsxs("span",{className:"text-blue-500 ml-2",children:["(",se(d.percentage),"%)"]})]})]},f))})]}),s&&s.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"文字頻度 (上位15件)"}),h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.map((d,f)=>h.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded text-sm",children:[h.jsx("span",{className:"font-mono text-green-900 font-bold text-lg",children:d.character}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"font-bold text-green-700",children:se(d.count)}),h.jsxs("span",{className:"text-green-500 ml-2",children:["(",se(d.percentage),"%)"]})]})]},f))})]})]}),a&&a.languagePatterns&&a.languagePatterns.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"言語・文字種分析"}),h.jsx("div",{className:"mb-2",children:h.jsxs("span",{className:"text-sm text-gray-600",children:["平均文字列長: ",h.jsx("span",{className:"font-bold",children:se(a.averageLength)}),"文字"]})}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.languagePatterns.map((d,f)=>h.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[h.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[se(d.percentage),"%"]}),h.jsx("div",{className:"text-sm text-gray-600",children:d.pattern}),h.jsxs("div",{className:"text-xs text-gray-500",children:["(",se(d.count),"文字)"]})]},f))})]}),i&&i.patterns&&i.patterns.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"パターン分析"}),h.jsx("div",{className:"space-y-3",children:i.patterns.map((d,f)=>h.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"font-medium text-orange-900",children:d.description}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"font-bold text-orange-700",children:se(d.count)}),h.jsxs("span",{className:"text-orange-500 ml-2",children:["(",se(d.percentage),"%)"]})]})]}),d.examples&&d.examples.length>0&&h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"例:"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:d.examples.map((m,y)=>h.jsx("span",{className:"inline-block bg-white text-orange-800 text-xs px-2 py-1 rounded border font-mono",children:m},y))})]})]},f))})]}),l&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"文分析"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[h.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-700",children:se(l.totalSentences)}),h.jsx("div",{className:"text-sm text-gray-600",children:"総文数"})]}),h.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-green-700",children:se(l.averageSentenceLength)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均文長(語数)"})]})]}),l.sentenceLengthDistribution&&l.sentenceLengthDistribution.length>0&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"文長分布"}),h.jsx("div",{className:"space-y-2",children:l.sentenceLengthDistribution.map((d,f)=>h.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[h.jsx("span",{className:"font-medium text-blue-900",children:d.range}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"font-bold text-blue-700",children:se(d.count)}),h.jsxs("span",{className:"text-blue-500 ml-2",children:["(",se(d.percentage),"%)"]})]})]},f))})]}),l.punctuationUsage&&l.punctuationUsage.length>0&&h.jsxs("div",{children:[h.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"句読点使用状況"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:l.punctuationUsage.map((d,f)=>h.jsxs("div",{className:"text-center p-3 bg-indigo-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-indigo-700 font-mono",children:d.punctuation}),h.jsx("div",{className:"text-sm font-bold text-indigo-600",children:se(d.count)}),h.jsxs("div",{className:"text-xs text-gray-600",children:["(",se(d.percentage),"%)"]})]},f))})]})]}),c&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"読みやすさ分析"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[h.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[h.jsx("div",{className:"text-3xl font-bold text-teal-700",children:se(c.readabilityScore)}),h.jsx("div",{className:"text-sm text-gray-600",children:"読みやすさスコア"}),h.jsx("div",{className:"text-xs text-teal-600 mt-1",children:"(0-100)"})]}),h.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[h.jsx("div",{className:"text-lg font-bold text-teal-700",children:c.complexityLevel}),h.jsx("div",{className:"text-sm text-gray-600",children:"複雑度レベル"})]}),h.jsxs("div",{className:"text-center p-4 bg-teal-50 rounded-lg",children:[h.jsx("div",{className:"text-lg font-bold text-teal-700",children:se(c.averageWordsPerSentence)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均語数/文"})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:h.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[h.jsx("div",{className:"text-lg font-bold text-gray-700",children:se(c.averageCharactersPerWord)}),h.jsx("div",{className:"text-sm text-gray-600",children:"平均文字数/語"})]})}),c.recommendations&&c.recommendations.length>0&&h.jsxs("div",{children:[h.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"改善提案"}),h.jsx("div",{className:"space-y-2",children:c.recommendations.map((d,f)=>h.jsx("div",{className:"p-3 bg-amber-50 border-l-4 border-amber-300 rounded",children:h.jsx("span",{className:"text-amber-800",children:d})},f))})]})]})]})}function kM({data:n}){console.log("MissingDataResults received:",n);const[e,t]=ce.useState(1),[s,i]=ce.useState(10);if(!n||!n.events)return h.jsx("div",{className:"text-center py-4 text-red-600",children:h.jsx("p",{children:"欠損検知の結果が無効です。"})});const{events:a,summary:l,columnStats:c}=n,d=[...a].sort((_,w)=>w.rowIndex-_.rowIndex),f=Math.ceil(d.length/s),m=(e-1)*s,y=m+s,x=d.slice(m,y),b=tM(n,"defaultTable");return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"欠損検知サマリー"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-red-700",children:se(l.totalEvents)}),h.jsx("div",{className:"text-sm text-gray-600",children:"総イベント数"})]}),h.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-orange-700",children:se(l.missingStartEvents)}),h.jsx("div",{className:"text-sm text-gray-600",children:"欠損開始"})]}),h.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-green-700",children:se(l.missingEndEvents)}),h.jsx("div",{className:"text-sm text-gray-600",children:"欠損復旧"})]}),h.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded",children:[h.jsx("div",{className:"text-2xl font-bold text-purple-700",children:se(l.longestMissingStreak)}),h.jsx("div",{className:"text-sm text-gray-600",children:"最長欠損期間"})]})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"カラム別統計"}),h.jsx("div",{className:"space-y-3",children:Object.entries(c).map(([_,w])=>h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h5",{className:"font-medium text-gray-900",children:_}),h.jsxs("span",{className:"text-sm text-gray-600",children:[se(w.missingPercentage),"% 欠損"]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"イベント数: "}),h.jsx("span",{className:"font-medium",children:w.totalMissingEvents})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"平均欠損期間: "}),h.jsx("span",{className:"font-medium",children:se(w.averageMissingLength)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"最大欠損期間: "}),h.jsx("span",{className:"font-medium",children:w.maxMissingLength})]})]})]},_))})]}),a.length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"欠損イベント詳細"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("label",{className:"text-sm text-gray-700",children:"表示件数:"}),h.jsxs("select",{value:s,onChange:_=>{i(Number(_.target.value)),t(1)},className:"px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[h.jsx("option",{value:10,children:"10件"}),h.jsx("option",{value:25,children:"25件"}),h.jsx("option",{value:50,children:"50件"}),h.jsx("option",{value:100,children:"100件"})]})]}),h.jsxs("div",{className:"text-sm text-gray-600",children:[d.length,"件中 ",m+1,"-",Math.min(y,d.length),"件を表示"]})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[h.jsx("thead",{className:"bg-gray-50",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"行番号"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"カラム"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"イベント"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"値"}),h.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"欠損期間"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map((_,w)=>h.jsxs("tr",{className:_.eventType==="missing_start"?"bg-red-50":"bg-green-50",children:[h.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_.rowIndex}),h.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_.columnName}),h.jsx("td",{className:"px-4 py-2 text-sm",children:h.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_.eventType==="missing_start"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:_.eventType==="missing_start"?"欠損開始":"欠損復旧"})}),h.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 font-mono",children:_.value===null?"NULL":_.value===""?"(空)":String(_.value)}),h.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:_.missingLength?`${_.missingLength}行`:"-"})]},m+w))})]})}),f>1&&h.jsxs("div",{className:"flex items-center justify-between mt-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>t(1),disabled:e===1,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"最初"}),h.jsx("button",{onClick:()=>t(_=>Math.max(1,_-1)),disabled:e===1,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"前へ"})]}),h.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,f)},(_,w)=>{const N=Math.max(1,Math.min(f-4,e-2))+w;return N>f?null:h.jsx("button",{onClick:()=>t(N),className:`px-3 py-1 text-sm border rounded ${e===N?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:bg-gray-50"}`,children:N},N)})}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>t(_=>Math.min(f,_+1)),disabled:e===f,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"次へ"}),h.jsx("button",{onClick:()=>t(f),disabled:e===f,className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"最後"})]})]})]}),b&&b.datasets.length>0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"欠損パターン可視化"}),h.jsx("div",{className:"bg-white p-4 border rounded-lg",children:h.jsx(Ia,{data:b,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"欠損イベントの時系列分布"}},scales:{x:{title:{display:!0,text:"行番号"}},y:{title:{display:!0,text:"カラム"},type:"linear",ticks:{stepSize:1}}}},height:300})})]})]})}const TM=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)});class jM{notifications=[];listeners=[];addNotification(e,t,s){const i={id:TM(),tableName:e,changeType:t,count:s,timestamp:new Date,acknowledged:!1};this.notifications.unshift(i),this.notifications.length>50&&(this.notifications=this.notifications.slice(0,50)),this.notifyListeners(),typeof Notification<"u"&&Notification.permission==="granted"&&new Notification(`データ変更検出: ${e}`,{body:`${s}件の${this.getChangeTypeText(t)}が検出されました`,icon:"/favicon.ico"})}acknowledgeNotification(e){const t=this.notifications.find(s=>s.id===e);t&&(t.acknowledged=!0,this.notifyListeners())}clearNotifications(){this.notifications=[],this.notifyListeners()}getNotifications(){return[...this.notifications]}getUnacknowledgedCount(){return this.notifications.filter(e=>!e.acknowledged).length}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}notifyListeners(){this.listeners.forEach(e=>e([...this.notifications]))}getChangeTypeText(e){switch(e){case"inserted":return"挿入";case"updated":return"更新";case"deleted":return"削除";default:return"変更"}}}const Yh=new jM;async function MM(){if(typeof Notification>"u"||!("Notification"in window))return console.warn("This browser does not support notifications"),!1;if(Notification.permission==="granted")return!0;if(Notification.permission==="denied")return!1;try{return await Notification.requestPermission()==="granted"}catch(n){return console.warn("Failed to request notification permission:",n),!1}}function CM(){const[n,e]=ce.useState(!1),[t,s]=ce.useState(null),[i,a]=ce.useState({tableName:"sample_data",interval:5e3,recordsPerBatch:5,missingDataRate:10,includeNulls:!0,includeEmptyStrings:!0,includeZeros:!0,includeUndefined:!0}),{addTable:l}=js(),c=(x,b)=>{if(Math.random()*100>=i.missingDataRate)return x;const _=[];if(i.includeNulls&&_.push("null"),i.includeEmptyStrings&&b==="text"&&_.push("empty"),i.includeZeros&&b==="number"&&_.push("zero"),i.includeUndefined&&_.push("undefined"),_.length===0)return x;switch(_[Math.floor(Math.random()*_.length)]){case"null":return null;case"empty":return"";case"zero":return b==="number"?0:"0";case"undefined":return;default:return x}},d=async()=>{try{console.log("Creating sample table:",i.tableName);const{memoryDataStore:x}=await ea(async()=>{const{memoryDataStore:_}=await Promise.resolve().then(()=>na);return{memoryDataStore:_}},void 0);try{x.dropTable(i.tableName),console.log("Existing table dropped:",i.tableName)}catch{console.log("Table did not exist, proceeding with creation")}const b=Array.from({length:20},(_,w)=>{const N={id:w+1,timestamp:new Date(Date.now()-(20-w)*6e4).toISOString(),temperature:Math.round((Math.random()*40+10)*100)/100,humidity:Math.round((Math.random()*60+30)*100)/100,pressure:Math.round((Math.random()*200+950)*100)/100,sales:Math.round(Math.random()*1e4+1e3),score:Math.round((Math.random()*40+60)*100)/100,category:["A","B","C"][Math.floor(Math.random()*3)],status:["active","inactive"][Math.floor(Math.random()*2)],description:`Sample text data ${w+1} - ${["良好","普通","要改善"][Math.floor(Math.random()*3)]}`};return{...N,temperature:c(N.temperature,"number"),humidity:c(N.humidity,"number"),pressure:c(N.pressure,"number"),sales:c(N.sales,"number"),score:c(N.score,"number"),category:c(N.category,"text"),status:c(N.status,"text"),description:c(N.description,"text")}});console.log("Generated initial data:",b.length,"records"),x.createTable(i.tableName,[{name:"id",type:"NUMBER",nullable:!1},{name:"timestamp",type:"TEXT",nullable:!1},{name:"temperature",type:"NUMBER",nullable:!0},{name:"humidity",type:"NUMBER",nullable:!0},{name:"pressure",type:"NUMBER",nullable:!0},{name:"sales",type:"NUMBER",nullable:!0},{name:"score",type:"NUMBER",nullable:!0},{name:"category",type:"TEXT",nullable:!0},{name:"status",type:"TEXT",nullable:!0},{name:"description",type:"TEXT",nullable:!0}]);for(const _ of b)x.insertRow(i.tableName,{id:_.id.toString(),timestamp:_.timestamp,temperature:_.temperature===null||_.temperature===void 0?null:_.temperature.toString(),humidity:_.humidity===null||_.humidity===void 0?null:_.humidity.toString(),pressure:_.pressure===null||_.pressure===void 0?null:_.pressure.toString(),sales:_.sales===null||_.sales===void 0?null:_.sales.toString(),score:_.score===null||_.score===void 0?null:_.score.toString(),category:_.category===void 0?null:_.category,status:_.status===void 0?null:_.status,description:_.description===void 0?null:_.description});console.log("Data inserted into memory store"),l({name:i.tableName,connectionId:"file",columns:[{name:"id",type:"NUMBER",nullable:!1},{name:"timestamp",type:"TEXT",nullable:!1},{name:"temperature",type:"NUMBER",nullable:!0},{name:"humidity",type:"NUMBER",nullable:!0},{name:"pressure",type:"NUMBER",nullable:!0},{name:"sales",type:"NUMBER",nullable:!0},{name:"score",type:"NUMBER",nullable:!0},{name:"category",type:"TEXT",nullable:!0},{name:"status",type:"TEXT",nullable:!0},{name:"description",type:"TEXT",nullable:!0}],rowCount:b.length,isLoaded:!0}),console.log("Table added to store"),window.dispatchEvent(new CustomEvent("dataChanged",{detail:{tableName:i.tableName,changeType:"inserted",count:b.length}})),console.log("Dispatched dataChanged event for table creation:",i.tableName),alert(`サンプルテーブル「${i.tableName}」を作成しました（${b.length}件のデータ）`)}catch(x){console.error("Failed to create sample table:",x),alert(`サンプルテーブルの作成に失敗しました: ${x instanceof Error?x.message:"Unknown error"}`)}},f=()=>{if(n)return;const x=setInterval(async()=>{try{const{memoryDataStore:b}=await ea(async()=>{const{memoryDataStore:D}=await Promise.resolve().then(()=>na);return{memoryDataStore:D}},void 0);if(!b.listTables().includes(i.tableName)){console.warn(`Table ${i.tableName} does not exist in memory store`);return}const N=b.getTableSchema(i.tableName)?.data||[],I=N.length>0?Math.max(...N.map(D=>parseInt(D.id||"0",10))):0,k=Array.from({length:i.recordsPerBatch},(D,L)=>{const M=I+L+1,B={id:M.toString(),timestamp:new Date().toISOString(),temperature:parseFloat((Math.random()*40+10).toFixed(2)),humidity:parseFloat((Math.random()*60+30).toFixed(2)),pressure:parseFloat((Math.random()*200+950).toFixed(2)),sales:Math.round(Math.random()*1e4+1e3),score:parseFloat((Math.random()*40+60).toFixed(2)),category:["A","B","C"][Math.floor(Math.random()*3)],status:["active","inactive"][Math.floor(Math.random()*2)],description:`Sample text data ${M} - ${["良好","普通","要改善"][Math.floor(Math.random()*3)]}`},R={id:B.id,timestamp:B.timestamp,temperature:c(B.temperature,"number"),humidity:c(B.humidity,"number"),pressure:c(B.pressure,"number"),sales:c(B.sales,"number"),score:c(B.score,"number"),category:c(B.category,"text"),status:c(B.status,"text"),description:c(B.description,"text")};return{id:R.id,timestamp:R.timestamp,temperature:R.temperature===null||R.temperature===void 0?null:R.temperature.toString(),humidity:R.humidity===null||R.humidity===void 0?null:R.humidity.toString(),pressure:R.pressure===null||R.pressure===void 0?null:R.pressure.toString(),sales:R.sales===null||R.sales===void 0?null:R.sales.toString(),score:R.score===null||R.score===void 0?null:R.score.toString(),category:R.category===void 0?null:R.category,status:R.status===void 0?null:R.status,description:R.description===void 0?null:R.description}});for(const D of k)b.insertRow(i.tableName,D);console.log(`Inserted ${k.length} records into ${i.tableName}`),window.dispatchEvent(new CustomEvent("dataChanged",{detail:{tableName:i.tableName,changeType:"inserted",count:k.length}})),console.log("Dispatched dataChanged event for",i.tableName)}catch(b){console.error("Failed to insert simulated data:",b)}},i.interval);s(x),e(!0)},m=()=>{t&&(clearInterval(t),s(null)),e(!1)},y=()=>{n?m():f()};return h.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Dx,{className:"h-5 w-5 text-blue-600"}),h.jsx("h3",{className:"font-medium text-gray-900",children:"データシミュレーター"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("button",{onClick:d,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md text-sm hover:bg-blue-200",children:[h.jsx(Fr,{className:"h-4 w-4 inline mr-1"}),"サンプル作成"]}),h.jsx("button",{onClick:y,className:`px-4 py-2 rounded-md flex items-center space-x-2 ${n?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:n?h.jsxs(h.Fragment,{children:[h.jsx(jx,{className:"h-4 w-4"}),h.jsx("span",{children:"停止"})]}):h.jsxs(h.Fragment,{children:[h.jsx(Mx,{className:"h-4 w-4"}),h.jsx("span",{children:"開始"})]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"テーブル名"}),h.jsx("input",{type:"text",value:i.tableName,onChange:x=>a({...i,tableName:x.target.value}),disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"間隔（秒）"}),h.jsx("input",{type:"number",min:"1",max:"60",value:i.interval/1e3,onChange:x=>a({...i,interval:parseInt(x.target.value)*1e3}),disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"バッチ件数"}),h.jsx("input",{type:"number",min:"1",max:"20",value:i.recordsPerBatch,onChange:x=>a({...i,recordsPerBatch:parseInt(x.target.value)}),disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100"})]})]}),h.jsxs("div",{className:"mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"欠損データ生成設定"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"欠損率 (%)"}),h.jsx("input",{type:"number",min:"0",max:"50",value:i.missingDataRate,onChange:x=>a({...i,missingDataRate:parseInt(x.target.value)||0}),disabled:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-medium text-gray-700",children:"欠損タイプ"}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:i.includeNulls,onChange:x=>a({...i,includeNulls:x.target.checked}),disabled:n,className:"rounded"}),h.jsx("span",{className:"text-sm text-gray-700",children:"NULL値"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:i.includeEmptyStrings,onChange:x=>a({...i,includeEmptyStrings:x.target.checked}),disabled:n,className:"rounded"}),h.jsx("span",{className:"text-sm text-gray-700",children:"空文字"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:i.includeZeros,onChange:x=>a({...i,includeZeros:x.target.checked}),disabled:n,className:"rounded"}),h.jsx("span",{className:"text-sm text-gray-700",children:"0値"})]}),h.jsxs("label",{className:"flex items-center space-x-2",children:[h.jsx("input",{type:"checkbox",checked:i.includeUndefined,onChange:x=>a({...i,includeUndefined:x.target.checked}),disabled:n,className:"rounded"}),h.jsx("span",{className:"text-sm text-gray-700",children:"undefined"})]})]})]})]})]}),n&&h.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full animate-pulse"}),h.jsxs("span",{className:"text-sm text-green-700",children:["データシミュレーション実行中 - ",i.interval/1e3,"秒ごとに",i.recordsPerBatch,"件のデータを挿入"]})]})}),h.jsxs("div",{className:"mt-4 text-xs text-gray-600",children:[h.jsx("p",{children:"このシミュレーターは、リアルタイム更新機能のテスト用にダミーデータを定期的に挿入します。"}),h.jsx("p",{children:"欠損データ設定により、NULL値、空文字、0値、undefinedを指定した確率で生成できます。"}),h.jsx("p",{children:"まず「サンプル作成」でテーブルを作成し、「開始」でデータの挿入を開始してください。"})]})]})}function OM(){const[n,e]=ce.useState(!1),[t,s]=ce.useState([]),{settings:i,subscriptions:a,isMonitoring:l,updateSettings:c,addSubscription:d,removeSubscription:f,toggleSubscription:m}=mu(),{tables:y}=js();ce.useEffect(()=>Yh.subscribe(s),[]);const x=()=>{c({isEnabled:!i.isEnabled})},b=N=>{const I=y.find(k=>k.name===N);I&&d({tableName:I.name,connectionId:I.connectionId,rowCount:0})},_=async()=>{const N=await MM();alert(N?"ブラウザ通知が有効になりました":"ブラウザ通知の許可が必要です")},w=t.filter(N=>!N.acknowledged).length;return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"リアルタイム更新"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>e(!n),className:"p-2 text-gray-600 hover:text-gray-800",children:h.jsx(Qh,{className:"h-5 w-5"})}),h.jsx("button",{onClick:_,className:"p-2 text-gray-600 hover:text-gray-800",title:"ブラウザ通知を有効にする",children:typeof Notification<"u"&&Notification.permission==="granted"?h.jsx(Kw,{className:"h-5 w-5 text-green-600"}):h.jsx(Qw,{className:"h-5 w-5"})}),h.jsx("button",{onClick:x,className:`px-4 py-2 rounded-md flex items-center space-x-2 ${i.isEnabled?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:i.isEnabled?h.jsxs(h.Fragment,{children:[h.jsx(jx,{className:"h-4 w-4"}),h.jsx("span",{children:"停止"})]}):h.jsxs(h.Fragment,{children:[h.jsx(Mx,{className:"h-4 w-4"}),h.jsx("span",{children:"開始"})]})})]})]}),h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"監視状態"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ii,{className:`h-4 w-4 ${l?"text-green-600":"text-gray-400"}`}),h.jsx("span",{className:`text-sm ${l?"text-green-600":"text-gray-600"}`,children:l?"監視中":"停止中"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-gray-600",children:"監視間隔"}),h.jsxs("div",{className:"font-medium",children:[i.interval,"秒"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-gray-600",children:"監視対象"}),h.jsxs("div",{className:"font-medium",children:[a.filter(N=>N.isActive).length,"テーブル"]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-gray-600",children:"最終更新"}),h.jsx("div",{className:"font-medium",children:i.lastUpdate?i.lastUpdate.toLocaleTimeString():"未実行"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-gray-600",children:"未読通知"}),h.jsxs("div",{className:"font-medium text-red-600",children:[w,"件"]})]})]})]}),n&&h.jsx(DM,{settings:i,onUpdateSettings:c,onClose:()=>e(!1)}),h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"監視対象テーブル"}),h.jsx(RM,{onAdd:b})]}),a.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(Fr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{children:"監視対象のテーブルがありません"}),h.jsx("p",{className:"text-sm",children:"テーブルを追加して監視を開始してください"})]}):h.jsx("div",{className:"space-y-3",children:a.map(N=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("button",{onClick:()=>m(N.id),className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${N.isActive?"bg-green-600 border-green-600":"border-gray-300"}`,children:N.isActive&&h.jsx(wf,{className:"h-3 w-3 text-white"})}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:N.tableName}),h.jsxs("div",{className:"text-sm text-gray-600",children:["最終チェック: ",N.lastChecked.toLocaleTimeString(),N.rowCount>0&&` | ${N.rowCount}行`]})]})]}),h.jsx("button",{onClick:()=>f(N.id),className:"text-red-600 hover:text-red-800",children:h.jsx(Ox,{className:"h-4 w-4"})})]},N.id))})]}),h.jsx(CM,{}),h.jsx(AM,{notifications:t,onAcknowledge:N=>Yh.acknowledgeNotification(N),onClear:()=>Yh.clearNotifications()})]})}function DM({settings:n,onUpdateSettings:e,onClose:t}){const[s,i]=ce.useState(n),a=()=>{e(s),t()};return h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"リアルタイム設定"}),h.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"監視間隔（秒）"}),h.jsx("input",{type:"number",min:"5",max:"3600",value:s.interval,onChange:l=>i({...s,interval:parseInt(l.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:s.autoRefresh,onChange:l=>i({...s,autoRefresh:l.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"データ変更時に自動リフレッシュ"})]}),h.jsxs("label",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",checked:s.dataChangeDetection,onChange:l=>i({...s,dataChangeDetection:l.target.checked}),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),h.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"データ変更検出を有効にする"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-3",children:[h.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"キャンセル"}),h.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"保存"})]})]})]})}function RM({onAdd:n}){const[e,t]=ce.useState(!1),{tables:s}=js(),{subscriptions:i}=mu(),a=s.filter(l=>!i.some(c=>c.tableName===l.name));return e?h.jsxs("div",{className:"relative",children:[h.jsxs("select",{onChange:l=>{l.target.value&&(n(l.target.value),t(!1))},className:"px-3 py-1 border border-gray-300 rounded-md",defaultValue:"",children:[h.jsx("option",{value:"",children:"テーブルを選択"}),a.map(l=>h.jsx("option",{value:l.name,children:l.name},l.id))]}),h.jsx("button",{onClick:()=>t(!1),className:"ml-2 text-gray-400 hover:text-gray-600",children:"✕"})]}):h.jsxs("button",{onClick:()=>t(!0),className:"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 flex items-center space-x-1",children:[h.jsx(Cx,{className:"h-4 w-4"}),h.jsx("span",{children:"追加"})]})}function AM({notifications:n,onAcknowledge:e,onClear:t}){return h.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"font-medium text-gray-900",children:"変更通知履歴"}),n.length>0&&h.jsx("button",{onClick:t,className:"text-sm text-red-600 hover:text-red-800",children:"すべて削除"})]}),n.length===0?h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(Jw,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{children:"変更通知はありません"})]}):h.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(s=>h.jsx("div",{className:`p-3 rounded border ${s.acknowledged?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"}`,children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"font-medium",children:s.tableName}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.changeType==="inserted"?"bg-green-100 text-green-800":s.changeType==="updated"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:s.changeType==="inserted"?"挿入":s.changeType==="updated"?"更新":"削除"})]}),h.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.count,"件の変更 • ",s.timestamp.toLocaleString()]})]}),!s.acknowledged&&h.jsx("button",{onClick:()=>e(s.id),className:"text-blue-600 hover:text-blue-800 text-sm",children:"確認"})]})},s.id))})]})}function LM(){const[n,e]=ce.useState("data"),{currentTable:t,tables:s,setCurrentTable:i,removeTable:a}=js(),l=`
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  `;return ce.useEffect(()=>{(()=>{t&&t.connectionId==="file"&&(Me.listTables().includes(t.name)||(console.log(`Current table ${t.name} not found in memory, clearing selection`),i(null)))})()},[t,i]),h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:l}}),h.jsx("header",{className:"bg-white shadow-sm border-b",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-between items-center h-16",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx(Vl,{className:"h-8 w-8 text-blue-600"}),h.jsx("h1",{className:"ml-2 text-xl font-semibold text-gray-900",children:"Data Analyzer"})]})})})}),h.jsx("nav",{className:"bg-white border-b",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"hidden md:flex space-x-8",children:[h.jsxs("button",{onClick:()=>e("data"),className:`py-3 px-1 border-b-2 font-medium text-sm ${n==="data"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(Fr,{className:"inline h-4 w-4 mr-1"}),"データソース"]}),h.jsxs("button",{onClick:()=>e("upload"),className:`py-3 px-1 border-b-2 font-medium text-sm ${n==="upload"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(Kh,{className:"inline h-4 w-4 mr-1"}),"ファイルアップロード"]}),h.jsxs("button",{onClick:()=>e("analysis"),className:`py-3 px-1 border-b-2 font-medium text-sm ${n==="analysis"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(Vl,{className:"inline h-4 w-4 mr-1"}),"分析・可視化"]}),h.jsxs("button",{onClick:()=>e("realtime"),className:`py-3 px-1 border-b-2 font-medium text-sm ${n==="realtime"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(ii,{className:"inline h-4 w-4 mr-1"}),"リアルタイム"]}),h.jsxs("button",{onClick:()=>e("settings"),className:`py-3 px-1 border-b-2 font-medium text-sm ${n==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[h.jsx(Qh,{className:"inline h-4 w-4 mr-1"}),"設定"]})]}),h.jsx("div",{className:"md:hidden",children:h.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide space-x-1 py-2",children:[h.jsxs("button",{onClick:()=>e("data"),className:`flex-shrink-0 px-3 py-2 rounded-md text-xs font-medium ${n==="data"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[h.jsx(Fr,{className:"h-4 w-4 mx-auto mb-1"}),h.jsx("span",{className:"block",children:"データソース"})]}),h.jsxs("button",{onClick:()=>e("upload"),className:`flex-shrink-0 px-3 py-2 rounded-md text-xs font-medium ${n==="upload"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[h.jsx(Kh,{className:"h-4 w-4 mx-auto mb-1"}),h.jsx("span",{className:"block",children:"アップロード"})]}),h.jsxs("button",{onClick:()=>e("analysis"),className:`flex-shrink-0 px-3 py-2 rounded-md text-xs font-medium ${n==="analysis"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[h.jsx(Vl,{className:"h-4 w-4 mx-auto mb-1"}),h.jsx("span",{className:"block",children:"分析・可視化"})]}),h.jsxs("button",{onClick:()=>e("realtime"),className:`flex-shrink-0 px-3 py-2 rounded-md text-xs font-medium ${n==="realtime"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[h.jsx(ii,{className:"h-4 w-4 mx-auto mb-1"}),h.jsx("span",{className:"block",children:"リアルタイム"})]}),h.jsxs("button",{onClick:()=>e("settings"),className:`flex-shrink-0 px-3 py-2 rounded-md text-xs font-medium ${n==="settings"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[h.jsx(Qh,{className:"h-4 w-4 mx-auto mb-1"}),h.jsx("span",{className:"block",children:"設定"})]})]})})]})}),h.jsx("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"py-4 sm:py-6",children:[n==="data"&&h.jsx("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:h.jsx(NS,{})}),n==="upload"&&h.jsx("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:h.jsx(GI,{onNavigateToSettings:()=>e("settings")})}),n==="analysis"&&h.jsx("div",{className:"md:bg-white md:rounded-lg md:shadow md:p-6",children:t?h.jsxs("div",{className:"space-y-4 md:space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 md:p-0 bg-white md:bg-transparent rounded-lg md:rounded-none shadow md:shadow-none md:mb-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"分析・可視化"}),h.jsxs("p",{className:"text-sm text-gray-600",children:["テーブル: ",h.jsx("span",{className:"font-medium",children:t.name}),"（",t.columns.length,"列",t.rowCount&&`、${t.rowCount}行`,"、",t.connectionId==="file"?"ファイル":t.connectionId,"）"]})]}),h.jsx("button",{onClick:()=>i(null),className:"text-sm text-blue-600 hover:text-blue-800 self-start sm:self-auto",children:"テーブルを変更"})]}),h.jsx(XI,{tableName:t.name},`preview-${t.id}`),h.jsx(yM,{tableName:t.name,columns:t.columns},`analysis-${t.id}`)]}):h.jsxs("div",{className:"space-y-4 md:space-y-6 p-4 md:p-0 bg-white md:bg-transparent rounded-lg md:rounded-none shadow md:shadow-none",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"テーブル選択"}),s.length>0&&h.jsx("button",{onClick:()=>{window.confirm(`すべてのテーブル（${s.length}個）を削除しますか？

この操作は取り消すことができません。
メモリ内のデータもすべて削除されます。`)&&(s.forEach(c=>{if(c.connectionId==="file"&&Me.listTables().includes(c.name))try{Me.dropTable(c.name)}catch(f){console.warn(`Failed to drop table ${c.name} from memory:`,f)}a(c.id)}),i(null))},className:"text-sm text-red-600 hover:text-red-800 underline",children:"すべてのテーブルを削除"})]}),h.jsx("div",{className:"space-y-4",children:s.length>0?h.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(c=>{const d=Me.listTables(),f=c.connectionId!=="file"||d.includes(c.name);return h.jsxs("div",{className:`border rounded-lg p-4 transition-colors ${f?"border-gray-200 hover:border-blue-500 hover:bg-blue-50 cursor-pointer":"border-red-200 bg-red-50"}`,onClick:()=>f&&i(c),children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("h3",{className:`font-medium ${f?"text-gray-900":"text-red-700"}`,children:[c.name,!f&&h.jsx("span",{className:"ml-2 text-xs",children:"(データ消失)"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("span",{className:"text-xs text-gray-500",children:[c.columns.length," 列"]}),h.jsx("button",{onClick:m=>{if(m.stopPropagation(),window.confirm(`テーブル "${c.name}" を削除しますか？

この操作は取り消すことができません。${f?`

メモリ内のデータも削除されます。`:""}`)){if(f&&c.connectionId==="file")try{Me.dropTable(c.name)}catch(y){console.warn(`Failed to drop table ${c.name} from memory:`,y)}a(c.id),t&&typeof t=="object"&&"id"in t&&t.id===c.id&&i(null)}},className:`text-xs hover:underline ${f?"text-gray-600 hover:text-red-600":"text-red-600 hover:text-red-800"}`,title:"テーブルを削除",children:"削除"})]})]}),h.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["接続: ",c.connectionId==="file"?"ファイル":c.connectionId,c.rowCount&&` • ${c.rowCount} 行`]}),h.jsxs("div",{className:"text-xs text-gray-500",children:[c.columns.slice(0,3).map(m=>m.name).join(", "),c.columns.length>3&&"..."]}),!f&&h.jsx("div",{className:"mt-2 text-xs text-red-600",children:"メモリからデータが消失しています。再度ファイルをアップロードしてください。"})]},c.id)})}):h.jsxs("div",{className:"text-center py-8 text-gray-500",children:[h.jsx(Vl,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),h.jsx("p",{className:"mb-2",children:"分析するテーブルがありません"}),h.jsx("p",{className:"text-sm",children:"「ファイルアップロード」タブからデータをアップロードしてください"})]})})]})}),n==="realtime"&&h.jsx("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:h.jsx(OM,{})}),n==="settings"&&h.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[h.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"設定"}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"設定項目"}),h.jsx("p",{className:"text-gray-600",children:"今後、設定項目がここに追加されます。"})]})]})]})})]})}Vw.createRoot(document.getElementById("root")).render(h.jsx(cu.StrictMode,{children:h.jsx(LM,{})}));
